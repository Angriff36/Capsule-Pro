/**
 * Node.js-only storage adapters for PostgreSQL and Supabase.
 *
 * DO NOT import this file in browser code. It requires Node.js modules (pg).
 * For browser environments, use MemoryStore or LocalStorageStore from runtime-engine.ts.
 *
 * Supabase adapter is optional. '@supabase/supabase-js' is a peer dependency.
 * It is loaded via dynamic import only when SupabaseStore is instantiated.
 * If the package is not installed, a clear error is thrown at construction time.
 */
export interface EntityInstance {
    id: string;
    [key: string]: unknown;
}
export interface Store<T extends EntityInstance = EntityInstance> {
    getAll(): Promise<T[]>;
    getById(id: string): Promise<T | undefined>;
    create(data: Partial<T>): Promise<T>;
    update(id: string, data: Partial<T>): Promise<T | undefined>;
    delete(id: string): Promise<boolean>;
    clear(): Promise<void>;
}
export interface PostgresConfig {
    host?: string;
    port?: number;
    database?: string;
    user?: string;
    password?: string;
    connectionString?: string;
    tableName?: string;
}
export declare class PostgresStore<T extends EntityInstance> implements Store<T> {
    private readonly pool;
    private readonly tableName;
    private readonly generateId;
    private initialized;
    /**
     * Quotes a PostgreSQL identifier to prevent SQL injection.
     * Wraps the identifier in double quotes and escapes any existing quotes.
     */
    private quoteIdentifier;
    constructor(config: PostgresConfig, generateId?: () => string);
    private ensureInitialized;
    private withConnection;
    getAll(): Promise<T[]>;
    getById(id: string): Promise<T | undefined>;
    create(data: Partial<T>): Promise<T>;
    update(id: string, data: Partial<T>): Promise<T | undefined>;
    delete(id: string): Promise<boolean>;
    clear(): Promise<void>;
    close(): Promise<void>;
}
export interface SupabaseConfig {
    url: string;
    key: string;
    tableName?: string;
}
/**
 * Supabase-backed store adapter.
 *
 * '@supabase/supabase-js' is an optional peer dependency. It is loaded via
 * dynamic import at construction time. If the package is not installed, a
 * clear error is thrown instructing the user to install it.
 */
export declare class SupabaseStore<T extends EntityInstance> implements Store<T> {
    private client;
    private readonly tableName;
    private readonly generateId;
    private readonly ready;
    constructor(config: SupabaseConfig, generateId?: () => string);
    private init;
    private ensureReady;
    getAll(): Promise<T[]>;
    getById(id: string): Promise<T | undefined>;
    create(data: Partial<T>): Promise<T>;
    update(id: string, data: Partial<T>): Promise<T | undefined>;
    delete(id: string): Promise<boolean>;
    clear(): Promise<void>;
}
//# sourceMappingURL=stores.node.d.ts.map