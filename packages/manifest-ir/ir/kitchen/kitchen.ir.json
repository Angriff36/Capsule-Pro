{
  "version": "1.0",
  "provenance": {
    "contentHash": "",
    "irHash": "",
    "compilerVersion": "0.3.8",
    "schemaVersion": "1.0",
    "compiledAt": "2026-02-11T23:50:41.151Z",
    "sources": [
      "inventory-rules.manifest",
      "menu-rules.manifest",
      "prep-list-rules.manifest",
      "prep-task-rules.manifest",
      "recipe-rules.manifest",
      "station-rules.manifest"
    ]
  },
  "modules": [],
  "entities": [
    {
      "name": "InventoryItem",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "itemType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "ingredient"
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "baseUnit",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "each"
          },
          "modifiers": []
        },
        {
          "name": "quantityOnHand",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "quantityReserved",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "quantityAvailable",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "parLevel",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "reorderPoint",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "reorderQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "costPerUnit",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "supplierId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "allergens",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "isActive",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": true
          },
          "modifiers": []
        },
        {
          "name": "lastCountedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isBelowPar",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "parLevel"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "<",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityOnHand"
              },
              "right": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "parLevel"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isBelowReorderPoint",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "reorderPoint"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "<",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityOnHand"
              },
              "right": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "reorderPoint"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "totalValue",
          "type": {
            "name": "number",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "*",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityOnHand"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "costPerUnit"
            }
          },
          "dependencies": []
        },
        {
          "name": "reservedValue",
          "type": {
            "name": "number",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "*",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityReserved"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "costPerUnit"
            }
          },
          "dependencies": []
        },
        {
          "name": "stockoutRisk",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "<=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityAvailable"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "lowStockRisk",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "<",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityAvailable"
            },
            "right": {
              "kind": "binary",
              "operator": "*",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "parLevel"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0.25
                }
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "needsReorder",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isBelowReorderPoint"
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [],
      "constraints": [
        {
          "name": "positiveQuantities",
          "code": "positiveQuantities",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityOnHand"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": ">=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityReserved"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            }
          },
          "severity": "block",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "Menu",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "isActive",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": true
          },
          "modifiers": []
        },
        {
          "name": "basePrice",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "pricePerPerson",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "minGuests",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "maxGuests",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "hasPricePerPerson",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "pricePerPerson"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasGuestConstraints",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "or",
            "left": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "minGuests"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "maxGuests"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "guestRangeValid",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "maxGuests"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "minGuests"
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [],
      "constraints": [
        {
          "name": "validName",
          "code": "validName",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "name"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "name"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Menu name is required",
          "overrideable": false
        },
        {
          "name": "validGuestRange",
          "code": "validGuestRange",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "maxGuests"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "minGuests"
            }
          },
          "severity": "block",
          "message": "Maximum guests must be >= minimum guests",
          "overrideable": false
        },
        {
          "name": "positiveMinGuests",
          "code": "positiveMinGuests",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "minGuests"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Minimum guests must be non-negative",
          "overrideable": false
        },
        {
          "name": "positivePrices",
          "code": "positivePrices",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "basePrice"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": ">=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "pricePerPerson"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            }
          },
          "severity": "block",
          "message": "Prices must be non-negative",
          "overrideable": false
        },
        {
          "name": "warnZeroPrice",
          "code": "warnZeroPrice",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "pricePerPerson"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "basePrice"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "MenuDish",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "menuId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "dishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "course",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "sortOrder",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "isOptional",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": false
          },
          "modifiers": []
        }
      ],
      "computedProperties": [],
      "relationships": [],
      "commands": [
        "updateCourse"
      ],
      "constraints": [
        {
          "name": "validMenuId",
          "code": "validMenuId",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "menuId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "menuId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Menu ID is required",
          "overrideable": false
        },
        {
          "name": "validDishId",
          "code": "validDishId",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "dishId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "dishId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Dish ID is required",
          "overrideable": false
        },
        {
          "name": "positiveSortOrder",
          "code": "positiveSortOrder",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "sortOrder"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Sort order must be non-negative",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "PrepList",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "batchMultiplier",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 1
          },
          "modifiers": []
        },
        {
          "name": "dietaryRestrictions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "status",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "draft"
          },
          "modifiers": []
        },
        {
          "name": "totalItems",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "totalEstimatedTime",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "generatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "finalizedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "isActive",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": true
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isDraft",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "draft"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isFinalized",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "finalized"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isCompleted",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "completed"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasItems",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "totalItems"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "avgTimePerItem",
          "type": {
            "name": "number",
            "nullable": false
          },
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "totalItems"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "consequent": {
              "kind": "binary",
              "operator": "/",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "totalEstimatedTime"
              },
              "right": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "totalItems"
              }
            },
            "alternate": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [],
      "constraints": [
        {
          "name": "validName",
          "code": "validName",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "name"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "name"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Prep list name is required",
          "overrideable": false
        },
        {
          "name": "validEventId",
          "code": "validEventId",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "eventId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "eventId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Event ID is required",
          "overrideable": false
        },
        {
          "name": "validBatchMultiplier",
          "code": "validBatchMultiplier",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "batchMultiplier"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Batch multiplier must be positive",
          "overrideable": false
        },
        {
          "name": "validStatus",
          "code": "validStatus",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "draft"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "finalized"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "completed"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "cancelled"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "message": "Status must be valid",
          "overrideable": false
        },
        {
          "name": "positiveTotalItems",
          "code": "positiveTotalItems",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "totalItems"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Total items must be non-negative",
          "overrideable": false
        },
        {
          "name": "positiveTotalTime",
          "code": "positiveTotalTime",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "totalEstimatedTime"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Total estimated time must be non-negative",
          "overrideable": false
        },
        {
          "name": "warnZeroItems",
          "code": "warnZeroItems",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "totalItems"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "PrepListItem",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "stationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "stationName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "ingredientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "ingredientName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "baseQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "baseUnit",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "scaledQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "scaledUnit",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "isOptional",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": false
          },
          "modifiers": []
        },
        {
          "name": "preparationNotes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "allergens",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "dietarySubstitutions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "dishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "dishName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "recipeVersionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "sortOrder",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "isCompleted",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": false
          },
          "modifiers": []
        },
        {
          "name": "completedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "completedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "hasAllergens",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "allergens"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "allergens"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasDietarySubstitutions",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "dietarySubstitutions"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "dietarySubstitutions"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isRequired",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "isOptional"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "boolean",
                "value": false
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [],
      "constraints": [
        {
          "name": "validPrepListId",
          "code": "validPrepListId",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "prepListId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "prepListId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Prep list ID is required",
          "overrideable": false
        },
        {
          "name": "validStationName",
          "code": "validStationName",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "stationName"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "stationName"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Station name is required",
          "overrideable": false
        },
        {
          "name": "validIngredientId",
          "code": "validIngredientId",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "ingredientId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "ingredientId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Ingredient ID is required",
          "overrideable": false
        },
        {
          "name": "validIngredientName",
          "code": "validIngredientName",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "ingredientName"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "ingredientName"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Ingredient name is required",
          "overrideable": false
        },
        {
          "name": "positiveSortOrder",
          "code": "positiveSortOrder",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "sortOrder"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Sort order must be non-negative",
          "overrideable": false
        },
        {
          "name": "positiveScaledQuantity",
          "code": "positiveScaledQuantity",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "scaledQuantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Scaled quantity must be non-negative",
          "overrideable": false
        },
        {
          "name": "warnMajorAllergen",
          "code": "warnMajorAllergen",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "allergens"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "or",
              "left": {
                "kind": "binary",
                "operator": "or",
                "left": {
                  "kind": "binary",
                  "operator": "or",
                  "left": {
                    "kind": "binary",
                    "operator": "or",
                    "left": {
                      "kind": "binary",
                      "operator": "contains",
                      "left": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "allergens"
                      },
                      "right": {
                        "kind": "literal",
                        "value": {
                          "kind": "string",
                          "value": "nuts"
                        }
                      }
                    },
                    "right": {
                      "kind": "binary",
                      "operator": "contains",
                      "left": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "allergens"
                      },
                      "right": {
                        "kind": "literal",
                        "value": {
                          "kind": "string",
                          "value": "dairy"
                        }
                      }
                    }
                  },
                  "right": {
                    "kind": "binary",
                    "operator": "contains",
                    "left": {
                      "kind": "member",
                      "object": {
                        "kind": "identifier",
                        "name": "self"
                      },
                      "property": "allergens"
                    },
                    "right": {
                      "kind": "literal",
                      "value": {
                        "kind": "string",
                        "value": "gluten"
                      }
                    }
                  }
                },
                "right": {
                  "kind": "binary",
                  "operator": "contains",
                  "left": {
                    "kind": "member",
                    "object": {
                      "kind": "identifier",
                      "name": "self"
                    },
                    "property": "allergens"
                  },
                  "right": {
                    "kind": "literal",
                    "value": {
                      "kind": "string",
                      "value": "shellfish"
                    }
                  }
                }
              },
              "right": {
                "kind": "binary",
                "operator": "contains",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "allergens"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "eggs"
                  }
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "PrepTask",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "taskType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "prep"
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "status",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "open"
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "stationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "claimedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "claimedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "quantityTotal",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "quantityCompleted",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "quantityUnitId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "servingsTotal",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "startByDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "dueByDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "priority",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 5
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "ingredients",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isClaimed",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "claimedBy"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isOverdue",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "and",
              "left": {
                "kind": "binary",
                "operator": "!=",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "dueByDate"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "number",
                    "value": 0
                  }
                }
              },
              "right": {
                "kind": "binary",
                "operator": ">",
                "left": {
                  "kind": "call",
                  "callee": {
                    "kind": "identifier",
                    "name": "now"
                  },
                  "args": []
                },
                "right": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "dueByDate"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "status"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "done"
                }
              }
            }
          },
          "dependencies": [
            "now"
          ]
        },
        {
          "name": "isCompleted",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "done"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "percentComplete",
          "type": {
            "name": "number",
            "nullable": false
          },
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityTotal"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "consequent": {
              "kind": "binary",
              "operator": "*",
              "left": {
                "kind": "binary",
                "operator": "/",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "quantityCompleted"
                },
                "right": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "quantityTotal"
                }
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 100
                }
              }
            },
            "alternate": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isUrgent",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "<=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "priority"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 2
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isHighPriority",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "<=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "priority"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 3
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [],
      "constraints": [
        {
          "name": "validStatus",
          "code": "validStatus",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "open"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "in_progress"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "done"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "canceled"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "message": "Invalid task status",
          "overrideable": false
        },
        {
          "name": "positiveQuantity",
          "code": "positiveQuantity",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityTotal"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Total quantity must be non-negative",
          "overrideable": false
        },
        {
          "name": "validPriority",
          "code": "validPriority",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "priority"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 1
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "<=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "priority"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 5
                }
              }
            }
          },
          "severity": "block",
          "message": "Priority must be between 1 (critical) and 5 (low)",
          "overrideable": false
        },
        {
          "name": "warnOverdue",
          "code": "warnOverdue",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "isOverdue"
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "status"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "done"
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "Recipe",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "cuisineType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "tags",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "isActive",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": true
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "hasVersion",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          },
          "dependencies": []
        },
        {
          "name": "tagCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "length"
            },
            "args": [
              {
                "kind": "call",
                "callee": {
                  "kind": "identifier",
                  "name": "split"
                },
                "args": [
                  {
                    "kind": "member",
                    "object": {
                      "kind": "identifier",
                      "name": "self"
                    },
                    "property": "tags"
                  },
                  {
                    "kind": "literal",
                    "value": {
                      "kind": "string",
                      "value": ","
                    }
                  }
                ]
              }
            ]
          },
          "dependencies": [
            "length",
            "split"
          ]
        }
      ],
      "relationships": [],
      "commands": [
        "update",
        "deactivate",
        "activate"
      ],
      "constraints": [
        {
          "name": "validName",
          "code": "validName",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "name"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "name"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Recipe name is required",
          "overrideable": false
        },
        {
          "name": "validTags",
          "code": "validTags",
          "expression": {
            "kind": "binary",
            "operator": "or",
            "left": {
              "kind": "binary",
              "operator": "or",
              "left": {
                "kind": "binary",
                "operator": "==",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "tags"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "null"
                  }
                }
              },
              "right": {
                "kind": "binary",
                "operator": "==",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "tags"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": ""
                  }
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "<=",
              "left": {
                "kind": "call",
                "callee": {
                  "kind": "identifier",
                  "name": "length"
                },
                "args": [
                  {
                    "kind": "call",
                    "callee": {
                      "kind": "identifier",
                      "name": "split"
                    },
                    "args": [
                      {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "tags"
                      },
                      {
                        "kind": "literal",
                        "value": {
                          "kind": "string",
                          "value": ","
                        }
                      }
                    ]
                  }
                ]
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 20
                }
              }
            }
          },
          "severity": "block",
          "message": "Recipe cannot have more than 20 tags",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "RecipeVersion",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "recipeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "versionNumber",
          "type": {
            "name": "number",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "cuisineType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "tags",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "yieldQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 1
          },
          "modifiers": []
        },
        {
          "name": "yieldUnitId",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 1
          },
          "modifiers": []
        },
        {
          "name": "yieldDescription",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "prepTimeMinutes",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "cookTimeMinutes",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "restTimeMinutes",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "difficultyLevel",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 1
          },
          "modifiers": []
        },
        {
          "name": "instructions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "ingredientCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "stepCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "totalTimeMinutes",
          "type": {
            "name": "number",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "+",
            "left": {
              "kind": "binary",
              "operator": "+",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "prepTimeMinutes"
              },
              "right": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "cookTimeMinutes"
              }
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "restTimeMinutes"
            }
          },
          "dependencies": []
        },
        {
          "name": "isVersion1",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "versionNumber"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 1
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isHighDifficulty",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "difficultyLevel"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 4
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [],
      "constraints": [
        {
          "name": "validVersionNumber",
          "code": "validVersionNumber",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "versionNumber"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Version number must be positive",
          "overrideable": false
        },
        {
          "name": "positiveYield",
          "code": "positiveYield",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "yieldQuantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Yield quantity must be positive",
          "overrideable": false
        },
        {
          "name": "validDifficulty",
          "code": "validDifficulty",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "difficultyLevel"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 1
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "<=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "difficultyLevel"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 5
                }
              }
            }
          },
          "severity": "block",
          "message": "Difficulty must be between 1 (easy) and 5 (expert)",
          "overrideable": false
        },
        {
          "name": "validTimes",
          "code": "validTimes",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "and",
              "left": {
                "kind": "binary",
                "operator": ">=",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "prepTimeMinutes"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "number",
                    "value": 0
                  }
                }
              },
              "right": {
                "kind": "binary",
                "operator": ">=",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "cookTimeMinutes"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "number",
                    "value": 0
                  }
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": ">=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "restTimeMinutes"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            }
          },
          "severity": "block",
          "message": "Time values must be non-negative",
          "overrideable": false
        },
        {
          "name": "warnLongRecipe",
          "code": "warnLongRecipe",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "totalTimeMinutes"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 480
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "Ingredient",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "defaultUnitId",
          "type": {
            "name": "number",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "allergens",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "isActive",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": true
          },
          "modifiers": []
        }
      ],
      "computedProperties": [],
      "relationships": [],
      "commands": [],
      "constraints": [
        {
          "name": "validName",
          "code": "validName",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "name"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "name"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Ingredient name is required",
          "overrideable": false
        },
        {
          "name": "warnMajorAllergen",
          "code": "warnMajorAllergen",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "allergens"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "or",
              "left": {
                "kind": "binary",
                "operator": "or",
                "left": {
                  "kind": "binary",
                  "operator": "contains",
                  "left": {
                    "kind": "member",
                    "object": {
                      "kind": "identifier",
                      "name": "self"
                    },
                    "property": "allergens"
                  },
                  "right": {
                    "kind": "literal",
                    "value": {
                      "kind": "string",
                      "value": "nuts"
                    }
                  }
                },
                "right": {
                  "kind": "binary",
                  "operator": "contains",
                  "left": {
                    "kind": "member",
                    "object": {
                      "kind": "identifier",
                      "name": "self"
                    },
                    "property": "allergens"
                  },
                  "right": {
                    "kind": "literal",
                    "value": {
                      "kind": "string",
                      "value": "dairy"
                    }
                  }
                }
              },
              "right": {
                "kind": "binary",
                "operator": "contains",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "allergens"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "gluten"
                  }
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "RecipeIngredient",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "recipeVersionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "ingredientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "unitId",
          "type": {
            "name": "number",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "sortOrder",
          "type": {
            "name": "number",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "preparationNotes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "isOptional",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": false
          },
          "modifiers": []
        }
      ],
      "computedProperties": [],
      "relationships": [],
      "commands": [
        "updateQuantity"
      ],
      "constraints": [
        {
          "name": "positiveQuantity",
          "code": "positiveQuantity",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Ingredient quantity must be positive",
          "overrideable": false
        },
        {
          "name": "validOrder",
          "code": "validOrder",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "sortOrder"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Sort order must be positive",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "Dish",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "recipeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "serviceStyle",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "presentationImageUrl",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "dietaryTags",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "allergens",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "pricePerPerson",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "costPerPerson",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "minPrepLeadDays",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 1
          },
          "modifiers": []
        },
        {
          "name": "maxPrepLeadDays",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 7
          },
          "modifiers": []
        },
        {
          "name": "portionSizeDescription",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "isActive",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": true
          },
          "modifiers": []
        }
      ],
      "computedProperties": [],
      "relationships": [],
      "commands": [],
      "constraints": [
        {
          "name": "validName",
          "code": "validName",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "name"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "name"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Dish name is required",
          "overrideable": false
        },
        {
          "name": "validLeadDays",
          "code": "validLeadDays",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "minPrepLeadDays"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": ">=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "maxPrepLeadDays"
              },
              "right": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "minPrepLeadDays"
              }
            }
          },
          "severity": "block",
          "message": "Lead days must be valid",
          "overrideable": false
        },
        {
          "name": "positivePrice",
          "code": "positivePrice",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "pricePerPerson"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Price must be non-negative",
          "overrideable": false
        },
        {
          "name": "positiveCost",
          "code": "positiveCost",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "costPerPerson"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "<=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "costPerPerson"
              },
              "right": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "pricePerPerson"
              }
            }
          },
          "severity": "block",
          "message": "Cost must be non-negative and not exceed price",
          "overrideable": false
        },
        {
          "name": "warnTightMargin",
          "code": "warnTightMargin",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "pricePerPerson"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "binary",
                "operator": "/",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "costPerPerson"
                },
                "right": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "pricePerPerson"
                }
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0.7
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "Station",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "stationType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "prep-station"
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "capacitySimultaneousTasks",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 1
          },
          "modifiers": []
        },
        {
          "name": "equipmentList",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "isActive",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": true
          },
          "modifiers": []
        },
        {
          "name": "currentTaskCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isAtCapacity",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "currentTaskCount"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "capacitySimultaneousTasks"
            }
          },
          "dependencies": []
        },
        {
          "name": "isOverCapacity",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "currentTaskCount"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "capacitySimultaneousTasks"
            }
          },
          "dependencies": []
        },
        {
          "name": "capacityRemaining",
          "type": {
            "name": "number",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "-",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "capacitySimultaneousTasks"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "currentTaskCount"
            }
          },
          "dependencies": []
        },
        {
          "name": "availablePercentage",
          "type": {
            "name": "number",
            "nullable": false
          },
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "capacitySimultaneousTasks"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "consequent": {
              "kind": "binary",
              "operator": "*",
              "left": {
                "kind": "binary",
                "operator": "/",
                "left": {
                  "kind": "binary",
                  "operator": "-",
                  "left": {
                    "kind": "member",
                    "object": {
                      "kind": "identifier",
                      "name": "self"
                    },
                    "property": "capacitySimultaneousTasks"
                  },
                  "right": {
                    "kind": "member",
                    "object": {
                      "kind": "identifier",
                      "name": "self"
                    },
                    "property": "currentTaskCount"
                  }
                },
                "right": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "capacitySimultaneousTasks"
                }
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 100
                }
              }
            },
            "alternate": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 100
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [],
      "constraints": [
        {
          "name": "positiveCapacity",
          "code": "positiveCapacity",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "capacitySimultaneousTasks"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Station capacity must be positive",
          "overrideable": false
        },
        {
          "name": "validStationType",
          "code": "validStationType",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "stationType"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "hot-line"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "cold-prep"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "bakery"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "garnish"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "prep-station"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "message": "Invalid station type",
          "overrideable": false
        },
        {
          "name": "warnNearCapacity",
          "code": "warnNearCapacity",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "capacityRemaining"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 1
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "capacitySimultaneousTasks"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 1
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "policies": []
    }
  ],
  "stores": [
    {
      "entity": "InventoryItem",
      "target": "PrismaInventoryItemStore",
      "config": {}
    },
    {
      "entity": "Menu",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "MenuDish",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "PrepList",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "PrepListItem",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "PrepTask",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "RecipeVersion",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "Ingredient",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "Dish",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "Recipe",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "RecipeIngredient",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "Station",
      "target": "PrismaStationStore",
      "config": {}
    }
  ],
  "events": [
    {
      "name": "InventoryReserved",
      "channel": "kitchen.inventory.reserved",
      "payload": [
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reservedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "InventoryConsumed",
      "channel": "kitchen.inventory.consumed",
      "payload": [
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "lotId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "consumedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "InventoryWasted",
      "channel": "kitchen.inventory.wasted",
      "payload": [
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "lotId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "wastedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "InventoryAdjusted",
      "channel": "kitchen.inventory.adjusted",
      "payload": [
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "adjustedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "InventoryRestocked",
      "channel": "kitchen.inventory.restocked",
      "payload": [
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "costPerUnit",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "restockedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "InventoryReservationReleased",
      "channel": "kitchen.inventory.reservation.released",
      "payload": [
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "releasedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "MenuCreated",
      "channel": "kitchen.menu.created",
      "payload": [
        {
          "name": "menuId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "MenuUpdated",
      "channel": "kitchen.menu.updated",
      "payload": [
        {
          "name": "menuId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "MenuDeactivated",
      "channel": "kitchen.menu.deactivated",
      "payload": [
        {
          "name": "menuId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "deactivatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "MenuActivated",
      "channel": "kitchen.menu.activated",
      "payload": [
        {
          "name": "menuId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "activatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "MenuDishAdded",
      "channel": "kitchen.menu.dish_added",
      "payload": [
        {
          "name": "menuId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "dishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "menuDishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "course",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "addedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "MenuDishRemoved",
      "channel": "kitchen.menu.dish_removed",
      "payload": [
        {
          "name": "menuId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "dishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "menuDishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "removedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "MenuDishUpdated",
      "channel": "kitchen.menu.dish_updated",
      "payload": [
        {
          "name": "menuId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "dishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "menuDishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "course",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "sortOrder",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "isOptional",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "MenuDishesReordered",
      "channel": "kitchen.menu.dishes_reordered",
      "payload": [
        {
          "name": "menuId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "dishIdsJson",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reorderedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepListCreated",
      "channel": "kitchen.preplist.created",
      "payload": [
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalItems",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "batchMultiplier",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepListUpdated",
      "channel": "kitchen.preplist.updated",
      "payload": [
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepListBatchMultiplierUpdated",
      "channel": "kitchen.preplist.batch_multiplier_updated",
      "payload": [
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldMultiplier",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newMultiplier",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepListFinalized",
      "channel": "kitchen.preplist.finalized",
      "payload": [
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalItems",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalEstimatedTime",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "finalizedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepListActivated",
      "channel": "kitchen.preplist.activated",
      "payload": [
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "activatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepListDeactivated",
      "channel": "kitchen.preplist.deactivated",
      "payload": [
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "deactivatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepListCompleted",
      "channel": "kitchen.preplist.completed",
      "payload": [
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "completedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepListCancelled",
      "channel": "kitchen.preplist.cancelled",
      "payload": [
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "cancelledAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepListItemCreated",
      "channel": "kitchen.preplist.item_created",
      "payload": [
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "ingredientName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "stationName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "scaledQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepListItemUpdated",
      "channel": "kitchen.preplist.item_updated",
      "payload": [
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "ingredientName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldScaledQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newScaledQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepListItemStationChanged",
      "channel": "kitchen.preplist.item_station_changed",
      "payload": [
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "ingredientName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldStationName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newStationName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "changedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepListItemNotesUpdated",
      "channel": "kitchen.preplist.item_notes_updated",
      "payload": [
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "ingredientName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepListItemCompleted",
      "channel": "kitchen.preplist.item_completed",
      "payload": [
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "ingredientName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "completedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "completedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepListItemUncompleted",
      "channel": "kitchen.preplist.item_uncompleted",
      "payload": [
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "ingredientName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "uncompletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskClaimed",
      "channel": "kitchen.preptask.claimed",
      "payload": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "stationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "claimedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskStarted",
      "channel": "kitchen.preptask.started",
      "payload": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "startedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskCompleted",
      "channel": "kitchen.preptask.completed",
      "payload": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantityCompleted",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "completedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskReleased",
      "channel": "kitchen.preptask.released",
      "payload": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "previousUserId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "releasedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskReassigned",
      "channel": "kitchen.preptask.reassigned",
      "payload": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "previousUserId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newUserId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reassignedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reassignedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskQuantityUpdated",
      "channel": "kitchen.preptask.quantity.updated",
      "payload": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldQuantityTotal",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newQuantityTotal",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantityCompleted",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskCanceled",
      "channel": "kitchen.preptask.canceled",
      "payload": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "canceledBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "canceledAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "RecipeCreated",
      "channel": "kitchen.recipe.created",
      "payload": [
        {
          "name": "recipeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "RecipeUpdated",
      "channel": "kitchen.recipe.updated",
      "payload": [
        {
          "name": "recipeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "RecipeDeactivated",
      "channel": "kitchen.recipe.deactivated",
      "payload": [
        {
          "name": "recipeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "deactivatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "RecipeActivated",
      "channel": "kitchen.recipe.activated",
      "payload": [
        {
          "name": "recipeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "activatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "RecipeVersionCreated",
      "channel": "kitchen.recipe.version.created",
      "payload": [
        {
          "name": "versionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "recipeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "versionNumber",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "yieldQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "RecipeVersionRestored",
      "channel": "kitchen.recipe.version.restored",
      "payload": [
        {
          "name": "newVersionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "sourceVersionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "recipeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "versionNumber",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "restoredAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "IngredientAllergensUpdated",
      "channel": "kitchen.ingredient.allergens.updated",
      "payload": [
        {
          "name": "ingredientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldAllergens",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newAllergens",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "RecipeIngredientUpdated",
      "channel": "kitchen.recipe.ingredient.updated",
      "payload": [
        {
          "name": "recipeIngredientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "recipeVersionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "ingredientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "DishCreated",
      "channel": "kitchen.dish.created",
      "payload": [
        {
          "name": "dishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "recipeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "DishPricingUpdated",
      "channel": "kitchen.dish.pricing.updated",
      "payload": [
        {
          "name": "dishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldPrice",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newPrice",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "DishLeadTimeUpdated",
      "channel": "kitchen.dish.leadtime.updated",
      "payload": [
        {
          "name": "dishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldMinDays",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newMinDays",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldMaxDays",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newMaxDays",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "StationTaskAssigned",
      "channel": "kitchen.station.task.assigned",
      "payload": [
        {
          "name": "stationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "stationName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "taskName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "currentTaskCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "capacity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "assignedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "StationTaskRemoved",
      "channel": "kitchen.station.task.removed",
      "payload": [
        {
          "name": "stationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "stationName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "currentTaskCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "removedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "StationCapacityUpdated",
      "channel": "kitchen.station.capacity.updated",
      "payload": [
        {
          "name": "stationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "stationName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldCapacity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newCapacity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "StationDeactivated",
      "channel": "kitchen.station.deactivated",
      "payload": [
        {
          "name": "stationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "stationName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "activeTaskCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "deactivatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "StationActivated",
      "channel": "kitchen.station.activated",
      "payload": [
        {
          "name": "stationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "stationName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "activatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "StationEquipmentUpdated",
      "channel": "kitchen.station.equipment.updated",
      "payload": [
        {
          "name": "stationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "stationName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "equipmentList",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    }
  ],
  "commands": [
    {
      "name": "reserve",
      "parameters": [
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnStockoutRisk",
          "code": "warnStockoutRisk",
          "expression": {
            "kind": "binary",
            "operator": "<",
            "left": {
              "kind": "binary",
              "operator": "-",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityAvailable"
              },
              "right": {
                "kind": "identifier",
                "name": "quantity"
              }
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        },
        {
          "name": "warnBelowParAfterReserve",
          "code": "warnBelowParAfterReserve",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "<",
              "left": {
                "kind": "binary",
                "operator": "-",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "quantityOnHand"
                },
                "right": {
                  "kind": "identifier",
                  "name": "quantity"
                }
              },
              "right": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "parLevel"
              }
            },
            "right": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "parLevel"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Reserving {quantity} {unit} - only {available} available"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "itemName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "requested",
                      "value": {
                        "kind": "identifier",
                        "name": "quantity"
                      }
                    },
                    {
                      "key": "available",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "quantityAvailable"
                      }
                    },
                    {
                      "key": "shortfall",
                      "value": {
                        "kind": "binary",
                        "operator": "-",
                        "left": {
                          "kind": "identifier",
                          "name": "quantity"
                        },
                        "right": {
                          "kind": "member",
                          "object": {
                            "kind": "identifier",
                            "name": "self"
                          },
                          "property": "quantityAvailable"
                        }
                      }
                    },
                    {
                      "key": "unit",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "baseUnit"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "After reservation, '{itemName}' will be below par level"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "itemName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "currentOnHand",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "quantityOnHand"
                      }
                    },
                    {
                      "key": "parLevel",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "parLevel"
                      }
                    },
                    {
                      "key": "newOnHand",
                      "value": {
                        "kind": "binary",
                        "operator": "-",
                        "left": {
                          "kind": "member",
                          "object": {
                            "kind": "identifier",
                            "name": "self"
                          },
                          "property": "quantityOnHand"
                        },
                        "right": {
                          "kind": "identifier",
                          "name": "quantity"
                        }
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "quantityReserved",
          "expression": {
            "kind": "binary",
            "operator": "+",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityReserved"
            },
            "right": {
              "kind": "identifier",
              "name": "quantity"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "InventoryReserved"
      ]
    },
    {
      "name": "consume",
      "parameters": [
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "lotId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "blockInsufficientStock",
          "code": "blockInsufficientStock",
          "expression": {
            "kind": "binary",
            "operator": "<",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityOnHand"
            },
            "right": {
              "kind": "identifier",
              "name": "quantity"
            }
          },
          "severity": "block",
          "overrideable": false
        },
        {
          "name": "warnBelowParAfterConsume",
          "code": "warnBelowParAfterConsume",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "<",
              "left": {
                "kind": "binary",
                "operator": "-",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "quantityOnHand"
                },
                "right": {
                  "kind": "identifier",
                  "name": "quantity"
                }
              },
              "right": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "parLevel"
              }
            },
            "right": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "parLevel"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        },
        {
          "name": "infoConsumed",
          "code": "infoConsumed",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityOnHand"
            },
            "right": {
              "kind": "identifier",
              "name": "quantity"
            }
          },
          "severity": "ok",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Cannot consume {quantity} {unit} - only {onHand} on hand"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "itemName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "requested",
                      "value": {
                        "kind": "identifier",
                        "name": "quantity"
                      }
                    },
                    {
                      "key": "onHand",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "quantityOnHand"
                      }
                    },
                    {
                      "key": "shortfall",
                      "value": {
                        "kind": "binary",
                        "operator": "-",
                        "left": {
                          "kind": "identifier",
                          "name": "quantity"
                        },
                        "right": {
                          "kind": "member",
                          "object": {
                            "kind": "identifier",
                            "name": "self"
                          },
                          "property": "quantityOnHand"
                        }
                      }
                    },
                    {
                      "key": "unit",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "baseUnit"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "After consumption, '{itemName}' will be below par - recommend reorder"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "itemName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "currentOnHand",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "quantityOnHand"
                      }
                    },
                    {
                      "key": "parLevel",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "parLevel"
                      }
                    },
                    {
                      "key": "newOnHand",
                      "value": {
                        "kind": "binary",
                        "operator": "-",
                        "left": {
                          "kind": "member",
                          "object": {
                            "kind": "identifier",
                            "name": "self"
                          },
                          "property": "quantityOnHand"
                        },
                        "right": {
                          "kind": "identifier",
                          "name": "quantity"
                        }
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Consuming {quantity} {unit} of '{itemName}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "itemName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "quantity",
                      "value": {
                        "kind": "identifier",
                        "name": "quantity"
                      }
                    },
                    {
                      "key": "unit",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "baseUnit"
                      }
                    },
                    {
                      "key": "lotId",
                      "value": {
                        "kind": "identifier",
                        "name": "lotId"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "quantityOnHand",
          "expression": {
            "kind": "binary",
            "operator": "-",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityOnHand"
            },
            "right": {
              "kind": "identifier",
              "name": "quantity"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "quantityReserved",
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityReserved"
              },
              "right": {
                "kind": "identifier",
                "name": "quantity"
              }
            },
            "consequent": {
              "kind": "binary",
              "operator": "-",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityReserved"
              },
              "right": {
                "kind": "identifier",
                "name": "quantity"
              }
            },
            "alternate": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "InventoryConsumed"
      ]
    },
    {
      "name": "waste",
      "parameters": [
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "lotId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "reason"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "reason"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "blockInsufficientForWaste",
          "code": "blockInsufficientForWaste",
          "expression": {
            "kind": "binary",
            "operator": "<",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityOnHand"
            },
            "right": {
              "kind": "identifier",
              "name": "quantity"
            }
          },
          "severity": "block",
          "overrideable": false
        },
        {
          "name": "warnHighWaste",
          "code": "warnHighWaste",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "identifier",
                "name": "quantity"
              },
              "right": {
                "kind": "binary",
                "operator": "*",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "quantityOnHand"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "number",
                    "value": 0.1
                  }
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityOnHand"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Cannot record waste of {quantity} {unit} - only {onHand} on hand"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "itemName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "requested",
                      "value": {
                        "kind": "identifier",
                        "name": "quantity"
                      }
                    },
                    {
                      "key": "onHand",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "quantityOnHand"
                      }
                    },
                    {
                      "key": "shortfall",
                      "value": {
                        "kind": "binary",
                        "operator": "-",
                        "left": {
                          "kind": "identifier",
                          "name": "quantity"
                        },
                        "right": {
                          "kind": "member",
                          "object": {
                            "kind": "identifier",
                            "name": "self"
                          },
                          "property": "quantityOnHand"
                        }
                      }
                    },
                    {
                      "key": "unit",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "baseUnit"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "High waste amount ({percentage}% of on-hand) for '{itemName}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "itemName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "quantity",
                      "value": {
                        "kind": "identifier",
                        "name": "quantity"
                      }
                    },
                    {
                      "key": "onHand",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "quantityOnHand"
                      }
                    },
                    {
                      "key": "percentage",
                      "value": {
                        "kind": "binary",
                        "operator": "*",
                        "left": {
                          "kind": "binary",
                          "operator": "/",
                          "left": {
                            "kind": "identifier",
                            "name": "quantity"
                          },
                          "right": {
                            "kind": "member",
                            "object": {
                              "kind": "identifier",
                              "name": "self"
                            },
                            "property": "quantityOnHand"
                          }
                        },
                        "right": {
                          "kind": "literal",
                          "value": {
                            "kind": "number",
                            "value": 100
                          }
                        }
                      }
                    },
                    {
                      "key": "reason",
                      "value": {
                        "kind": "identifier",
                        "name": "reason"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "quantityOnHand",
          "expression": {
            "kind": "binary",
            "operator": "-",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityOnHand"
            },
            "right": {
              "kind": "identifier",
              "name": "quantity"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "quantityReserved",
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityReserved"
              },
              "right": {
                "kind": "identifier",
                "name": "quantity"
              }
            },
            "consequent": {
              "kind": "binary",
              "operator": "-",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityReserved"
              },
              "right": {
                "kind": "identifier",
                "name": "quantity"
              }
            },
            "alternate": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "InventoryWasted"
      ]
    },
    {
      "name": "adjust",
      "parameters": [
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "reason"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "reason"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnLargeNegativeAdjustment",
          "code": "warnLargeNegativeAdjustment",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "<",
              "left": {
                "kind": "identifier",
                "name": "quantity"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "<",
              "left": {
                "kind": "identifier",
                "name": "quantity"
              },
              "right": {
                "kind": "binary",
                "operator": "*",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "quantityOnHand"
                },
                "right": {
                  "kind": "unary",
                  "operator": "-",
                  "operand": {
                    "kind": "literal",
                    "value": {
                      "kind": "number",
                      "value": 0.5
                    }
                  }
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Large negative adjustment ({adjustment}) for '{itemName}' - requires verification"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "itemName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "adjustment",
                      "value": {
                        "kind": "identifier",
                        "name": "quantity"
                      }
                    },
                    {
                      "key": "currentOnHand",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "quantityOnHand"
                      }
                    },
                    {
                      "key": "newOnHand",
                      "value": {
                        "kind": "binary",
                        "operator": "+",
                        "left": {
                          "kind": "member",
                          "object": {
                            "kind": "identifier",
                            "name": "self"
                          },
                          "property": "quantityOnHand"
                        },
                        "right": {
                          "kind": "identifier",
                          "name": "quantity"
                        }
                      }
                    },
                    {
                      "key": "reason",
                      "value": {
                        "kind": "identifier",
                        "name": "reason"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "quantityOnHand",
          "expression": {
            "kind": "binary",
            "operator": "+",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityOnHand"
            },
            "right": {
              "kind": "identifier",
              "name": "quantity"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "InventoryAdjusted"
      ]
    },
    {
      "name": "restock",
      "parameters": [
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "costPerUnit",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "costPerUnit"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "identifier",
              "name": "costPerUnit"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "infoRestocked",
          "code": "infoRestocked",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "ok",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Restocked {quantity} {unit} of '{itemName}' at ${unitCost} per {unit}"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "itemName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "quantity",
                      "value": {
                        "kind": "identifier",
                        "name": "quantity"
                      }
                    },
                    {
                      "key": "unit",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "baseUnit"
                      }
                    },
                    {
                      "key": "unitCost",
                      "value": {
                        "kind": "identifier",
                        "name": "costPerUnit"
                      }
                    },
                    {
                      "key": "totalCost",
                      "value": {
                        "kind": "binary",
                        "operator": "*",
                        "left": {
                          "kind": "identifier",
                          "name": "quantity"
                        },
                        "right": {
                          "kind": "identifier",
                          "name": "costPerUnit"
                        }
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "quantityOnHand",
          "expression": {
            "kind": "binary",
            "operator": "+",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityOnHand"
            },
            "right": {
              "kind": "identifier",
              "name": "quantity"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "costPerUnit",
          "expression": {
            "kind": "identifier",
            "name": "costPerUnit"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "InventoryRestocked"
      ]
    },
    {
      "name": "releaseReservation",
      "parameters": [
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnReleaseExceedsReserved",
          "code": "warnReleaseExceedsReserved",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityReserved"
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Releasing more ({quantity}) than reserved ({reserved}) - adjusting to reserved amount"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "itemName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "requestedRelease",
                      "value": {
                        "kind": "identifier",
                        "name": "quantity"
                      }
                    },
                    {
                      "key": "reserved",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "quantityReserved"
                      }
                    },
                    {
                      "key": "adjusted",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "quantityReserved"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "quantityReserved",
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityReserved"
              },
              "right": {
                "kind": "identifier",
                "name": "quantity"
              }
            },
            "consequent": {
              "kind": "binary",
              "operator": "-",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityReserved"
              },
              "right": {
                "kind": "identifier",
                "name": "quantity"
              }
            },
            "alternate": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "InventoryReservationReleased"
      ]
    },
    {
      "name": "update",
      "parameters": [
        {
          "name": "newName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newDescription",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newCategory",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newBasePrice",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newPricePerPerson",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newMinGuests",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newMaxGuests",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newIsActive",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnPriceDecrease",
          "code": "warnPriceDecrease",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "identifier",
                "name": "newPricePerPerson"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "<",
              "left": {
                "kind": "identifier",
                "name": "newPricePerPerson"
              },
              "right": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "pricePerPerson"
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        },
        {
          "name": "warnGuestRangeIncrease",
          "code": "warnGuestRangeIncrease",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "identifier",
                "name": "newMaxGuests"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "identifier",
                "name": "newMaxGuests"
              },
              "right": {
                "kind": "binary",
                "operator": "*",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "maxGuests"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "number",
                    "value": 1.5
                  }
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Menu name is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Menu price per person decreased from {oldPrice} to {newPrice}"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "oldPrice",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "pricePerPerson"
                      }
                    },
                    {
                      "key": "newPrice",
                      "value": {
                        "kind": "identifier",
                        "name": "newPricePerPerson"
                      }
                    },
                    {
                      "key": "decreaseAmount",
                      "value": {
                        "kind": "binary",
                        "operator": "-",
                        "left": {
                          "kind": "member",
                          "object": {
                            "kind": "identifier",
                            "name": "self"
                          },
                          "property": "pricePerPerson"
                        },
                        "right": {
                          "kind": "identifier",
                          "name": "newPricePerPerson"
                        }
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Maximum guest count increased by 50% or more"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "oldMaxGuests",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "maxGuests"
                      }
                    },
                    {
                      "key": "newMaxGuests",
                      "value": {
                        "kind": "identifier",
                        "name": "newMaxGuests"
                      }
                    },
                    {
                      "key": "increasePercent",
                      "value": {
                        "kind": "binary",
                        "operator": "*",
                        "left": {
                          "kind": "binary",
                          "operator": "/",
                          "left": {
                            "kind": "binary",
                            "operator": "-",
                            "left": {
                              "kind": "identifier",
                              "name": "newMaxGuests"
                            },
                            "right": {
                              "kind": "member",
                              "object": {
                                "kind": "identifier",
                                "name": "self"
                              },
                              "property": "maxGuests"
                            }
                          },
                          "right": {
                            "kind": "member",
                            "object": {
                              "kind": "identifier",
                              "name": "self"
                            },
                            "property": "maxGuests"
                          }
                        },
                        "right": {
                          "kind": "literal",
                          "value": {
                            "kind": "number",
                            "value": 100
                          }
                        }
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "name",
          "expression": {
            "kind": "identifier",
            "name": "newName"
          }
        },
        {
          "kind": "mutate",
          "target": "description",
          "expression": {
            "kind": "identifier",
            "name": "newDescription"
          }
        },
        {
          "kind": "mutate",
          "target": "category",
          "expression": {
            "kind": "identifier",
            "name": "newCategory"
          }
        },
        {
          "kind": "mutate",
          "target": "basePrice",
          "expression": {
            "kind": "identifier",
            "name": "newBasePrice"
          }
        },
        {
          "kind": "mutate",
          "target": "pricePerPerson",
          "expression": {
            "kind": "identifier",
            "name": "newPricePerPerson"
          }
        },
        {
          "kind": "mutate",
          "target": "minGuests",
          "expression": {
            "kind": "identifier",
            "name": "newMinGuests"
          }
        },
        {
          "kind": "mutate",
          "target": "maxGuests",
          "expression": {
            "kind": "identifier",
            "name": "newMaxGuests"
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "identifier",
            "name": "newIsActive"
          }
        }
      ],
      "emits": [
        "MenuUpdated"
      ]
    },
    {
      "name": "activate",
      "parameters": [],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isActive"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Menu is already active"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        }
      ],
      "emits": [
        "MenuActivated"
      ]
    },
    {
      "name": "deactivate",
      "parameters": [],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isActive"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Menu is already inactive"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        }
      ],
      "emits": [
        "MenuDeactivated"
      ]
    },
    {
      "name": "updateCourse",
      "entity": "MenuDish",
      "parameters": [
        {
          "name": "newCourse",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newSortOrder",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newIsOptional",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "course",
          "expression": {
            "kind": "identifier",
            "name": "newCourse"
          }
        },
        {
          "kind": "mutate",
          "target": "sortOrder",
          "expression": {
            "kind": "identifier",
            "name": "newSortOrder"
          }
        },
        {
          "kind": "mutate",
          "target": "isOptional",
          "expression": {
            "kind": "identifier",
            "name": "newIsOptional"
          }
        }
      ],
      "emits": [
        "MenuDishUpdated"
      ]
    },
    {
      "name": "update",
      "parameters": [
        {
          "name": "newName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newDietaryRestrictions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newNotes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "draft"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnNameChange",
          "code": "warnNameChange",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "name"
            },
            "right": {
              "kind": "identifier",
              "name": "newName"
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only update draft prep lists"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Prep list name is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Renaming prep list from '{oldName}' to '{newName}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "oldName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "newName",
                      "value": {
                        "kind": "identifier",
                        "name": "newName"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "name",
          "expression": {
            "kind": "identifier",
            "name": "newName"
          }
        },
        {
          "kind": "mutate",
          "target": "dietaryRestrictions",
          "expression": {
            "kind": "identifier",
            "name": "newDietaryRestrictions"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "newNotes"
          }
        }
      ],
      "emits": [
        "PrepListUpdated"
      ]
    },
    {
      "name": "updateBatchMultiplier",
      "parameters": [
        {
          "name": "newMultiplier",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "draft"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newMultiplier"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "newMultiplier"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnLargeMultiplierIncrease",
          "code": "warnLargeMultiplierIncrease",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "newMultiplier"
            },
            "right": {
              "kind": "binary",
              "operator": "*",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "batchMultiplier"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 2
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only update draft prep lists"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Batch multiplier must be positive"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Batch multiplier doubled or more (from {oldMultiplier}x to {newMultiplier}x)"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "oldMultiplier",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "batchMultiplier"
                      }
                    },
                    {
                      "key": "newMultiplier",
                      "value": {
                        "kind": "identifier",
                        "name": "newMultiplier"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "batchMultiplier",
          "expression": {
            "kind": "identifier",
            "name": "newMultiplier"
          }
        }
      ],
      "emits": [
        "PrepListBatchMultiplierUpdated"
      ]
    },
    {
      "name": "finalize",
      "parameters": [],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "draft"
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "totalItems"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only finalize draft prep lists"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot finalize prep list with no items"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "finalized"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "finalizedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepListFinalized"
      ]
    },
    {
      "name": "activate",
      "parameters": [],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isActive"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Prep list is already active"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        }
      ],
      "emits": [
        "PrepListActivated"
      ]
    },
    {
      "name": "deactivate",
      "parameters": [],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isActive"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Prep list is already inactive"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        }
      ],
      "emits": [
        "PrepListDeactivated"
      ]
    },
    {
      "name": "markCompleted",
      "parameters": [],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "finalized"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only mark finalized prep lists as completed"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "completed"
            }
          }
        }
      ],
      "emits": [
        "PrepListCompleted"
      ]
    },
    {
      "name": "cancel",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "completed"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot cancel completed prep lists"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "cancelled"
            }
          }
        }
      ],
      "emits": [
        "PrepListCancelled"
      ]
    },
    {
      "name": "updateQuantity",
      "parameters": [
        {
          "name": "newBaseQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newScaledQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newBaseUnit",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newScaledUnit",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newBaseQuantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "identifier",
              "name": "newBaseQuantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newScaledQuantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "identifier",
              "name": "newScaledQuantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnQuantityIncrease",
          "code": "warnQuantityIncrease",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "newScaledQuantity"
            },
            "right": {
              "kind": "binary",
              "operator": "*",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "scaledQuantity"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 1.5
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Base quantity must be non-negative"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Scaled quantity must be non-negative"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Quantity increased by 50% or more"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "oldScaledQuantity",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "scaledQuantity"
                      }
                    },
                    {
                      "key": "newScaledQuantity",
                      "value": {
                        "kind": "identifier",
                        "name": "newScaledQuantity"
                      }
                    },
                    {
                      "key": "increasePercent",
                      "value": {
                        "kind": "binary",
                        "operator": "*",
                        "left": {
                          "kind": "binary",
                          "operator": "/",
                          "left": {
                            "kind": "binary",
                            "operator": "-",
                            "left": {
                              "kind": "identifier",
                              "name": "newScaledQuantity"
                            },
                            "right": {
                              "kind": "member",
                              "object": {
                                "kind": "identifier",
                                "name": "self"
                              },
                              "property": "scaledQuantity"
                            }
                          },
                          "right": {
                            "kind": "member",
                            "object": {
                              "kind": "identifier",
                              "name": "self"
                            },
                            "property": "scaledQuantity"
                          }
                        },
                        "right": {
                          "kind": "literal",
                          "value": {
                            "kind": "number",
                            "value": 100
                          }
                        }
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "baseQuantity",
          "expression": {
            "kind": "identifier",
            "name": "newBaseQuantity"
          }
        },
        {
          "kind": "mutate",
          "target": "scaledQuantity",
          "expression": {
            "kind": "identifier",
            "name": "newScaledQuantity"
          }
        },
        {
          "kind": "mutate",
          "target": "baseUnit",
          "expression": {
            "kind": "identifier",
            "name": "newBaseUnit"
          }
        },
        {
          "kind": "mutate",
          "target": "scaledUnit",
          "expression": {
            "kind": "identifier",
            "name": "newScaledUnit"
          }
        }
      ],
      "emits": [
        "PrepListItemUpdated"
      ]
    },
    {
      "name": "updateStation",
      "parameters": [
        {
          "name": "newStationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newStationName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newStationId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newStationId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newStationName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newStationName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnStationChange",
          "code": "warnStationChange",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "stationId"
            },
            "right": {
              "kind": "identifier",
              "name": "newStationId"
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Station ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Station name is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Reassigning from '{oldStation}' to '{newStation}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "oldStationName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "stationName"
                      }
                    },
                    {
                      "key": "newStationName",
                      "value": {
                        "kind": "identifier",
                        "name": "newStationName"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "stationId",
          "expression": {
            "kind": "identifier",
            "name": "newStationId"
          }
        },
        {
          "kind": "mutate",
          "target": "stationName",
          "expression": {
            "kind": "identifier",
            "name": "newStationName"
          }
        }
      ],
      "emits": [
        "PrepListItemStationChanged"
      ]
    },
    {
      "name": "updatePrepNotes",
      "parameters": [
        {
          "name": "newNotes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newDietarySubstitutions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "preparationNotes",
          "expression": {
            "kind": "identifier",
            "name": "newNotes"
          }
        },
        {
          "kind": "mutate",
          "target": "dietarySubstitutions",
          "expression": {
            "kind": "identifier",
            "name": "newDietarySubstitutions"
          }
        }
      ],
      "emits": [
        "PrepListItemNotesUpdated"
      ]
    },
    {
      "name": "markCompleted",
      "parameters": [
        {
          "name": "completedByUserId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isCompleted"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "completedByUserId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "completedByUserId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Item is already completed"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "User ID is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "isCompleted",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        },
        {
          "kind": "mutate",
          "target": "completedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "completedBy",
          "expression": {
            "kind": "identifier",
            "name": "completedByUserId"
          }
        }
      ],
      "emits": [
        "PrepListItemCompleted"
      ]
    },
    {
      "name": "markUncompleted",
      "parameters": [],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isCompleted"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Item is not completed"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "isCompleted",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        },
        {
          "kind": "mutate",
          "target": "completedAt",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "completedBy",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": ""
            }
          }
        }
      ],
      "emits": [
        "PrepListItemUncompleted"
      ]
    },
    {
      "name": "claim",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "stationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "or",
          "left": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "open"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "pending"
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnOverdueClaim",
          "code": "warnOverdueClaim",
          "expression": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isOverdue"
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Claiming overdue task '{taskName}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "taskName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "dueDate",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "dueByDate"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "in_progress"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "claimedBy",
          "expression": {
            "kind": "identifier",
            "name": "userId"
          }
        },
        {
          "kind": "mutate",
          "target": "claimedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "stationId",
          "expression": {
            "kind": "identifier",
            "name": "stationId"
          }
        }
      ],
      "emits": [
        "PrepTaskClaimed"
      ]
    },
    {
      "name": "start",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "or",
          "left": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "open"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "pending"
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "or",
          "left": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "claimedBy"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "claimedBy"
            },
            "right": {
              "kind": "identifier",
              "name": "userId"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "in_progress"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "claimedBy",
          "expression": {
            "kind": "identifier",
            "name": "userId"
          }
        },
        {
          "kind": "mutate",
          "target": "claimedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepTaskStarted"
      ]
    },
    {
      "name": "complete",
      "parameters": [
        {
          "name": "quantityCompleted",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "quantityCompleted"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "identifier",
              "name": "quantityCompleted"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "in_progress"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "or",
          "left": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "claimedBy"
            },
            "right": {
              "kind": "identifier",
              "name": "userId"
            }
          },
          "right": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnIncomplete",
          "code": "warnIncomplete",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "<",
              "left": {
                "kind": "identifier",
                "name": "quantityCompleted"
              },
              "right": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityTotal"
              }
            },
            "right": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityTotal"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Completing with {remaining} {unit} remaining"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "quantityTotal",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "quantityTotal"
                      }
                    },
                    {
                      "key": "quantityCompleted",
                      "value": {
                        "kind": "identifier",
                        "name": "quantityCompleted"
                      }
                    },
                    {
                      "key": "remaining",
                      "value": {
                        "kind": "binary",
                        "operator": "-",
                        "left": {
                          "kind": "member",
                          "object": {
                            "kind": "identifier",
                            "name": "self"
                          },
                          "property": "quantityTotal"
                        },
                        "right": {
                          "kind": "identifier",
                          "name": "quantityCompleted"
                        }
                      }
                    },
                    {
                      "key": "unit",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "quantityUnitId"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "done"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "quantityCompleted",
          "expression": {
            "kind": "identifier",
            "name": "quantityCompleted"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepTaskCompleted"
      ]
    },
    {
      "name": "release",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "in_progress"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "open"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "claimedBy",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": ""
            }
          }
        },
        {
          "kind": "mutate",
          "target": "claimedAt",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "stationId",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": ""
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepTaskReleased"
      ]
    },
    {
      "name": "reassign",
      "parameters": [
        {
          "name": "newUserId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "requestedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newUserId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newUserId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "requestedBy"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "requestedBy"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "in",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "array",
            "elements": [
              {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "open"
                }
              },
              {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "in_progress"
                }
              }
            ]
          }
        }
      ],
      "constraints": [
        {
          "name": "warnReassignInProgress",
          "code": "warnReassignInProgress",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "status"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "in_progress"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "claimedBy"
              },
              "right": {
                "kind": "identifier",
                "name": "newUserId"
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Reassigning in-progress task from '{currentAssignee}' to '{newAssignee}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "currentAssignee",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "claimedBy"
                      }
                    },
                    {
                      "key": "newAssignee",
                      "value": {
                        "kind": "identifier",
                        "name": "newUserId"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "claimedBy",
          "expression": {
            "kind": "identifier",
            "name": "newUserId"
          }
        },
        {
          "kind": "mutate",
          "target": "claimedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepTaskReassigned"
      ]
    },
    {
      "name": "updateQuantity",
      "parameters": [
        {
          "name": "quantityTotal",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantityCompleted",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "quantityTotal"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "identifier",
              "name": "quantityTotal"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "quantityCompleted"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "identifier",
              "name": "quantityCompleted"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "<=",
          "left": {
            "kind": "identifier",
            "name": "quantityCompleted"
          },
          "right": {
            "kind": "identifier",
            "name": "quantityTotal"
          }
        }
      ],
      "constraints": [
        {
          "name": "warnQuantityDecrease",
          "code": "warnQuantityDecrease",
          "expression": {
            "kind": "binary",
            "operator": "<",
            "left": {
              "kind": "identifier",
              "name": "quantityTotal"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityTotal"
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Decreasing total quantity from {oldTotal} to {newTotal}"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "oldTotal",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "quantityTotal"
                      }
                    },
                    {
                      "key": "newTotal",
                      "value": {
                        "kind": "identifier",
                        "name": "quantityTotal"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "quantityTotal",
          "expression": {
            "kind": "identifier",
            "name": "quantityTotal"
          }
        },
        {
          "kind": "mutate",
          "target": "quantityCompleted",
          "expression": {
            "kind": "identifier",
            "name": "quantityCompleted"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepTaskQuantityUpdated"
      ]
    },
    {
      "name": "cancel",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "canceledBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "done"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "canceled"
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnCancelInProgress",
          "code": "warnCancelInProgress",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "in_progress"
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Canceling in-progress task claimed by '{claimedBy}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "claimedBy",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "claimedBy"
                      }
                    },
                    {
                      "key": "reason",
                      "value": {
                        "kind": "identifier",
                        "name": "reason"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "canceled"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepTaskCanceled"
      ]
    },
    {
      "name": "create",
      "parameters": [
        {
          "name": "yieldQty",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "yieldUnit",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "prepTime",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "cookTime",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "restTime",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "difficulty",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "instructionsText",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notesText",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "yieldQty"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "yieldQty"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "yieldUnit"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "yieldUnit"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Yield quantity must be positive"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Yield unit is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "yieldQuantity",
          "expression": {
            "kind": "identifier",
            "name": "yieldQty"
          }
        },
        {
          "kind": "mutate",
          "target": "yieldUnitId",
          "expression": {
            "kind": "identifier",
            "name": "yieldUnit"
          }
        },
        {
          "kind": "mutate",
          "target": "prepTimeMinutes",
          "expression": {
            "kind": "identifier",
            "name": "prepTime"
          }
        },
        {
          "kind": "mutate",
          "target": "cookTimeMinutes",
          "expression": {
            "kind": "identifier",
            "name": "cookTime"
          }
        },
        {
          "kind": "mutate",
          "target": "restTimeMinutes",
          "expression": {
            "kind": "identifier",
            "name": "restTime"
          }
        },
        {
          "kind": "mutate",
          "target": "difficultyLevel",
          "expression": {
            "kind": "identifier",
            "name": "difficulty"
          }
        },
        {
          "kind": "mutate",
          "target": "instructions",
          "expression": {
            "kind": "identifier",
            "name": "instructionsText"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notesText"
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "RecipeVersionCreated"
      ]
    },
    {
      "name": "updateAllergens",
      "parameters": [
        {
          "name": "newAllergens",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "allergens",
          "expression": {
            "kind": "identifier",
            "name": "newAllergens"
          }
        }
      ],
      "emits": [
        "IngredientAllergensUpdated"
      ]
    },
    {
      "name": "updatePricing",
      "parameters": [
        {
          "name": "newPrice",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newPrice"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "identifier",
              "name": "newPrice"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newCost"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "identifier",
              "name": "newCost"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnPriceDecrease",
          "code": "warnPriceDecrease",
          "expression": {
            "kind": "binary",
            "operator": "<",
            "left": {
              "kind": "identifier",
              "name": "newPrice"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "pricePerPerson"
            }
          },
          "severity": "warn",
          "overrideable": false
        },
        {
          "name": "warnMarginBelowThreshold",
          "code": "warnMarginBelowThreshold",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "identifier",
                "name": "newPrice"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "binary",
                "operator": "/",
                "left": {
                  "kind": "identifier",
                  "name": "newCost"
                },
                "right": {
                  "kind": "identifier",
                  "name": "newPrice"
                }
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0.75
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Price must be non-negative"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cost must be non-negative"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Price decreased from {oldPrice} to {newPrice}"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "oldPrice",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "pricePerPerson"
                      }
                    },
                    {
                      "key": "newPrice",
                      "value": {
                        "kind": "identifier",
                        "name": "newPrice"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "New pricing has low profit margin ({marginPercent}% cost)"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "costPerPerson",
                      "value": {
                        "kind": "identifier",
                        "name": "newCost"
                      }
                    },
                    {
                      "key": "pricePerPerson",
                      "value": {
                        "kind": "identifier",
                        "name": "newPrice"
                      }
                    },
                    {
                      "key": "marginPercent",
                      "value": {
                        "kind": "binary",
                        "operator": "*",
                        "left": {
                          "kind": "binary",
                          "operator": "/",
                          "left": {
                            "kind": "identifier",
                            "name": "newCost"
                          },
                          "right": {
                            "kind": "identifier",
                            "name": "newPrice"
                          }
                        },
                        "right": {
                          "kind": "literal",
                          "value": {
                            "kind": "number",
                            "value": 100
                          }
                        }
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "pricePerPerson",
          "expression": {
            "kind": "identifier",
            "name": "newPrice"
          }
        },
        {
          "kind": "mutate",
          "target": "costPerPerson",
          "expression": {
            "kind": "identifier",
            "name": "newCost"
          }
        }
      ],
      "emits": [
        "DishPricingUpdated"
      ]
    },
    {
      "name": "updateLeadTime",
      "parameters": [
        {
          "name": "minDays",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "maxDays",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "minDays"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "identifier",
              "name": "minDays"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "maxDays"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "identifier",
              "name": "maxDays"
            },
            "right": {
              "kind": "identifier",
              "name": "minDays"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Minimum lead days must be non-negative"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Maximum lead days must be >= minimum"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "minPrepLeadDays",
          "expression": {
            "kind": "identifier",
            "name": "minDays"
          }
        },
        {
          "kind": "mutate",
          "target": "maxPrepLeadDays",
          "expression": {
            "kind": "identifier",
            "name": "maxDays"
          }
        }
      ],
      "emits": [
        "DishLeadTimeUpdated"
      ]
    },
    {
      "name": "update",
      "entity": "Recipe",
      "parameters": [
        {
          "name": "newName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newCategory",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newCuisineType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newDescription",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newTags",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnNameChange",
          "code": "warnNameChange",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "name"
            },
            "right": {
              "kind": "identifier",
              "name": "newName"
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Recipe name is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Renaming recipe from '{oldName}' to '{newName}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "oldName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "newName",
                      "value": {
                        "kind": "identifier",
                        "name": "newName"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "name",
          "expression": {
            "kind": "identifier",
            "name": "newName"
          }
        },
        {
          "kind": "mutate",
          "target": "category",
          "expression": {
            "kind": "identifier",
            "name": "newCategory"
          }
        },
        {
          "kind": "mutate",
          "target": "cuisineType",
          "expression": {
            "kind": "identifier",
            "name": "newCuisineType"
          }
        },
        {
          "kind": "mutate",
          "target": "description",
          "expression": {
            "kind": "identifier",
            "name": "newDescription"
          }
        },
        {
          "kind": "mutate",
          "target": "tags",
          "expression": {
            "kind": "identifier",
            "name": "newTags"
          }
        }
      ],
      "emits": [
        "RecipeUpdated"
      ]
    },
    {
      "name": "deactivate",
      "entity": "Recipe",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isActive"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Recipe is already inactive"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        }
      ],
      "emits": [
        "RecipeDeactivated"
      ]
    },
    {
      "name": "activate",
      "entity": "Recipe",
      "parameters": [],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isActive"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Recipe is already active"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        }
      ],
      "emits": [
        "RecipeActivated"
      ]
    },
    {
      "name": "updateQuantity",
      "entity": "RecipeIngredient",
      "parameters": [
        {
          "name": "newQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newUnit",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newQuantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "newQuantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnQuantityIncrease",
          "code": "warnQuantityIncrease",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "newQuantity"
            },
            "right": {
              "kind": "binary",
              "operator": "*",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantity"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 1.5
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Quantity must be positive"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Ingredient quantity increased by 50% or more"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "oldQuantity",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "quantity"
                      }
                    },
                    {
                      "key": "newQuantity",
                      "value": {
                        "kind": "identifier",
                        "name": "newQuantity"
                      }
                    },
                    {
                      "key": "increasePercent",
                      "value": {
                        "kind": "binary",
                        "operator": "*",
                        "left": {
                          "kind": "binary",
                          "operator": "/",
                          "left": {
                            "kind": "binary",
                            "operator": "-",
                            "left": {
                              "kind": "identifier",
                              "name": "newQuantity"
                            },
                            "right": {
                              "kind": "member",
                              "object": {
                                "kind": "identifier",
                                "name": "self"
                              },
                              "property": "quantity"
                            }
                          },
                          "right": {
                            "kind": "member",
                            "object": {
                              "kind": "identifier",
                              "name": "self"
                            },
                            "property": "quantity"
                          }
                        },
                        "right": {
                          "kind": "literal",
                          "value": {
                            "kind": "number",
                            "value": 100
                          }
                        }
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "quantity",
          "expression": {
            "kind": "identifier",
            "name": "newQuantity"
          }
        },
        {
          "kind": "mutate",
          "target": "unitId",
          "expression": {
            "kind": "identifier",
            "name": "newUnit"
          }
        }
      ],
      "emits": [
        "RecipeIngredientUpdated"
      ]
    },
    {
      "name": "assignTask",
      "parameters": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "taskName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "taskId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "taskId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "taskName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "taskName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnNearCapacity",
          "code": "warnNearCapacity",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "capacityRemaining"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 1
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        },
        {
          "name": "blockFull",
          "code": "blockFull",
          "expression": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isAtCapacity"
          },
          "severity": "block",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Assigning task '{taskName}' to near-capacity station '{stationName}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "stationName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "taskName",
                      "value": {
                        "kind": "identifier",
                        "name": "taskName"
                      }
                    },
                    {
                      "key": "current",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "currentTaskCount"
                      }
                    },
                    {
                      "key": "max",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "capacitySimultaneousTasks"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Cannot assign task - station '{stationName}' is at full capacity"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "stationName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "current",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "currentTaskCount"
                      }
                    },
                    {
                      "key": "max",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "capacitySimultaneousTasks"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "currentTaskCount",
          "expression": {
            "kind": "binary",
            "operator": "+",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "currentTaskCount"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 1
              }
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "StationTaskAssigned"
      ]
    },
    {
      "name": "removeTask",
      "parameters": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "taskName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "taskId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "taskId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnNoTasks",
          "code": "warnNoTasks",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "currentTaskCount"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Removing task from empty station '{stationName}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "stationName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "currentTaskCount",
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "currentTaskCount"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "consequent": {
              "kind": "binary",
              "operator": "-",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "currentTaskCount"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 1
                }
              }
            },
            "alternate": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "StationTaskRemoved"
      ]
    },
    {
      "name": "updateCapacity",
      "parameters": [
        {
          "name": "newCapacity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newCapacity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "newCapacity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnCapacityReduction",
          "code": "warnCapacityReduction",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "<",
              "left": {
                "kind": "identifier",
                "name": "newCapacity"
              },
              "right": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "capacitySimultaneousTasks"
              }
            },
            "right": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "currentTaskCount"
              },
              "right": {
                "kind": "identifier",
                "name": "newCapacity"
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Reducing capacity from {oldMax} to {newMax} with {current} active tasks"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "stationName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "oldMax",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "capacitySimultaneousTasks"
                      }
                    },
                    {
                      "key": "newMax",
                      "value": {
                        "kind": "identifier",
                        "name": "newCapacity"
                      }
                    },
                    {
                      "key": "current",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "currentTaskCount"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "capacitySimultaneousTasks",
          "expression": {
            "kind": "identifier",
            "name": "newCapacity"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "StationCapacityUpdated"
      ]
    },
    {
      "name": "deactivate",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "self"
          },
          "property": "isActive"
        }
      ],
      "constraints": [
        {
          "name": "warnDeactivateWithTasks",
          "code": "warnDeactivateWithTasks",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "currentTaskCount"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Deactivating station '{stationName}' with {current} active tasks"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "stationName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "currentTaskCount",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "currentTaskCount"
                      }
                    },
                    {
                      "key": "reason",
                      "value": {
                        "kind": "identifier",
                        "name": "reason"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "StationDeactivated"
      ]
    },
    {
      "name": "activate",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "unary",
          "operator": "not",
          "operand": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isActive"
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "StationActivated"
      ]
    },
    {
      "name": "updateEquipment",
      "parameters": [
        {
          "name": "equipmentList",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "identifier",
            "name": "equipmentList"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "null"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "equipmentList",
          "expression": {
            "kind": "identifier",
            "name": "equipmentList"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "StationEquipmentUpdated"
      ]
    }
  ],
  "policies": [
    {
      "name": "InventoryStaffCanReserve",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Kitchen staff can reserve inventory"
    },
    {
      "name": "InventoryStaffCanConsume",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Kitchen staff can consume inventory"
    },
    {
      "name": "ManagersCanAdjust",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only managers can adjust inventory"
    },
    {
      "name": "ManagersCanRestock",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only managers can restock inventory"
    },
    {
      "name": "MenuManagement",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Kitchen staff can manage menus"
    },
    {
      "name": "MenuDelete",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only leads and above can delete menus"
    },
    {
      "name": "MenuPricing",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only leads and above can update pricing"
    },
    {
      "name": "PrepListManagement",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Kitchen staff can manage prep lists"
    },
    {
      "name": "PrepListFinalize",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only leads and above can finalize prep lists"
    },
    {
      "name": "PrepListDelete",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only leads and above can delete prep lists"
    },
    {
      "name": "KitchenStaffClaim",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Kitchen staff can claim prep tasks"
    },
    {
      "name": "KitchenStaffComplete",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Kitchen staff can complete prep tasks"
    },
    {
      "name": "ManagersCanCancel",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only managers can cancel prep tasks"
    },
    {
      "name": "RecipeManagement",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Kitchen staff can manage recipes"
    },
    {
      "name": "RecipeDelete",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only leads and above can delete recipes"
    },
    {
      "name": "PricingUpdate",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only leads and above can update pricing"
    },
    {
      "name": "ManagersCanModifyStation",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only managers can modify station settings"
    },
    {
      "name": "KitchenStaffCanAssign",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Kitchen staff can assign tasks to stations"
    }
  ]
}