{
  "version": "1.0",
  "provenance": {
    "contentHash": "",
    "irHash": "",
    "compilerVersion": "0.3.8",
    "schemaVersion": "1.0",
    "compiledAt": "2026-03-01T00:52:09.520Z",
    "sources": [
      "alerts-config-rules.manifest",
      "allergen-warning-rules.manifest",
      "battle-board-rules.manifest",
      "catering-order-rules.manifest",
      "client-interaction-rules.manifest",
      "client-rules.manifest",
      "command-board-rules.manifest",
      "container-rules.manifest",
      "cycle-count-rules.manifest",
      "dish-rules.manifest",
      "event-budget-rules.manifest",
      "event-contract-rules.manifest",
      "event-dish-rules.manifest",
      "event-guest-rules.manifest",
      "event-import-workflow.manifest",
      "event-report-rules.manifest",
      "event-rules.manifest",
      "event-staff-rules.manifest",
      "ingredient-rules.manifest",
      "inventory-rules.manifest",
      "inventory-supplier-rules.manifest",
      "inventory-transaction-rules.manifest",
      "kitchen-task-rules.manifest",
      "lead-rules.manifest",
      "menu-rules.manifest",
      "notification-rules.manifest",
      "override-audit-rules.manifest",
      "prep-comment-rules.manifest",
      "prep-list-rules.manifest",
      "prep-method-rules.manifest",
      "prep-task-plan-workflow.manifest",
      "prep-task-rules.manifest",
      "proposal-rules.manifest",
      "purchase-order-rules.manifest",
      "recipe-rules.manifest",
      "role-policy-rules.manifest",
      "schedule-rules.manifest",
      "shipment-rules.manifest",
      "station-rules.manifest",
      "time-entry-rules.manifest",
      "user-rules.manifest",
      "waste-entry-rules.manifest",
      "workflow-rules.manifest"
    ]
  },
  "modules": [],
  "entities": [
    {
      "name": "AlertsConfig",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "channel",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "destination",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        }
      ],
      "computedProperties": [],
      "relationships": [],
      "commands": [
        "create",
        "update",
        "remove"
      ],
      "constraints": [
        {
          "name": "requireChannel",
          "code": "requireChannel",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "channel"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "severity": "block",
          "message": "Alert channel is required",
          "overrideable": false
        },
        {
          "name": "requireDestination",
          "code": "requireDestination",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "destination"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "severity": "block",
          "message": "Alert destination is required",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "AllergenWarning",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "dishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "warningType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "allergens",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "affectedGuests",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "severity",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "warning"
          },
          "modifiers": []
        },
        {
          "name": "isAcknowledged",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": false
          },
          "modifiers": []
        },
        {
          "name": "acknowledgedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "acknowledgedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "overrideReason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "resolved",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": false
          },
          "modifiers": []
        },
        {
          "name": "resolvedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isHighSeverity",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "severity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "critical"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isPending",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "isAcknowledged"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "boolean",
                  "value": false
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "resolved"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "boolean",
                  "value": false
                }
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isOverridden",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "overrideReason"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isDeleted",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "deletedAt"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "acknowledge",
        "resolve",
        "applyOverride",
        "softDelete"
      ],
      "constraints": [
        {
          "name": "requireEvent",
          "code": "requireEvent",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "severity": "block",
          "message": "Event ID is required",
          "overrideable": false
        },
        {
          "name": "requireWarningType",
          "code": "requireWarningType",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "warningType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "severity": "block",
          "message": "Warning type is required",
          "overrideable": false
        },
        {
          "name": "requireAllergens",
          "code": "requireAllergens",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "allergens"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "severity": "block",
          "message": "Allergens list is required",
          "overrideable": false
        },
        {
          "name": "cannotAcknowledgeTwice",
          "code": "cannotAcknowledgeTwice",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "isAcknowledged"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "boolean",
                "value": true
              }
            }
          },
          "severity": "warn",
          "message": "Warning already acknowledged",
          "overrideable": false
        },
        {
          "name": "cannotResolveTwice",
          "code": "cannotResolveTwice",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "resolved"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "boolean",
                "value": true
              }
            }
          },
          "severity": "warn",
          "message": "Warning already resolved",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "BattleBoard",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "boardName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "boardType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "event-specific"
          },
          "modifiers": []
        },
        {
          "name": "schemaVersion",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "mangia-battle-board@1"
          },
          "modifiers": []
        },
        {
          "name": "boardData",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "{}"
          },
          "modifiers": []
        },
        {
          "name": "documentUrl",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "sourceDocumentType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "documentImportedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "status",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "draft"
          },
          "modifiers": []
        },
        {
          "name": "isTemplate",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": false
          },
          "modifiers": []
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "tags",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "dishCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isOpen",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "open"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isVoting",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "voting"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isFinalized",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "finalized"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isDraft",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "draft"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasData",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "boardData"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "{}"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "boardData"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasDocument",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "documentUrl"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "documentUrl"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "open",
        "startVoting",
        "addDish",
        "removeDish",
        "vote",
        "finalize"
      ],
      "constraints": [
        {
          "name": "validBoardName",
          "code": "validBoardName",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "boardName"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "boardName"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Board name is required",
          "overrideable": false
        },
        {
          "name": "validStatus",
          "code": "validStatus",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "draft"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "open"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "voting"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "finalized"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "message": "Status must be valid",
          "overrideable": false
        },
        {
          "name": "validBoardType",
          "code": "validBoardType",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "boardType"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "event-specific"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "general"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "seasonal"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "competition"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "message": "Board type must be valid",
          "overrideable": false
        },
        {
          "name": "blockVoteIfFinalized",
          "code": "blockVoteIfFinalized",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "finalized"
              }
            }
          },
          "severity": "block",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "CateringOrder",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "orderNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "customerId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "orderStatus",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "draft"
          },
          "modifiers": []
        },
        {
          "name": "orderDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deliveryDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deliveryTime",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "subtotalAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "taxAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "discountAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "serviceChargeAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "totalAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "depositRequired",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": false
          },
          "modifiers": []
        },
        {
          "name": "depositAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "depositPaid",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": false
          },
          "modifiers": []
        },
        {
          "name": "depositPaidAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "venueName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "venueAddress",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "venueCity",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "venueState",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "venueZip",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "venueContactName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "venueContactPhone",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "guestCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "specialInstructions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "dietaryRestrictions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "staffRequired",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "staffAssigned",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isDraft",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "orderStatus"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "draft"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isConfirmed",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "orderStatus"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "confirmed"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isInProgress",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "orderStatus"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "in_progress"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isCompleted",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "orderStatus"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "completed"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isCancelled",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "orderStatus"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "cancelled"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isActive",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "or",
            "left": {
              "kind": "binary",
              "operator": "or",
              "left": {
                "kind": "binary",
                "operator": "==",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "orderStatus"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "draft"
                  }
                }
              },
              "right": {
                "kind": "binary",
                "operator": "==",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "orderStatus"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "confirmed"
                  }
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "orderStatus"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "in_progress"
                }
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "balanceDue",
          "type": {
            "name": "number",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "-",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "totalAmount"
            },
            "right": {
              "kind": "conditional",
              "condition": {
                "kind": "binary",
                "operator": "==",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "depositPaid"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "boolean",
                    "value": true
                  }
                }
              },
              "consequent": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "depositAmount"
              },
              "alternate": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isFullyStaffed",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "staffAssigned"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "staffRequired"
            }
          },
          "dependencies": []
        },
        {
          "name": "hasDeposit",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "depositRequired"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "depositPaid"
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "update",
        "confirm",
        "cancel",
        "startPrep",
        "markComplete"
      ],
      "constraints": [
        {
          "name": "validOrderNumber",
          "code": "validOrderNumber",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "orderNumber"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "orderNumber"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Order number is required",
          "overrideable": false
        },
        {
          "name": "validStatus",
          "code": "validStatus",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "orderStatus"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "draft"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "confirmed"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "in_progress"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "completed"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "cancelled"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "message": "Status must be valid",
          "overrideable": false
        },
        {
          "name": "positiveGuestCount",
          "code": "positiveGuestCount",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "guestCount"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Guest count must be non-negative",
          "overrideable": false
        },
        {
          "name": "positiveTotalAmount",
          "code": "positiveTotalAmount",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "totalAmount"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Total amount must be non-negative",
          "overrideable": false
        },
        {
          "name": "warnUnstaffed",
          "code": "warnUnstaffed",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "staffRequired"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "<",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "staffAssigned"
              },
              "right": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "staffRequired"
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "ClientInteraction",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "leadId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "employeeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "interactionType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "note"
          },
          "modifiers": []
        },
        {
          "name": "interactionDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "subject",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "followUpDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "followUpCompleted",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": false
          },
          "modifiers": []
        },
        {
          "name": "correlationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "hasFollowUp",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "followUpDate"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isFollowUpOverdue",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "and",
              "left": {
                "kind": "binary",
                "operator": ">",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "followUpDate"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "number",
                    "value": 0
                  }
                }
              },
              "right": {
                "kind": "binary",
                "operator": "<",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "followUpDate"
                },
                "right": {
                  "kind": "call",
                  "callee": {
                    "kind": "identifier",
                    "name": "now"
                  },
                  "args": []
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "followUpCompleted"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "boolean",
                  "value": false
                }
              }
            }
          },
          "dependencies": [
            "now"
          ]
        },
        {
          "name": "isCompleted",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "followUpCompleted"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "boolean",
                "value": true
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasSubject",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "subject"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "subject"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "update",
        "complete"
      ],
      "constraints": [
        {
          "name": "validInteractionType",
          "code": "validInteractionType",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "interactionType"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "call"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "email"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "meeting"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "note"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "message": "Interaction type must be 'call', 'email', 'meeting', or 'note'",
          "overrideable": false
        },
        {
          "name": "validSubject",
          "code": "validSubject",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "subject"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "subject"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Subject is required",
          "overrideable": false
        },
        {
          "name": "validEmployeeId",
          "code": "validEmployeeId",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "employeeId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "employeeId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Employee ID is required",
          "overrideable": false
        },
        {
          "name": "warnNoClientOrLead",
          "code": "warnNoClientOrLead",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "clientId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "leadId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "Client",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "clientType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "company"
          },
          "modifiers": []
        },
        {
          "name": "companyName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "firstName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "lastName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "email",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "phone",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "website",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "addressLine1",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "addressLine2",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "city",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "stateProvince",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "postalCode",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "countryCode",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "defaultPaymentTerms",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 30
          },
          "modifiers": []
        },
        {
          "name": "taxExempt",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": false
          },
          "modifiers": []
        },
        {
          "name": "taxId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "tags",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "source",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "assignedTo",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "isActive",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": true
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "displayName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "clientType"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "company"
                }
              }
            },
            "consequent": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "companyName"
            },
            "alternate": {
              "kind": "binary",
              "operator": "+",
              "left": {
                "kind": "binary",
                "operator": "+",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "firstName"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": " "
                  }
                }
              },
              "right": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "lastName"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasEmail",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "email"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "email"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isArchived",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "deletedAt"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "update",
        "archive",
        "reactivate"
      ],
      "constraints": [
        {
          "name": "validClientType",
          "code": "validClientType",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "clientType"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "company"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "individual"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "message": "Client type must be 'company' or 'individual'",
          "overrideable": false
        },
        {
          "name": "validPaymentTerms",
          "code": "validPaymentTerms",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "defaultPaymentTerms"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Payment terms must be non-negative",
          "overrideable": false
        },
        {
          "name": "warnNoEmail",
          "code": "warnNoEmail",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "email"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "phone"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "ClientContact",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "firstName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "lastName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "email",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "phone",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "phoneMobile",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "isPrimary",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": false
          },
          "modifiers": []
        },
        {
          "name": "isBillingContact",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": false
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "fullName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "+",
            "left": {
              "kind": "binary",
              "operator": "+",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "firstName"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": " "
                }
              }
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "lastName"
            }
          },
          "dependencies": []
        },
        {
          "name": "hasContactInfo",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "or",
            "left": {
              "kind": "binary",
              "operator": "or",
              "left": {
                "kind": "binary",
                "operator": "!=",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "email"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": ""
                  }
                }
              },
              "right": {
                "kind": "binary",
                "operator": "!=",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "phone"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": ""
                  }
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "phoneMobile"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "update",
        "remove",
        "setPrimary"
      ],
      "constraints": [
        {
          "name": "validClientId",
          "code": "validClientId",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "clientId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "clientId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Client ID is required",
          "overrideable": false
        },
        {
          "name": "validFirstName",
          "code": "validFirstName",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "firstName"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "firstName"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "First name is required",
          "overrideable": false
        },
        {
          "name": "validLastName",
          "code": "validLastName",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "lastName"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "lastName"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Last name is required",
          "overrideable": false
        },
        {
          "name": "warnNoContactInfo",
          "code": "warnNoContactInfo",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "and",
              "left": {
                "kind": "binary",
                "operator": "==",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "email"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": ""
                  }
                }
              },
              "right": {
                "kind": "binary",
                "operator": "==",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "phone"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": ""
                  }
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "phoneMobile"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "ClientPreference",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "preferenceType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "preferenceKey",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "preferenceValue",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [],
      "relationships": [],
      "commands": [
        "create",
        "update",
        "remove"
      ],
      "constraints": [
        {
          "name": "validClientId",
          "code": "validClientId",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "clientId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "clientId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Client ID is required",
          "overrideable": false
        },
        {
          "name": "validPreferenceType",
          "code": "validPreferenceType",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "preferenceType"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "preferenceType"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Preference type is required",
          "overrideable": false
        },
        {
          "name": "validPreferenceKey",
          "code": "validPreferenceKey",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "preferenceKey"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "preferenceKey"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Preference key is required",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "CommandBoard",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "status",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "draft"
          },
          "modifiers": []
        },
        {
          "name": "isTemplate",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": false
          },
          "modifiers": []
        },
        {
          "name": "tags",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isDraft",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "draft"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isActive",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "active"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isArchived",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "archived"
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "update",
        "activate",
        "deactivate"
      ],
      "constraints": [
        {
          "name": "validName",
          "code": "validName",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "name"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "name"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Board name is required",
          "overrideable": false
        },
        {
          "name": "validStatus",
          "code": "validStatus",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "draft"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "active"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "archived"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "message": "Status must be valid",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "CommandBoardCard",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "boardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "content",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "cardType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "task"
          },
          "modifiers": []
        },
        {
          "name": "status",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "pending"
          },
          "modifiers": []
        },
        {
          "name": "positionX",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "positionY",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "width",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 200
          },
          "modifiers": []
        },
        {
          "name": "height",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 150
          },
          "modifiers": []
        },
        {
          "name": "zIndex",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "color",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "metadata",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "{}"
          },
          "modifiers": []
        },
        {
          "name": "groupId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "entityId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "entityType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "version",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isPending",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "pending"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isInProgress",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "in_progress"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isDone",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "done"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isDeleted",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "deletedAt"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "update",
        "move",
        "resize",
        "remove"
      ],
      "constraints": [
        {
          "name": "validTitle",
          "code": "validTitle",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "title"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "title"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Card title is required",
          "overrideable": false
        },
        {
          "name": "validBoardId",
          "code": "validBoardId",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "boardId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "boardId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Board ID is required",
          "overrideable": false
        },
        {
          "name": "validCardType",
          "code": "validCardType",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "cardType"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "task"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "note"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "reference"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "checklist"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "entity"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "message": "Invalid card type",
          "overrideable": false
        },
        {
          "name": "validStatus",
          "code": "validStatus",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "pending"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "in_progress"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "done"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "blocked"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "cancelled"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "message": "Invalid card status",
          "overrideable": false
        },
        {
          "name": "positiveWidth",
          "code": "positiveWidth",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "width"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Card width must be positive",
          "overrideable": false
        },
        {
          "name": "positiveHeight",
          "code": "positiveHeight",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "height"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Card height must be positive",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "CommandBoardGroup",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "boardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "color",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "collapsed",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": false
          },
          "modifiers": []
        },
        {
          "name": "positionX",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "positionY",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "width",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 300
          },
          "modifiers": []
        },
        {
          "name": "height",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 200
          },
          "modifiers": []
        },
        {
          "name": "zIndex",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isDeleted",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "deletedAt"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "update",
        "remove"
      ],
      "constraints": [
        {
          "name": "validName",
          "code": "validName",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "name"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "name"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Group name is required",
          "overrideable": false
        },
        {
          "name": "validBoardId",
          "code": "validBoardId",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "boardId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "boardId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Board ID is required",
          "overrideable": false
        },
        {
          "name": "positiveWidth",
          "code": "positiveWidth",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "width"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Group width must be positive",
          "overrideable": false
        },
        {
          "name": "positiveHeight",
          "code": "positiveHeight",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "height"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Group height must be positive",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "CommandBoardConnection",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "boardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "fromCardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "toCardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "relationshipType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "generic"
          },
          "modifiers": []
        },
        {
          "name": "label",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "visible",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": true
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isDeleted",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "deletedAt"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "remove"
      ],
      "constraints": [
        {
          "name": "validBoardId",
          "code": "validBoardId",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "boardId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "boardId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Board ID is required",
          "overrideable": false
        },
        {
          "name": "validFromCardId",
          "code": "validFromCardId",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "fromCardId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "fromCardId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Source card ID is required",
          "overrideable": false
        },
        {
          "name": "validToCardId",
          "code": "validToCardId",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "toCardId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "toCardId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Target card ID is required",
          "overrideable": false
        },
        {
          "name": "noSelfConnection",
          "code": "noSelfConnection",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "fromCardId"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "toCardId"
            }
          },
          "severity": "block",
          "message": "Cannot connect a card to itself",
          "overrideable": false
        },
        {
          "name": "validRelationshipType",
          "code": "validRelationshipType",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "relationshipType"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "generic"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "dependency"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "blocks"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "related"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "sequence"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "message": "Invalid connection type",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "CommandBoardLayout",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "boardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "viewport",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "{}"
          },
          "modifiers": []
        },
        {
          "name": "visibleCards",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "gridSize",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 40
          },
          "modifiers": []
        },
        {
          "name": "showGrid",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": true
          },
          "modifiers": []
        },
        {
          "name": "snapToGrid",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": true
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [],
      "relationships": [],
      "commands": [
        "create",
        "update",
        "remove"
      ],
      "constraints": [
        {
          "name": "validName",
          "code": "validName",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "name"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "name"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Layout name is required",
          "overrideable": false
        },
        {
          "name": "validBoardId",
          "code": "validBoardId",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "boardId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "boardId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Board ID is required",
          "overrideable": false
        },
        {
          "name": "validUserId",
          "code": "validUserId",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "userId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "userId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "User ID is required",
          "overrideable": false
        },
        {
          "name": "positiveGridSize",
          "code": "positiveGridSize",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "gridSize"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Grid size must be positive",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "Container",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "containerType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "sizeDescription",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "capacityVolumeMl",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "capacityWeightG",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "capacityPortions",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "isReusable",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": true
          },
          "modifiers": []
        },
        {
          "name": "isActive",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": true
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "hasVolumeCapacity",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "capacityVolumeMl"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasWeightCapacity",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "capacityWeightG"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasPortionCapacity",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "capacityPortions"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasAnyCapacity",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "or",
            "left": {
              "kind": "binary",
              "operator": "or",
              "left": {
                "kind": "binary",
                "operator": ">",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "capacityVolumeMl"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "number",
                    "value": 0
                  }
                }
              },
              "right": {
                "kind": "binary",
                "operator": ">",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "capacityWeightG"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "number",
                    "value": 0
                  }
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "capacityPortions"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isDeactivated",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "isActive"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "boolean",
                "value": false
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "update",
        "deactivate"
      ],
      "constraints": [
        {
          "name": "requireName",
          "code": "requireName",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "severity": "block",
          "message": "Container name is required",
          "overrideable": false
        },
        {
          "name": "positiveVolume",
          "code": "positiveVolume",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "capacityVolumeMl"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Volume capacity cannot be negative",
          "overrideable": false
        },
        {
          "name": "positiveWeight",
          "code": "positiveWeight",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "capacityWeightG"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Weight capacity cannot be negative",
          "overrideable": false
        },
        {
          "name": "positivePortions",
          "code": "positivePortions",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "capacityPortions"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Portion capacity cannot be negative",
          "overrideable": false
        },
        {
          "name": "warnNoCapacity",
          "code": "warnNoCapacity",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "hasAnyCapacity"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "boolean",
                  "value": false
                }
              }
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "isActive"
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "CycleCountSession",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "sessionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "sessionName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "countType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "ad_hoc"
          },
          "modifiers": []
        },
        {
          "name": "scheduledDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "startedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "completedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "finalizedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "status",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "draft"
          },
          "modifiers": []
        },
        {
          "name": "totalItems",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "countedItems",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "totalVariance",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "variancePercentage",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "createdById",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "approvedById",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isDraft",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "draft"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isInProgress",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "in_progress"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isCompleted",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "completed"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isCancelled",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "cancelled"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "countProgress",
          "type": {
            "name": "number",
            "nullable": false
          },
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "totalItems"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "consequent": {
              "kind": "binary",
              "operator": "*",
              "left": {
                "kind": "binary",
                "operator": "/",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "countedItems"
                },
                "right": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "totalItems"
                }
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 100
                }
              }
            },
            "alternate": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasVariance",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "totalVariance"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "start",
        "complete",
        "finalize",
        "cancel"
      ],
      "constraints": [
        {
          "name": "validStatus",
          "code": "validStatus",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "draft"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "in_progress"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "completed"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "cancelled"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "finalized"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "message": "Invalid cycle count session status",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "CycleCountRecord",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "sessionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "itemNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "itemName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "storageLocationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "expectedQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "countedQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "variance",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "variancePct",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "countDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "countedById",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "barcode",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "isVerified",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": false
          },
          "modifiers": []
        },
        {
          "name": "verifiedById",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "verifiedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "syncStatus",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "synced"
          },
          "modifiers": []
        },
        {
          "name": "offlineId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "hasVariance",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "variance"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isOvercount",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "variance"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isUndercount",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "<",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "variance"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isLargeVariance",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "or",
            "left": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "variancePct"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 10
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "<",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "variancePct"
              },
              "right": {
                "kind": "unary",
                "operator": "-",
                "operand": {
                  "kind": "literal",
                  "value": {
                    "kind": "number",
                    "value": 10
                  }
                }
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "update",
        "verify"
      ],
      "constraints": [],
      "policies": []
    },
    {
      "name": "VarianceReport",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "sessionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "reportType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "itemNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "itemName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "expectedQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "countedQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "variance",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "variancePct",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "accuracyScore",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "status",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "pending"
          },
          "modifiers": []
        },
        {
          "name": "adjustmentType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "adjustmentAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "adjustmentDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "generatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isPending",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "pending"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isReviewed",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "reviewed"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isApproved",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "approved"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasAdjustment",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "adjustmentType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isHighVariance",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "or",
            "left": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "variancePct"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 10
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "<",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "variancePct"
              },
              "right": {
                "kind": "unary",
                "operator": "-",
                "operand": {
                  "kind": "literal",
                  "value": {
                    "kind": "number",
                    "value": 10
                  }
                }
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "review",
        "approve"
      ],
      "constraints": [
        {
          "name": "validStatus",
          "code": "validStatus",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "pending"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "reviewed"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "approved"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "adjusted"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "message": "Invalid variance report status",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "Dish",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "recipeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "serviceStyle",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "defaultContainerId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "presentationImageUrl",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "minPrepLeadDays",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "maxPrepLeadDays",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "portionSizeDescription",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "dietaryTags",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "allergens",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "pricePerPerson",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "costPerPerson",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "isActive",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": true
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "hasPrice",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "pricePerPerson"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasCost",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "costPerPerson"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "margin",
          "type": {
            "name": "number",
            "nullable": false
          },
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": "and",
              "left": {
                "kind": "binary",
                "operator": ">",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "pricePerPerson"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "number",
                    "value": 0
                  }
                }
              },
              "right": {
                "kind": "binary",
                "operator": ">",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "costPerPerson"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "number",
                    "value": 0
                  }
                }
              }
            },
            "consequent": {
              "kind": "binary",
              "operator": "-",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "pricePerPerson"
              },
              "right": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "costPerPerson"
              }
            },
            "alternate": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "marginPercent",
          "type": {
            "name": "number",
            "nullable": false
          },
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": "and",
              "left": {
                "kind": "binary",
                "operator": ">",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "pricePerPerson"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "number",
                    "value": 0
                  }
                }
              },
              "right": {
                "kind": "binary",
                "operator": ">",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "costPerPerson"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "number",
                    "value": 0
                  }
                }
              }
            },
            "consequent": {
              "kind": "binary",
              "operator": "*",
              "left": {
                "kind": "binary",
                "operator": "/",
                "left": {
                  "kind": "binary",
                  "operator": "-",
                  "left": {
                    "kind": "member",
                    "object": {
                      "kind": "identifier",
                      "name": "self"
                    },
                    "property": "pricePerPerson"
                  },
                  "right": {
                    "kind": "member",
                    "object": {
                      "kind": "identifier",
                      "name": "self"
                    },
                    "property": "costPerPerson"
                  }
                },
                "right": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "pricePerPerson"
                }
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 100
                }
              }
            },
            "alternate": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasLeadTime",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "minPrepLeadDays"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isDeactivated",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "isActive"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "boolean",
                "value": false
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "update",
        "deactivate",
        "updatePricing",
        "updateLeadTime"
      ],
      "constraints": [
        {
          "name": "positivePrice",
          "code": "positivePrice",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "pricePerPerson"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Price per person cannot be negative",
          "overrideable": false
        },
        {
          "name": "positiveCost",
          "code": "positiveCost",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "costPerPerson"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Cost per person cannot be negative",
          "overrideable": false
        },
        {
          "name": "positiveMinLeadDays",
          "code": "positiveMinLeadDays",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "minPrepLeadDays"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Minimum prep lead days cannot be negative",
          "overrideable": false
        },
        {
          "name": "positiveMaxLeadDays",
          "code": "positiveMaxLeadDays",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "maxPrepLeadDays"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Maximum prep lead days cannot be negative",
          "overrideable": false
        },
        {
          "name": "leadDaysOrder",
          "code": "leadDaysOrder",
          "expression": {
            "kind": "binary",
            "operator": "or",
            "left": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "maxPrepLeadDays"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": ">=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "maxPrepLeadDays"
              },
              "right": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "minPrepLeadDays"
              }
            }
          },
          "severity": "block",
          "message": "Max prep lead days must be >= min prep lead days",
          "overrideable": false
        },
        {
          "name": "warnNoPrice",
          "code": "warnNoPrice",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "pricePerPerson"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "isActive"
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "EventBudget",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "version",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 1
          },
          "modifiers": []
        },
        {
          "name": "status",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "draft"
          },
          "modifiers": []
        },
        {
          "name": "totalBudgetAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "totalActualAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "varianceAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "variancePercentage",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isDraft",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "draft"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isApproved",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "approved"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isFinalized",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "finalized"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isOverBudget",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "totalActualAmount"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "totalBudgetAmount"
            }
          },
          "dependencies": []
        },
        {
          "name": "hasVariance",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "varianceAmount"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "varianceExceedsThreshold",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "or",
            "left": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "variancePercentage"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 10
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "<",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "variancePercentage"
              },
              "right": {
                "kind": "unary",
                "operator": "-",
                "operand": {
                  "kind": "literal",
                  "value": {
                    "kind": "number",
                    "value": 10
                  }
                }
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "update",
        "approve",
        "finalize"
      ],
      "constraints": [
        {
          "name": "validEventId",
          "code": "validEventId",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "eventId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "eventId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Event ID is required",
          "overrideable": false
        },
        {
          "name": "validStatus",
          "code": "validStatus",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "draft"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "approved"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "finalized"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "message": "Status must be valid",
          "overrideable": false
        },
        {
          "name": "positiveBudget",
          "code": "positiveBudget",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "totalBudgetAmount"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Total budget amount must be non-negative",
          "overrideable": false
        },
        {
          "name": "warnOverBudget",
          "code": "warnOverBudget",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "totalActualAmount"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "totalBudgetAmount"
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "BudgetLineItem",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "budgetId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "budgetedAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "actualAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "varianceAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "sortOrder",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isOverBudget",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "actualAmount"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "budgetedAmount"
            }
          },
          "dependencies": []
        },
        {
          "name": "hasVariance",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "varianceAmount"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "update",
        "remove"
      ],
      "constraints": [
        {
          "name": "validBudgetId",
          "code": "validBudgetId",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "budgetId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "budgetId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Budget ID is required",
          "overrideable": false
        },
        {
          "name": "validCategory",
          "code": "validCategory",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "category"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "category"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Category is required",
          "overrideable": false
        },
        {
          "name": "validName",
          "code": "validName",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "name"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "name"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Line item name is required",
          "overrideable": false
        },
        {
          "name": "positiveBudgetedAmount",
          "code": "positiveBudgetedAmount",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "budgetedAmount"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Budgeted amount must be non-negative",
          "overrideable": false
        },
        {
          "name": "positiveActualAmount",
          "code": "positiveActualAmount",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "actualAmount"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Actual amount must be non-negative",
          "overrideable": false
        },
        {
          "name": "positiveSortOrder",
          "code": "positiveSortOrder",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "sortOrder"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Sort order must be non-negative",
          "overrideable": false
        },
        {
          "name": "warnOverBudgetItem",
          "code": "warnOverBudgetItem",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "actualAmount"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "budgetedAmount"
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "EventContract",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "contractNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "Untitled Contract"
          },
          "modifiers": []
        },
        {
          "name": "status",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "draft"
          },
          "modifiers": []
        },
        {
          "name": "documentUrl",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "documentType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "expiresAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isDraft",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "draft"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isSent",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "sent"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isViewed",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "viewed"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isSigned",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "signed"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isExpired",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "expired"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isCancelled",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "cancelled"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasDocument",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "documentUrl"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasExpiration",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "expiresAt"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "update",
        "send",
        "markViewed",
        "sign",
        "expire",
        "cancel",
        "softDelete"
      ],
      "constraints": [
        {
          "name": "requireEvent",
          "code": "requireEvent",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "eventId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "eventId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Event ID is required",
          "overrideable": false
        },
        {
          "name": "requireClient",
          "code": "requireClient",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "clientId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "clientId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Client ID is required",
          "overrideable": false
        },
        {
          "name": "validStatus",
          "code": "validStatus",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "draft"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "sent"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "viewed"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "signed"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "expired"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "cancelled"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "message": "Status must be valid",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "ContractSignature",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "contractId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "signedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "signatureData",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "signerName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "signerEmail",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "ipAddress",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "hasEmail",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "signerEmail"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasIpAddress",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "ipAddress"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "softDelete"
      ],
      "constraints": [
        {
          "name": "requireContract",
          "code": "requireContract",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "contractId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "contractId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Contract ID is required",
          "overrideable": false
        },
        {
          "name": "requireSignatureData",
          "code": "requireSignatureData",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "signatureData"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "signatureData"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Signature data is required",
          "overrideable": false
        },
        {
          "name": "requireSignerName",
          "code": "requireSignerName",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "signerName"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "signerName"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Signer name is required",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "EventDish",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "dishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 1
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "courseLabel",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "sortOrder",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isDeleted",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "deletedAt"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "remove"
      ],
      "constraints": [
        {
          "name": "requireEvent",
          "code": "requireEvent",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "eventId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "eventId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Event ID is required",
          "overrideable": false
        },
        {
          "name": "requireDish",
          "code": "requireDish",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "dishId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "dishId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Dish ID is required",
          "overrideable": false
        },
        {
          "name": "positiveQuantity",
          "code": "positiveQuantity",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Quantity must be positive",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "EventGuest",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "guestName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "guestEmail",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "guestPhone",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "isPrimaryContact",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": false
          },
          "modifiers": []
        },
        {
          "name": "dietaryRestrictions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "allergenRestrictions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "specialMealRequired",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": false
          },
          "modifiers": []
        },
        {
          "name": "specialMealNotes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "tableAssignment",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "mealPreference",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "hasDietaryRestrictions",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "dietaryRestrictions"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasAllergenRestrictions",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "allergenRestrictions"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "needsSpecialMeal",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "specialMealRequired"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "boolean",
                "value": true
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isDeleted",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "deletedAt"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasTableAssignment",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "tableAssignment"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "update",
        "softDelete"
      ],
      "constraints": [
        {
          "name": "requireEvent",
          "code": "requireEvent",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "severity": "block",
          "message": "Event ID is required",
          "overrideable": false
        },
        {
          "name": "requireGuestName",
          "code": "requireGuestName",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "guestName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "severity": "block",
          "message": "Guest name is required",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "EventImportWorkflow",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "idempotencyKey",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "status",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "created"
          },
          "modifiers": []
        },
        {
          "name": "currentStep",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "totalSteps",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 6
          },
          "modifiers": []
        },
        {
          "name": "inputData",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "{}"
          },
          "modifiers": []
        },
        {
          "name": "outputData",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "{}"
          },
          "modifiers": []
        },
        {
          "name": "stepResults",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "{}"
          },
          "modifiers": []
        },
        {
          "name": "errors",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "[]"
          },
          "modifiers": []
        },
        {
          "name": "warnings",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "[]"
          },
          "modifiers": []
        },
        {
          "name": "confidence",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "startedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "completedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isActive",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "parsing"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "extracting"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "validating"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "proposing"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "reserving"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "activating"
                  }
                }
              ]
            }
          },
          "dependencies": []
        },
        {
          "name": "isCompleted",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "completed"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isFailed",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "failed"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isPaused",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "paused"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "canRetry",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "or",
            "left": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "status"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "failed"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "status"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "paused"
                }
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "progress",
          "type": {
            "name": "number",
            "nullable": false
          },
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "totalSteps"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "consequent": {
              "kind": "binary",
              "operator": "*",
              "left": {
                "kind": "binary",
                "operator": "/",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "currentStep"
                },
                "right": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "totalSteps"
                }
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 100
                }
              }
            },
            "alternate": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "startParsing",
        "completeParsing",
        "startExtracting",
        "completeExtraction",
        "startValidating",
        "completeValidation",
        "startProposing",
        "completeProposing",
        "startReserving",
        "completeReserving",
        "startActivating",
        "completeActivating",
        "fail",
        "pause",
        "resume",
        "cancel",
        "retry"
      ],
      "constraints": [
        {
          "name": "validStatus",
          "code": "validStatus",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "created"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "parsing"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "extracting"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "validating"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "proposing"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "reserving"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "activating"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "completed"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "failed"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "paused"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "cancelled"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "overrideable": false
        },
        {
          "name": "validStep",
          "code": "validStep",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "currentStep"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "<=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "currentStep"
              },
              "right": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "totalSteps"
              }
            }
          },
          "severity": "block",
          "overrideable": false
        },
        {
          "name": "hasIdempotencyKey",
          "code": "hasIdempotencyKey",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "idempotencyKey"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "severity": "block",
          "message": "Idempotency key is required for workflow tracking",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "EventReport",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "version",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "2025-01-01"
          },
          "modifiers": []
        },
        {
          "name": "status",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "draft"
          },
          "modifiers": []
        },
        {
          "name": "completion",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "checklistData",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "{}"
          },
          "modifiers": []
        },
        {
          "name": "parsedEventData",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "reportConfig",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "autoFillScore",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "reviewNotes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "reviewedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "reviewedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "completedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isDraft",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "draft"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isInProgress",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "in_progress"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isCompleted",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "completed"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isApproved",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "approved"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasContent",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "checklistData"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "{}"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "checklistData"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isFullyComplete",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "completion"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 100
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isReviewed",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "reviewedBy"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "reviewedBy"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "submit",
        "approve",
        "complete"
      ],
      "constraints": [
        {
          "name": "validName",
          "code": "validName",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "name"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "name"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Report name is required",
          "overrideable": false
        },
        {
          "name": "validEventId",
          "code": "validEventId",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "eventId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "eventId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Event ID is required",
          "overrideable": false
        },
        {
          "name": "validStatus",
          "code": "validStatus",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "draft"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "in_progress"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "completed"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "approved"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "message": "Status must be valid",
          "overrideable": false
        },
        {
          "name": "validCompletion",
          "code": "validCompletion",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "completion"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "<=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "completion"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 100
                }
              }
            }
          },
          "severity": "block",
          "message": "Completion must be between 0 and 100",
          "overrideable": false
        },
        {
          "name": "warnLowCompletion",
          "code": "warnLowCompletion",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "<",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "completion"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 50
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "status"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "in_progress"
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "Event",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "eventNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "Untitled Event"
          },
          "modifiers": []
        },
        {
          "name": "eventType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "eventDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "guestCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 1
          },
          "modifiers": []
        },
        {
          "name": "status",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "confirmed"
          },
          "modifiers": []
        },
        {
          "name": "budget",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "ticketPrice",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "ticketTier",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "eventFormat",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "accessibilityOptions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "featuredMediaUrl",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "venueId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "assignedTo",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "venueName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "venueAddress",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "tags",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isDraft",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "draft"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isConfirmed",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "confirmed"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isCompleted",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "completed"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isArchived",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "archived"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isCancelled",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "cancelled"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isFinalized",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "or",
            "left": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "status"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "completed"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "status"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "archived"
                }
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isActive",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "or",
            "left": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "status"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "draft"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "status"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "confirmed"
                }
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isLargeEvent",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "guestCount"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 200
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "update",
        "confirm",
        "cancel",
        "archive",
        "updateGuestCount",
        "updateDate",
        "updateLocation",
        "finalize",
        "unfinalize"
      ],
      "constraints": [
        {
          "name": "validTitle",
          "code": "validTitle",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "title"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "title"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Event title is required",
          "overrideable": false
        },
        {
          "name": "validEventType",
          "code": "validEventType",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "eventType"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "eventType"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Event type is required",
          "overrideable": false
        },
        {
          "name": "validStatus",
          "code": "validStatus",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "draft"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "confirmed"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "completed"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "archived"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "cancelled"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "message": "Status must be valid",
          "overrideable": false
        },
        {
          "name": "positiveGuestCount",
          "code": "positiveGuestCount",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "guestCount"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Guest count must be positive",
          "overrideable": false
        },
        {
          "name": "warnLargeGuestCount",
          "code": "warnLargeGuestCount",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "guestCount"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 200
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "EventProfitability",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "budgetedRevenue",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "budgetedFoodCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "budgetedLaborCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "budgetedOverhead",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "budgetedTotalCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "budgetedGrossMargin",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "budgetedGrossMarginPct",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "actualRevenue",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "actualFoodCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "actualLaborCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "actualOverhead",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "actualTotalCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "actualGrossMargin",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "actualGrossMarginPct",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "revenueVariance",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "foodCostVariance",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "laborCostVariance",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "totalCostVariance",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "marginVariancePct",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "calculatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "calculationMethod",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "auto"
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isProfitable",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "actualGrossMargin"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasVariance",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "or",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "totalCostVariance"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "revenueVariance"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isOverBudget",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "actualTotalCost"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "budgetedTotalCost"
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "update",
        "recalculate"
      ],
      "constraints": [
        {
          "name": "validEventId",
          "code": "validEventId",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "eventId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "eventId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Event ID is required",
          "overrideable": false
        },
        {
          "name": "warnNegativeMargin",
          "code": "warnNegativeMargin",
          "expression": {
            "kind": "binary",
            "operator": "<",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "actualGrossMarginPct"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "EventSummary",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "highlights",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "[]"
          },
          "modifiers": []
        },
        {
          "name": "issues",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "[]"
          },
          "modifiers": []
        },
        {
          "name": "financialPerformance",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "[]"
          },
          "modifiers": []
        },
        {
          "name": "clientFeedback",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "[]"
          },
          "modifiers": []
        },
        {
          "name": "insights",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "[]"
          },
          "modifiers": []
        },
        {
          "name": "overallSummary",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "generatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "generationDurationMs",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "hasHighlights",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "highlights"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "[]"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "highlights"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasIssues",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "issues"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "[]"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "issues"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasFeedback",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "clientFeedback"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "[]"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "clientFeedback"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "update",
        "refresh"
      ],
      "constraints": [
        {
          "name": "validEventId",
          "code": "validEventId",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "eventId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "eventId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Event ID is required",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "EventStaff",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "role",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "shiftStart",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "shiftEnd",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "status",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "assigned"
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isAssigned",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "assigned"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isUnassigned",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "unassigned"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isDeleted",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "deletedAt"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasShift",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "shiftStart"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "shiftEnd"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "assign",
        "unassign"
      ],
      "constraints": [
        {
          "name": "requireEvent",
          "code": "requireEvent",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "eventId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "eventId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Event ID is required",
          "overrideable": false
        },
        {
          "name": "requireUser",
          "code": "requireUser",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "userId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "userId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "User ID is required",
          "overrideable": false
        },
        {
          "name": "validStatus",
          "code": "validStatus",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "assigned"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "unassigned"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "message": "Status must be valid",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "Ingredient",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "defaultUnitId",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "densityGPerMl",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "shelfLifeDays",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "storageInstructions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "allergens",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "isActive",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": true
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isExpirable",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "shelfLifeDays"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasAllergens",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "allergens"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isDeactivated",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "isActive"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "boolean",
                "value": false
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "update",
        "deactivate",
        "updateAllergens",
        "updateShelfLife"
      ],
      "constraints": [
        {
          "name": "requireName",
          "code": "requireName",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "severity": "block",
          "message": "Ingredient name is required",
          "overrideable": false
        },
        {
          "name": "warnNoShelfLife",
          "code": "warnNoShelfLife",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "shelfLifeDays"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "InventoryItem",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "itemNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "itemType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "ingredient"
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "baseUnit",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "each"
          },
          "modifiers": []
        },
        {
          "name": "quantityOnHand",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "quantityReserved",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "quantityAvailable",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "parLevel",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "reorderPoint",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "reorderQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "costPerUnit",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "supplierId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "allergens",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "isActive",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": true
          },
          "modifiers": []
        },
        {
          "name": "lastCountedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isBelowPar",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "parLevel"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "<",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityOnHand"
              },
              "right": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "parLevel"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isBelowReorderPoint",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "reorderPoint"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "<",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityOnHand"
              },
              "right": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "reorderPoint"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "totalValue",
          "type": {
            "name": "number",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "*",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityOnHand"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "costPerUnit"
            }
          },
          "dependencies": []
        },
        {
          "name": "reservedValue",
          "type": {
            "name": "number",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "*",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityReserved"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "costPerUnit"
            }
          },
          "dependencies": []
        },
        {
          "name": "stockoutRisk",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "<=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityAvailable"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "lowStockRisk",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "<",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityAvailable"
            },
            "right": {
              "kind": "binary",
              "operator": "*",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "parLevel"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0.25
                }
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "needsReorder",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isBelowReorderPoint"
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "reserve",
        "consume",
        "waste",
        "adjust",
        "restock",
        "releaseReservation",
        "create"
      ],
      "constraints": [
        {
          "name": "positiveQuantities",
          "code": "positiveQuantities",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityOnHand"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": ">=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityReserved"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            }
          },
          "severity": "block",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "InventorySupplier",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "supplierNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "contactPerson",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "email",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "phone",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "paymentTerms",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "NET_30"
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "tags",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "isActive",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": true
          },
          "modifiers": []
        },
        {
          "name": "openPOCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "hasContact",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "or",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "contactPerson"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "email"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasOpenPOs",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "openPOCount"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "update",
        "deactivate"
      ],
      "constraints": [
        {
          "name": "validPaymentTerms",
          "code": "validPaymentTerms",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "paymentTerms"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "NET_15"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "NET_30"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "NET_45"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "NET_60"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "COD"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "PREPAID"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "message": "Invalid payment terms",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "InventoryTransaction",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "transactionType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "unitCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "totalCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "reference",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "referenceType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "referenceId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "employeeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "storageLocationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "transactionDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isReceipt",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "transactionType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "receipt"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isIssue",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "transactionType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "issue"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isAdjustment",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "transactionType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "adjustment"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isTransfer",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "transactionType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "transfer"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isWaste",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "transactionType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "waste"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isReturn",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "transactionType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "return"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasReference",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "referenceId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create"
      ],
      "constraints": [
        {
          "name": "validTransactionType",
          "code": "validTransactionType",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "transactionType"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "receipt"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "issue"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "adjustment"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "transfer"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "waste"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "return"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "message": "Invalid transaction type",
          "overrideable": false
        },
        {
          "name": "nonZeroQuantity",
          "code": "nonZeroQuantity",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "KitchenTask",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "summary",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "status",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "pending"
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "priority",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 5
          },
          "modifiers": []
        },
        {
          "name": "complexity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 5
          },
          "modifiers": []
        },
        {
          "name": "tags",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "dueDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "completedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isOverdue",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "and",
              "left": {
                "kind": "binary",
                "operator": "!=",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "dueDate"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "number",
                    "value": 0
                  }
                }
              },
              "right": {
                "kind": "binary",
                "operator": ">",
                "left": {
                  "kind": "call",
                  "callee": {
                    "kind": "identifier",
                    "name": "now"
                  },
                  "args": []
                },
                "right": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "dueDate"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "status"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "done"
                }
              }
            }
          },
          "dependencies": [
            "now"
          ]
        },
        {
          "name": "isCompleted",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "done"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isPending",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "pending"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isInProgress",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "in_progress"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isUrgent",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "<=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "priority"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 2
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isHighPriority",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "<=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "priority"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 3
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "claim",
        "start",
        "complete",
        "release",
        "reassign",
        "updatePriority",
        "updateComplexity",
        "addTag",
        "removeTag",
        "cancel",
        "create"
      ],
      "constraints": [
        {
          "name": "validStatus",
          "code": "validStatus",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "pending"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "in_progress"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "done"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "cancelled"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "message": "Invalid task status",
          "overrideable": false
        },
        {
          "name": "validPriority",
          "code": "validPriority",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "priority"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 1
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "<=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "priority"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 5
                }
              }
            }
          },
          "severity": "block",
          "message": "Priority must be between 1 (critical) and 5 (low)",
          "overrideable": false
        },
        {
          "name": "validComplexity",
          "code": "validComplexity",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "complexity"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 1
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "<=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "complexity"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 5
                }
              }
            }
          },
          "severity": "block",
          "message": "Complexity must be between 1 (simple) and 5 (very complex)",
          "overrideable": false
        },
        {
          "name": "warnOverdue",
          "code": "warnOverdue",
          "expression": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isOverdue"
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "policies": [],
      "transitions": [
        {
          "property": "status",
          "from": "pending",
          "to": [
            "in_progress",
            "done",
            "cancelled"
          ]
        },
        {
          "property": "status",
          "from": "in_progress",
          "to": [
            "pending",
            "done",
            "cancelled"
          ]
        }
      ]
    },
    {
      "name": "Lead",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "source",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "companyName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "contactName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "contactEmail",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "contactPhone",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "eventType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "eventDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "estimatedGuests",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "estimatedValue",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "status",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "new"
          },
          "modifiers": []
        },
        {
          "name": "assignedTo",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "convertedToClientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "convertedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isConverted",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "convertedToClientId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "convertedAt"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isHighValue",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "estimatedValue"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 10000
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isOpen",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "new"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "contacted"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "qualified"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "proposal"
                  }
                }
              ]
            }
          },
          "dependencies": []
        },
        {
          "name": "isArchived",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "deletedAt"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "update",
        "convertToClient",
        "disqualify",
        "archive"
      ],
      "constraints": [
        {
          "name": "validStatus",
          "code": "validStatus",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "new"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "contacted"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "qualified"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "proposal"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "won"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "lost"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "disqualified"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "message": "Invalid lead status",
          "overrideable": false
        },
        {
          "name": "validContactName",
          "code": "validContactName",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "contactName"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "contactName"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Contact name is required",
          "overrideable": false
        },
        {
          "name": "positiveEstimatedValue",
          "code": "positiveEstimatedValue",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "estimatedValue"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Estimated value must be non-negative",
          "overrideable": false
        },
        {
          "name": "warnHighValueUnassigned",
          "code": "warnHighValueUnassigned",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "isHighValue"
            },
            "right": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "assignedTo"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "Menu",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "isActive",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": true
          },
          "modifiers": []
        },
        {
          "name": "basePrice",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "pricePerPerson",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "minGuests",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "maxGuests",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "hasPricePerPerson",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "pricePerPerson"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasGuestConstraints",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "or",
            "left": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "minGuests"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "maxGuests"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "guestRangeValid",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "maxGuests"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "minGuests"
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "update",
        "activate",
        "deactivate",
        "create"
      ],
      "constraints": [
        {
          "name": "validName",
          "code": "validName",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "name"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "name"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Menu name is required",
          "overrideable": false
        },
        {
          "name": "validGuestRange",
          "code": "validGuestRange",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "maxGuests"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "minGuests"
            }
          },
          "severity": "block",
          "message": "Maximum guests must be >= minimum guests",
          "overrideable": false
        },
        {
          "name": "positiveMinGuests",
          "code": "positiveMinGuests",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "minGuests"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Minimum guests must be non-negative",
          "overrideable": false
        },
        {
          "name": "positivePrices",
          "code": "positivePrices",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "basePrice"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": ">=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "pricePerPerson"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            }
          },
          "severity": "block",
          "message": "Prices must be non-negative",
          "overrideable": false
        },
        {
          "name": "warnZeroPrice",
          "code": "warnZeroPrice",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "pricePerPerson"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "basePrice"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "MenuDish",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "menuId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "dishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "course",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "sortOrder",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "isOptional",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": false
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [],
      "relationships": [],
      "commands": [
        "updateCourse",
        "create",
        "remove"
      ],
      "constraints": [
        {
          "name": "validMenuId",
          "code": "validMenuId",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "menuId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "menuId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Menu ID is required",
          "overrideable": false
        },
        {
          "name": "validDishId",
          "code": "validDishId",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "dishId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "dishId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Dish ID is required",
          "overrideable": false
        },
        {
          "name": "positiveSortOrder",
          "code": "positiveSortOrder",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "sortOrder"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Sort order must be non-negative",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "Notification",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "recipientEmployeeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "notificationType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "body",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "actionUrl",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "isRead",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": false
          },
          "modifiers": []
        },
        {
          "name": "readAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "correlationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isUnread",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "isRead"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "boolean",
                "value": false
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasAction",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "actionUrl"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "actionUrl"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasCorrelation",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "correlationId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "correlationId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "markRead",
        "markDismissed",
        "remove"
      ],
      "constraints": [
        {
          "name": "validTitle",
          "code": "validTitle",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "title"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "title"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Notification title is required",
          "overrideable": false
        },
        {
          "name": "validRecipient",
          "code": "validRecipient",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "recipientEmployeeId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "recipientEmployeeId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Recipient employee ID is required",
          "overrideable": false
        },
        {
          "name": "validNotificationType",
          "code": "validNotificationType",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "notificationType"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "notificationType"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Notification type is required",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "OverrideAudit",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "entityType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "entityId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "constraintId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "guardExpression",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "overriddenBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "overrideReason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "authorizedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "authorizedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isAuthorized",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "authorizedBy"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isPendingAuthorization",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "authorizedBy"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasGuardExpression",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "guardExpression"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "authorize"
      ],
      "constraints": [
        {
          "name": "requireEntityType",
          "code": "requireEntityType",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "entityType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "severity": "block",
          "message": "Entity type is required",
          "overrideable": false
        },
        {
          "name": "requireEntityId",
          "code": "requireEntityId",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "entityId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "severity": "block",
          "message": "Entity ID is required",
          "overrideable": false
        },
        {
          "name": "requireConstraintId",
          "code": "requireConstraintId",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "constraintId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "severity": "block",
          "message": "Constraint ID is required",
          "overrideable": false
        },
        {
          "name": "requireOverriddenBy",
          "code": "requireOverriddenBy",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "overriddenBy"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "severity": "block",
          "message": "Overridden by user is required",
          "overrideable": false
        },
        {
          "name": "requireOverrideReason",
          "code": "requireOverrideReason",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "overrideReason"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "severity": "block",
          "message": "Override reason is required",
          "overrideable": false
        },
        {
          "name": "cannotAuthorizeTwice",
          "code": "cannotAuthorizeTwice",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "authorizedBy"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "severity": "warn",
          "message": "Override already authorized",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "PrepComment",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "employeeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "commentText",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "isResolved",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": false
          },
          "modifiers": []
        },
        {
          "name": "resolvedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "resolvedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isActive",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "deletedAt"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasBeenResolved",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "resolvedAt"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "resolve",
        "unresolve",
        "softDelete"
      ],
      "constraints": [
        {
          "name": "blockDeleteIfResolved",
          "code": "blockDeleteIfResolved",
          "expression": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isResolved"
          },
          "severity": "block",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "PrepList",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "batchMultiplier",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 1
          },
          "modifiers": []
        },
        {
          "name": "dietaryRestrictions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "status",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "draft"
          },
          "modifiers": []
        },
        {
          "name": "totalItems",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "totalEstimatedTime",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "generatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "finalizedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "isActive",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": true
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isDraft",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "draft"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isFinalized",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "finalized"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isCompleted",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "completed"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasItems",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "totalItems"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "avgTimePerItem",
          "type": {
            "name": "number",
            "nullable": false
          },
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "totalItems"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "consequent": {
              "kind": "binary",
              "operator": "/",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "totalEstimatedTime"
              },
              "right": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "totalItems"
              }
            },
            "alternate": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "update",
        "updateBatchMultiplier",
        "finalize",
        "activate",
        "deactivate",
        "markCompleted",
        "cancel",
        "create",
        "createFromSeed",
        "reopen"
      ],
      "constraints": [
        {
          "name": "validName",
          "code": "validName",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "name"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "name"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Prep list name is required",
          "overrideable": false
        },
        {
          "name": "validEventId",
          "code": "validEventId",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "eventId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "eventId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Event ID is required",
          "overrideable": false
        },
        {
          "name": "validBatchMultiplier",
          "code": "validBatchMultiplier",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "batchMultiplier"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Batch multiplier must be positive",
          "overrideable": false
        },
        {
          "name": "validStatus",
          "code": "validStatus",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "draft"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "finalized"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "completed"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "cancelled"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "message": "Status must be valid",
          "overrideable": false
        },
        {
          "name": "positiveTotalItems",
          "code": "positiveTotalItems",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "totalItems"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Total items must be non-negative",
          "overrideable": false
        },
        {
          "name": "positiveTotalTime",
          "code": "positiveTotalTime",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "totalEstimatedTime"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Total estimated time must be non-negative",
          "overrideable": false
        },
        {
          "name": "warnZeroItems",
          "code": "warnZeroItems",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "totalItems"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "PrepListItem",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "stationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "stationName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "ingredientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "ingredientName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "baseQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "baseUnit",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "scaledQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "scaledUnit",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "isOptional",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": false
          },
          "modifiers": []
        },
        {
          "name": "preparationNotes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "allergens",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "dietarySubstitutions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "dishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "dishName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "recipeVersionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "sortOrder",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "isCompleted",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": false
          },
          "modifiers": []
        },
        {
          "name": "completedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "completedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "hasAllergens",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "allergens"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "allergens"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasDietarySubstitutions",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "dietarySubstitutions"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "dietarySubstitutions"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isRequired",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "isOptional"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "boolean",
                "value": false
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "updateQuantity",
        "updateStation",
        "updatePrepNotes",
        "markCompleted",
        "markUncompleted",
        "create"
      ],
      "constraints": [
        {
          "name": "validPrepListId",
          "code": "validPrepListId",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "prepListId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "prepListId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Prep list ID is required",
          "overrideable": false
        },
        {
          "name": "validStationName",
          "code": "validStationName",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "stationName"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "stationName"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Station name is required",
          "overrideable": false
        },
        {
          "name": "validIngredientId",
          "code": "validIngredientId",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "ingredientId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "ingredientId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Ingredient ID is required",
          "overrideable": false
        },
        {
          "name": "validIngredientName",
          "code": "validIngredientName",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "ingredientName"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "ingredientName"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Ingredient name is required",
          "overrideable": false
        },
        {
          "name": "positiveSortOrder",
          "code": "positiveSortOrder",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "sortOrder"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Sort order must be non-negative",
          "overrideable": false
        },
        {
          "name": "positiveScaledQuantity",
          "code": "positiveScaledQuantity",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "scaledQuantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Scaled quantity must be non-negative",
          "overrideable": false
        },
        {
          "name": "warnMajorAllergen",
          "code": "warnMajorAllergen",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "allergens"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "or",
              "left": {
                "kind": "binary",
                "operator": "or",
                "left": {
                  "kind": "binary",
                  "operator": "or",
                  "left": {
                    "kind": "binary",
                    "operator": "or",
                    "left": {
                      "kind": "binary",
                      "operator": "contains",
                      "left": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "allergens"
                      },
                      "right": {
                        "kind": "literal",
                        "value": {
                          "kind": "string",
                          "value": "nuts"
                        }
                      }
                    },
                    "right": {
                      "kind": "binary",
                      "operator": "contains",
                      "left": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "allergens"
                      },
                      "right": {
                        "kind": "literal",
                        "value": {
                          "kind": "string",
                          "value": "dairy"
                        }
                      }
                    }
                  },
                  "right": {
                    "kind": "binary",
                    "operator": "contains",
                    "left": {
                      "kind": "member",
                      "object": {
                        "kind": "identifier",
                        "name": "self"
                      },
                      "property": "allergens"
                    },
                    "right": {
                      "kind": "literal",
                      "value": {
                        "kind": "string",
                        "value": "gluten"
                      }
                    }
                  }
                },
                "right": {
                  "kind": "binary",
                  "operator": "contains",
                  "left": {
                    "kind": "member",
                    "object": {
                      "kind": "identifier",
                      "name": "self"
                    },
                    "property": "allergens"
                  },
                  "right": {
                    "kind": "literal",
                    "value": {
                      "kind": "string",
                      "value": "shellfish"
                    }
                  }
                }
              },
              "right": {
                "kind": "binary",
                "operator": "contains",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "allergens"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "eggs"
                  }
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "PrepMethod",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "estimatedDurationMinutes",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "requiresCertification",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "isActive",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": true
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "hasDuration",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "estimatedDurationMinutes"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasCertification",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "requiresCertification"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isDeactivated",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "isActive"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "boolean",
                "value": false
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "update",
        "deactivate"
      ],
      "constraints": [
        {
          "name": "requireName",
          "code": "requireName",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "severity": "block",
          "message": "Prep method name is required",
          "overrideable": false
        },
        {
          "name": "positiveDuration",
          "code": "positiveDuration",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "estimatedDurationMinutes"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Estimated duration cannot be negative",
          "overrideable": false
        },
        {
          "name": "warnNoDuration",
          "code": "warnNoDuration",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "estimatedDurationMinutes"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "isActive"
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "PrepTaskPlanWorkflow",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "idempotencyKey",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "status",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "created"
          },
          "modifiers": []
        },
        {
          "name": "currentStep",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "totalSteps",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 5
          },
          "modifiers": []
        },
        {
          "name": "generationOptions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "{}"
          },
          "modifiers": []
        },
        {
          "name": "generatedTasks",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "[]"
          },
          "modifiers": []
        },
        {
          "name": "reviewedTasks",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "[]"
          },
          "modifiers": []
        },
        {
          "name": "approvedTaskIds",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "[]"
          },
          "modifiers": []
        },
        {
          "name": "rejectedTaskIds",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "[]"
          },
          "modifiers": []
        },
        {
          "name": "instantiatedTaskIds",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "[]"
          },
          "modifiers": []
        },
        {
          "name": "scheduledWindows",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "{}"
          },
          "modifiers": []
        },
        {
          "name": "constraintOutcomes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "[]"
          },
          "modifiers": []
        },
        {
          "name": "errors",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "[]"
          },
          "modifiers": []
        },
        {
          "name": "warnings",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "[]"
          },
          "modifiers": []
        },
        {
          "name": "generatedCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "approvedCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "instantiatedCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "reviewedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "reviewedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "approvedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "approvedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "startedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "completedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isActive",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "generating"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "reviewing"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "approving"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "instantiating"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "scheduling"
                  }
                }
              ]
            }
          },
          "dependencies": []
        },
        {
          "name": "isCompleted",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "completed"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isFailed",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "failed"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isAwaitingReview",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "awaiting_review"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isAwaitingApproval",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "awaiting_approval"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "canReview",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "awaiting_review"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "canApprove",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "awaiting_approval"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "canRetry",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "failed"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "progress",
          "type": {
            "name": "number",
            "nullable": false
          },
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "totalSteps"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "consequent": {
              "kind": "binary",
              "operator": "*",
              "left": {
                "kind": "binary",
                "operator": "/",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "currentStep"
                },
                "right": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "totalSteps"
                }
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 100
                }
              }
            },
            "alternate": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "startGenerating",
        "completeGeneration",
        "startReviewing",
        "completeReview",
        "startApproving",
        "approvePlan",
        "rejectPlan",
        "startInstantiating",
        "completeInstantiation",
        "startScheduling",
        "completeScheduling",
        "fail",
        "cancel",
        "retry",
        "quickApprove"
      ],
      "constraints": [
        {
          "name": "validStatus",
          "code": "validStatus",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "created"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "generating"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "awaiting_review"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "reviewing"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "awaiting_approval"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "approving"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "instantiating"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "scheduling"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "completed"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "failed"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "cancelled"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "overrideable": false
        },
        {
          "name": "validStep",
          "code": "validStep",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "currentStep"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "<=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "currentStep"
              },
              "right": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "totalSteps"
              }
            }
          },
          "severity": "block",
          "overrideable": false
        },
        {
          "name": "hasIdempotencyKey",
          "code": "hasIdempotencyKey",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "idempotencyKey"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "severity": "block",
          "message": "Idempotency key is required for workflow tracking",
          "overrideable": false
        },
        {
          "name": "hasEventId",
          "code": "hasEventId",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "severity": "block",
          "message": "Event ID is required for task generation",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "PrepTask",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "taskType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "prep"
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "status",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "open"
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "stationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "claimedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "claimedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "quantityTotal",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "quantityCompleted",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "quantityUnitId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "servingsTotal",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "startByDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "dueByDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "priority",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 5
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "ingredients",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isClaimed",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "claimedBy"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isOverdue",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "and",
              "left": {
                "kind": "binary",
                "operator": "!=",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "dueByDate"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "number",
                    "value": 0
                  }
                }
              },
              "right": {
                "kind": "binary",
                "operator": ">",
                "left": {
                  "kind": "call",
                  "callee": {
                    "kind": "identifier",
                    "name": "now"
                  },
                  "args": []
                },
                "right": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "dueByDate"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "status"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "done"
                }
              }
            }
          },
          "dependencies": [
            "now"
          ]
        },
        {
          "name": "isCompleted",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "done"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "percentComplete",
          "type": {
            "name": "number",
            "nullable": false
          },
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityTotal"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "consequent": {
              "kind": "binary",
              "operator": "*",
              "left": {
                "kind": "binary",
                "operator": "/",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "quantityCompleted"
                },
                "right": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "quantityTotal"
                }
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 100
                }
              }
            },
            "alternate": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isUrgent",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "<=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "priority"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 2
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isHighPriority",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "<=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "priority"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 3
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "claim",
        "unclaim",
        "start",
        "complete",
        "release",
        "reassign",
        "updateQuantity",
        "cancel",
        "create",
        "updateStatus",
        "updatePriority",
        "updateAssignment",
        "updateDueDate"
      ],
      "constraints": [
        {
          "name": "validStatus",
          "code": "validStatus",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "open"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "pending"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "in_progress"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "done"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "canceled"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "message": "Invalid task status",
          "overrideable": false
        },
        {
          "name": "positiveQuantity",
          "code": "positiveQuantity",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityTotal"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Total quantity must be non-negative",
          "overrideable": false
        },
        {
          "name": "validPriority",
          "code": "validPriority",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "priority"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 1
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "<=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "priority"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 5
                }
              }
            }
          },
          "severity": "block",
          "message": "Priority must be between 1 (critical) and 5 (low)",
          "overrideable": false
        },
        {
          "name": "warnOverdue",
          "code": "warnOverdue",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "isOverdue"
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "status"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "done"
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "policies": [],
      "transitions": [
        {
          "property": "status",
          "from": "open",
          "to": [
            "in_progress",
            "canceled"
          ]
        },
        {
          "property": "status",
          "from": "pending",
          "to": [
            "in_progress",
            "canceled"
          ]
        },
        {
          "property": "status",
          "from": "in_progress",
          "to": [
            "done",
            "open",
            "canceled"
          ]
        }
      ]
    },
    {
      "name": "Proposal",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "proposalNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "leadId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "eventDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "eventType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "guestCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "venueName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "venueAddress",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "subtotal",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "taxRate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "taxAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "discountAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "total",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "status",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "draft"
          },
          "modifiers": []
        },
        {
          "name": "validUntil",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "sentAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "viewedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "acceptedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "rejectedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "termsAndConditions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "lineItemCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isDraft",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "draft"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isSent",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "or",
            "left": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "status"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "sent"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "status"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "viewed"
                }
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isAccepted",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "accepted"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isRejected",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "rejected"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isWithdrawn",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "withdrawn"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isExpired",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "validUntil"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "<",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "validUntil"
              },
              "right": {
                "kind": "call",
                "callee": {
                  "kind": "identifier",
                  "name": "now"
                },
                "args": []
              }
            }
          },
          "dependencies": [
            "now"
          ]
        },
        {
          "name": "isFinalized",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "accepted"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "rejected"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "withdrawn"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "expired"
                  }
                }
              ]
            }
          },
          "dependencies": []
        },
        {
          "name": "hasLineItems",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "lineItemCount"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasDiscount",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "discountAmount"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "update",
        "send",
        "markViewed",
        "accept",
        "reject",
        "withdraw"
      ],
      "constraints": [
        {
          "name": "validStatus",
          "code": "validStatus",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "draft"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "sent"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "viewed"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "accepted"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "rejected"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "withdrawn"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "expired"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "message": "Invalid proposal status",
          "overrideable": false
        },
        {
          "name": "validTitle",
          "code": "validTitle",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "title"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "title"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Proposal title is required",
          "overrideable": false
        },
        {
          "name": "validProposalNumber",
          "code": "validProposalNumber",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "proposalNumber"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "proposalNumber"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Proposal number is required",
          "overrideable": false
        },
        {
          "name": "positiveSubtotal",
          "code": "positiveSubtotal",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "subtotal"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Subtotal must be non-negative",
          "overrideable": false
        },
        {
          "name": "positiveTaxRate",
          "code": "positiveTaxRate",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "taxRate"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Tax rate must be non-negative",
          "overrideable": false
        },
        {
          "name": "positiveTotal",
          "code": "positiveTotal",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "total"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Total must be non-negative",
          "overrideable": false
        },
        {
          "name": "warnExpiringSoon",
          "code": "warnExpiringSoon",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "and",
              "left": {
                "kind": "binary",
                "operator": ">",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "validUntil"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "number",
                    "value": 0
                  }
                }
              },
              "right": {
                "kind": "binary",
                "operator": ">",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "validUntil"
                },
                "right": {
                  "kind": "call",
                  "callee": {
                    "kind": "identifier",
                    "name": "now"
                  },
                  "args": []
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "status"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "sent"
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "ProposalLineItem",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "proposalId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "itemType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "unitOfMeasure",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "unitPrice",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "total",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "totalPrice",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "sortOrder",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "calculatedTotal",
          "type": {
            "name": "number",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "*",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantity"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "unitPrice"
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "update",
        "remove"
      ],
      "constraints": [
        {
          "name": "validProposalId",
          "code": "validProposalId",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "proposalId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "proposalId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Proposal ID is required",
          "overrideable": false
        },
        {
          "name": "validDescription",
          "code": "validDescription",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "description"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "description"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Description is required",
          "overrideable": false
        },
        {
          "name": "positiveQuantity",
          "code": "positiveQuantity",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Quantity must be positive",
          "overrideable": false
        },
        {
          "name": "positiveUnitPrice",
          "code": "positiveUnitPrice",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "unitPrice"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Unit price must be non-negative",
          "overrideable": false
        },
        {
          "name": "positiveSortOrder",
          "code": "positiveSortOrder",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "sortOrder"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Sort order must be non-negative",
          "overrideable": false
        },
        {
          "name": "warnZeroPrice",
          "code": "warnZeroPrice",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "unitPrice"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "PurchaseOrder",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "poNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "vendorId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "orderDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "expectedDeliveryDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "actualDeliveryDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "status",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "draft"
          },
          "modifiers": []
        },
        {
          "name": "subtotal",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "taxAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "shippingAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "total",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "submittedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "submittedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "receivedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "receivedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "itemCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "items",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isDraft",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "draft"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isSubmitted",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "submitted"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isApproved",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "approved"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isOrdered",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "ordered"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isReceived",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "received"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isCancelled",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "cancelled"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasItems",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "itemCount"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isEditable",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "draft"
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "submit",
        "approve",
        "reject",
        "cancel",
        "markOrdered",
        "markReceived"
      ],
      "constraints": [
        {
          "name": "validStatus",
          "code": "validStatus",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "draft"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "submitted"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "approved"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "rejected"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "ordered"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "partially_received"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "received"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "cancelled"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "message": "Invalid purchase order status",
          "overrideable": false
        },
        {
          "name": "blockEditAfterSubmit",
          "code": "blockEditAfterSubmit",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "draft"
              }
            }
          },
          "severity": "block",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "PurchaseOrderItem",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "purchaseOrderId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "quantityOrdered",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "quantityReceived",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "unitId",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "unitCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "totalCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "qualityStatus",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "pending"
          },
          "modifiers": []
        },
        {
          "name": "discrepancyType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "discrepancyAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isFullyReceived",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityReceived"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityOrdered"
            }
          },
          "dependencies": []
        },
        {
          "name": "isPartiallyReceived",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityReceived"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "<",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityReceived"
              },
              "right": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityOrdered"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasDiscrepancy",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "discrepancyType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "update",
        "remove"
      ],
      "constraints": [
        {
          "name": "positiveQuantity",
          "code": "positiveQuantity",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityOrdered"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Quantity ordered must be positive",
          "overrideable": false
        },
        {
          "name": "positiveUnitCost",
          "code": "positiveUnitCost",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "unitCost"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Unit cost cannot be negative",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "Recipe",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "cuisineType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "tags",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "isActive",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": true
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "hasVersion",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          },
          "dependencies": []
        },
        {
          "name": "tagCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "length"
            },
            "args": [
              {
                "kind": "call",
                "callee": {
                  "kind": "identifier",
                  "name": "split"
                },
                "args": [
                  {
                    "kind": "member",
                    "object": {
                      "kind": "identifier",
                      "name": "self"
                    },
                    "property": "tags"
                  },
                  {
                    "kind": "literal",
                    "value": {
                      "kind": "string",
                      "value": ","
                    }
                  }
                ]
              }
            ]
          },
          "dependencies": [
            "length",
            "split"
          ]
        }
      ],
      "relationships": [],
      "commands": [
        "update",
        "deactivate",
        "activate",
        "create"
      ],
      "constraints": [
        {
          "name": "validName",
          "code": "validName",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "name"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "name"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Recipe name is required",
          "overrideable": false
        },
        {
          "name": "validTags",
          "code": "validTags",
          "expression": {
            "kind": "binary",
            "operator": "or",
            "left": {
              "kind": "binary",
              "operator": "or",
              "left": {
                "kind": "binary",
                "operator": "==",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "tags"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "null"
                  }
                }
              },
              "right": {
                "kind": "binary",
                "operator": "==",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "tags"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": ""
                  }
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "<=",
              "left": {
                "kind": "call",
                "callee": {
                  "kind": "identifier",
                  "name": "length"
                },
                "args": [
                  {
                    "kind": "call",
                    "callee": {
                      "kind": "identifier",
                      "name": "split"
                    },
                    "args": [
                      {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "tags"
                      },
                      {
                        "kind": "literal",
                        "value": {
                          "kind": "string",
                          "value": ","
                        }
                      }
                    ]
                  }
                ]
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 20
                }
              }
            }
          },
          "severity": "block",
          "message": "Recipe cannot have more than 20 tags",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "RecipeVersion",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "recipeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "versionNumber",
          "type": {
            "name": "number",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "cuisineType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "tags",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "yieldQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 1
          },
          "modifiers": []
        },
        {
          "name": "yieldUnitId",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 1
          },
          "modifiers": []
        },
        {
          "name": "yieldDescription",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "prepTimeMinutes",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "cookTimeMinutes",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "restTimeMinutes",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "difficultyLevel",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 1
          },
          "modifiers": []
        },
        {
          "name": "instructions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "ingredientCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "stepCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "totalCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "costPerYield",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "totalTimeMinutes",
          "type": {
            "name": "number",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "+",
            "left": {
              "kind": "binary",
              "operator": "+",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "prepTimeMinutes"
              },
              "right": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "cookTimeMinutes"
              }
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "restTimeMinutes"
            }
          },
          "dependencies": []
        },
        {
          "name": "isVersion1",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "versionNumber"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 1
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isHighDifficulty",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "difficultyLevel"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 4
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "restore",
        "updateCosts"
      ],
      "constraints": [
        {
          "name": "validVersionNumber",
          "code": "validVersionNumber",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "versionNumber"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Version number must be positive",
          "overrideable": false
        },
        {
          "name": "positiveYield",
          "code": "positiveYield",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "yieldQuantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Yield quantity must be positive",
          "overrideable": false
        },
        {
          "name": "validDifficulty",
          "code": "validDifficulty",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "difficultyLevel"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 1
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "<=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "difficultyLevel"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 5
                }
              }
            }
          },
          "severity": "block",
          "message": "Difficulty must be between 1 (easy) and 5 (expert)",
          "overrideable": false
        },
        {
          "name": "validTimes",
          "code": "validTimes",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "and",
              "left": {
                "kind": "binary",
                "operator": ">=",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "prepTimeMinutes"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "number",
                    "value": 0
                  }
                }
              },
              "right": {
                "kind": "binary",
                "operator": ">=",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "cookTimeMinutes"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "number",
                    "value": 0
                  }
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": ">=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "restTimeMinutes"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            }
          },
          "severity": "block",
          "message": "Time values must be non-negative",
          "overrideable": false
        },
        {
          "name": "nonNegativeCost",
          "code": "nonNegativeCost",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "totalCost"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Total cost cannot be negative",
          "overrideable": false
        },
        {
          "name": "warnLongRecipe",
          "code": "warnLongRecipe",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "totalTimeMinutes"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 480
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "RecipeIngredient",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "recipeVersionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "ingredientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "unitId",
          "type": {
            "name": "number",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "sortOrder",
          "type": {
            "name": "number",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "preparationNotes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "isOptional",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": false
          },
          "modifiers": []
        },
        {
          "name": "wasteFactor",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 1
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [],
      "relationships": [],
      "commands": [
        "updateQuantity",
        "updateWasteFactor",
        "create",
        "remove"
      ],
      "constraints": [
        {
          "name": "positiveQuantity",
          "code": "positiveQuantity",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Ingredient quantity must be positive",
          "overrideable": false
        },
        {
          "name": "validOrder",
          "code": "validOrder",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "sortOrder"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Sort order must be positive",
          "overrideable": false
        },
        {
          "name": "validWasteFactor",
          "code": "validWasteFactor",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "wasteFactor"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Waste factor must be greater than 0",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "RecipeStep",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "recipeVersionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "stepNumber",
          "type": {
            "name": "number",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "instruction",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "durationMinutes",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "temperatureValue",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "temperatureUnit",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "equipmentNeeded",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "tips",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "videoUrl",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "imageUrl",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [],
      "relationships": [],
      "commands": [
        "create",
        "updateInstruction",
        "remove"
      ],
      "constraints": [
        {
          "name": "positiveStepNumber",
          "code": "positiveStepNumber",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "stepNumber"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Step number must be positive",
          "overrideable": false
        },
        {
          "name": "validInstruction",
          "code": "validInstruction",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "instruction"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "instruction"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Instruction is required",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "RolePolicy",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "roleId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "roleName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "permissions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "[]"
          },
          "modifiers": []
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "isActive",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": true
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isDeleted",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "deletedAt"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasPermissions",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "permissions"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "[]"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "permissions"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "update",
        "grant",
        "revoke"
      ],
      "constraints": [
        {
          "name": "requireRole",
          "code": "requireRole",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "roleId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "roleId"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Role ID is required",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "Schedule",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "scheduleDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "status",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "draft"
          },
          "modifiers": []
        },
        {
          "name": "publishedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "publishedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "shiftCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isDraft",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "draft"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isPublished",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "published"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isClosed",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "closed"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasShifts",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "shiftCount"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isEditable",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "draft"
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "update",
        "release",
        "close"
      ],
      "constraints": [
        {
          "name": "validStatus",
          "code": "validStatus",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "draft"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "published"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "closed"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "message": "Invalid schedule status",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "ScheduleShift",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "scheduleId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "employeeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "shiftStart",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "shiftEnd",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "roleDuringShift",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "durationHours",
          "type": {
            "name": "number",
            "nullable": false
          },
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "shiftEnd"
              },
              "right": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "shiftStart"
              }
            },
            "consequent": {
              "kind": "binary",
              "operator": "/",
              "left": {
                "kind": "binary",
                "operator": "-",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "shiftEnd"
                },
                "right": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "shiftStart"
                }
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 3600000
                }
              }
            },
            "alternate": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isAssigned",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "employeeId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasRole",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "roleDuringShift"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "update",
        "remove"
      ],
      "constraints": [
        {
          "name": "validShiftTimes",
          "code": "validShiftTimes",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "shiftEnd"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "shiftStart"
            }
          },
          "severity": "block",
          "message": "Shift end must be after shift start",
          "overrideable": false
        },
        {
          "name": "warnLongShift",
          "code": "warnLongShift",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "durationHours"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 12
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "Shipment",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "shipmentNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "status",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "draft"
          },
          "modifiers": []
        },
        {
          "name": "purchaseOrderId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "supplierId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "scheduledDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "shippedDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "estimatedDeliveryDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "actualDeliveryDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "totalItems",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "shippingCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "totalValue",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "trackingNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "carrier",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "shippingMethod",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "deliveredBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "receivedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "signature",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "internalNotes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "reference",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isDraft",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "draft"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isScheduled",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "scheduled"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isInTransit",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "in_transit"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isDelivered",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "delivered"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isCancelled",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "cancelled"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasItems",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "totalItems"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasTracking",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "trackingNumber"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "update",
        "schedule",
        "startPreparing",
        "ship",
        "markDelivered",
        "cancel"
      ],
      "constraints": [
        {
          "name": "validStatus",
          "code": "validStatus",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "draft"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "scheduled"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "preparing"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "in_transit"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "delivered"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "returned"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "cancelled"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "message": "Invalid shipment status",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "ShipmentItem",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "shipmentId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "quantityShipped",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "quantityReceived",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "quantityDamaged",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "unitId",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "unitCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "totalCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "condition",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "good"
          },
          "modifiers": []
        },
        {
          "name": "conditionNotes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "lotNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "expirationDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isFullyReceived",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityReceived"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityShipped"
            }
          },
          "dependencies": []
        },
        {
          "name": "hasDamage",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityDamaged"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "receivedPercentage",
          "type": {
            "name": "number",
            "nullable": false
          },
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityShipped"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "consequent": {
              "kind": "binary",
              "operator": "*",
              "left": {
                "kind": "binary",
                "operator": "/",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "quantityReceived"
                },
                "right": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "quantityShipped"
                }
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 100
                }
              }
            },
            "alternate": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "updateReceived"
      ],
      "constraints": [
        {
          "name": "positiveQuantityShipped",
          "code": "positiveQuantityShipped",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityShipped"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Quantity shipped cannot be negative",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "Station",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "stationType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "prep-station"
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "capacitySimultaneousTasks",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 1
          },
          "modifiers": []
        },
        {
          "name": "equipmentList",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "isActive",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": true
          },
          "modifiers": []
        },
        {
          "name": "currentTaskCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isAtCapacity",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "currentTaskCount"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "capacitySimultaneousTasks"
            }
          },
          "dependencies": []
        },
        {
          "name": "isOverCapacity",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "currentTaskCount"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "capacitySimultaneousTasks"
            }
          },
          "dependencies": []
        },
        {
          "name": "capacityRemaining",
          "type": {
            "name": "number",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "-",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "capacitySimultaneousTasks"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "currentTaskCount"
            }
          },
          "dependencies": []
        },
        {
          "name": "availablePercentage",
          "type": {
            "name": "number",
            "nullable": false
          },
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "capacitySimultaneousTasks"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "consequent": {
              "kind": "binary",
              "operator": "*",
              "left": {
                "kind": "binary",
                "operator": "/",
                "left": {
                  "kind": "binary",
                  "operator": "-",
                  "left": {
                    "kind": "member",
                    "object": {
                      "kind": "identifier",
                      "name": "self"
                    },
                    "property": "capacitySimultaneousTasks"
                  },
                  "right": {
                    "kind": "member",
                    "object": {
                      "kind": "identifier",
                      "name": "self"
                    },
                    "property": "currentTaskCount"
                  }
                },
                "right": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "capacitySimultaneousTasks"
                }
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 100
                }
              }
            },
            "alternate": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 100
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "assignTask",
        "removeTask",
        "updateCapacity",
        "deactivate",
        "activate",
        "updateEquipment",
        "create"
      ],
      "constraints": [
        {
          "name": "positiveCapacity",
          "code": "positiveCapacity",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "capacitySimultaneousTasks"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Station capacity must be positive",
          "overrideable": false
        },
        {
          "name": "validStationType",
          "code": "validStationType",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "stationType"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "hot-line"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "cold-prep"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "bakery"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "garnish"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "prep-station"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "message": "Invalid station type",
          "overrideable": false
        },
        {
          "name": "warnNearCapacity",
          "code": "warnNearCapacity",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "capacityRemaining"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 1
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "capacitySimultaneousTasks"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 1
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "TimeEntry",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "employeeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "shiftId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "clockIn",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "clockOut",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "breakMinutes",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "approvedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "approvedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isClockedIn",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "clockIn"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "clockOut"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isCompleted",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "clockIn"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "clockOut"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "totalMinutes",
          "type": {
            "name": "number",
            "nullable": false
          },
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "clockOut"
              },
              "right": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "clockIn"
              }
            },
            "consequent": {
              "kind": "binary",
              "operator": "/",
              "left": {
                "kind": "binary",
                "operator": "-",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "clockOut"
                },
                "right": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "clockIn"
                }
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 60000
                }
              }
            },
            "alternate": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "totalHours",
          "type": {
            "name": "number",
            "nullable": false
          },
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "totalMinutes"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "consequent": {
              "kind": "binary",
              "operator": "/",
              "left": {
                "kind": "binary",
                "operator": "-",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "totalMinutes"
                },
                "right": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "breakMinutes"
                }
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 60
                }
              }
            },
            "alternate": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isApproved",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "approvedBy"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "clockIn",
        "clockOut",
        "addEntry"
      ],
      "constraints": [],
      "policies": []
    },
    {
      "name": "TimecardEditRequest",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "timeEntryId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "employeeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "requestedClockIn",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "requestedClockOut",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "requestedBreakMinutes",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "status",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "pending"
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isPending",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "pending"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isApproved",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "approved"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isRejected",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "rejected"
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isProcessed",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "pending"
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "approve",
        "reject"
      ],
      "constraints": [
        {
          "name": "validStatus",
          "code": "validStatus",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "pending"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "approved"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "rejected"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "message": "Invalid edit request status",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "User",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "email",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "firstName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "lastName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "role",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "staff"
          },
          "modifiers": []
        },
        {
          "name": "authUserId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "employeeNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "phone",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "employmentType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "full_time"
          },
          "modifiers": []
        },
        {
          "name": "hourlyRate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "salaryAnnual",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "hireDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "terminationDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "isActive",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": true
          },
          "modifiers": []
        },
        {
          "name": "avatarUrl",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "roleId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "fullName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "+",
            "left": {
              "kind": "binary",
              "operator": "+",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "firstName"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": " "
                }
              }
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "lastName"
            }
          },
          "dependencies": []
        },
        {
          "name": "isTerminated",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "terminationDate"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isHourly",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "or",
            "left": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "employmentType"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "full_time"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "employmentType"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "part_time"
                }
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isContractor",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "employmentType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "contractor"
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "update",
        "deactivate",
        "terminate",
        "updateRole"
      ],
      "constraints": [
        {
          "name": "validRole",
          "code": "validRole",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "role"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "staff"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "kitchen_staff"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "kitchen_lead"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "manager"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "admin"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "message": "Invalid user role",
          "overrideable": false
        },
        {
          "name": "validEmploymentType",
          "code": "validEmploymentType",
          "expression": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "employmentType"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "full_time"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "part_time"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "contractor"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "temp"
                  }
                }
              ]
            }
          },
          "severity": "block",
          "message": "Invalid employment type",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "WasteEntry",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "inventoryItemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "reasonId",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "unitId",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "loggedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "loggedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "unitCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "totalCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "hasLocation",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "locationId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasEvent",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasCost",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "unitCost"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isDeleted",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "deletedAt"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "update",
        "softDelete"
      ],
      "constraints": [
        {
          "name": "requireInventoryItem",
          "code": "requireInventoryItem",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "inventoryItemId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "severity": "block",
          "message": "Inventory item is required",
          "overrideable": false
        },
        {
          "name": "requireReason",
          "code": "requireReason",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "reasonId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Waste reason is required",
          "overrideable": false
        },
        {
          "name": "positiveQuantity",
          "code": "positiveQuantity",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Quantity must be positive",
          "overrideable": false
        },
        {
          "name": "positiveCost",
          "code": "positiveCost",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "unitCost"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "message": "Unit cost cannot be negative",
          "overrideable": false
        }
      ],
      "policies": []
    },
    {
      "name": "Workflow",
      "properties": [
        {
          "name": "id",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "modifiers": [
            "required"
          ]
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "triggerType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": ""
          },
          "modifiers": []
        },
        {
          "name": "triggerConfig",
          "type": {
            "name": "string",
            "nullable": false
          },
          "defaultValue": {
            "kind": "string",
            "value": "{}"
          },
          "modifiers": []
        },
        {
          "name": "isActive",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "defaultValue": {
            "kind": "boolean",
            "value": true
          },
          "modifiers": []
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "defaultValue": {
            "kind": "number",
            "value": 0
          },
          "modifiers": []
        }
      ],
      "computedProperties": [
        {
          "name": "isInactive",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "isActive"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "boolean",
                "value": false
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "isDeleted",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "deletedAt"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "dependencies": []
        },
        {
          "name": "hasTriggerConfig",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "and",
              "left": {
                "kind": "binary",
                "operator": "!=",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "triggerConfig"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "null"
                  }
                }
              },
              "right": {
                "kind": "binary",
                "operator": "!=",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "triggerConfig"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": ""
                  }
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "triggerConfig"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "{}"
                }
              }
            }
          },
          "dependencies": []
        }
      ],
      "relationships": [],
      "commands": [
        "create",
        "update",
        "activate",
        "deactivate"
      ],
      "constraints": [
        {
          "name": "validName",
          "code": "validName",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "name"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "name"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Workflow name is required",
          "overrideable": false
        },
        {
          "name": "validTriggerType",
          "code": "validTriggerType",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "triggerType"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "null"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "triggerType"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            }
          },
          "severity": "block",
          "message": "Trigger type is required",
          "overrideable": false
        }
      ],
      "policies": []
    }
  ],
  "stores": [
    {
      "entity": "AlertsConfig",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "AllergenWarning",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "BattleBoard",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "CateringOrder",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "ClientInteraction",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "Client",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "ClientContact",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "ClientPreference",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "CommandBoard",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "CommandBoardCard",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "CommandBoardGroup",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "CommandBoardConnection",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "CommandBoardLayout",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "Container",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "CycleCountSession",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "CycleCountRecord",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "VarianceReport",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "Dish",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "EventBudget",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "BudgetLineItem",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "EventContract",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "ContractSignature",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "EventDish",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "EventGuest",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "EventImportWorkflow",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "EventReport",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "Event",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "EventProfitability",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "EventSummary",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "EventStaff",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "Ingredient",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "InventoryItem",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "InventorySupplier",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "InventoryTransaction",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "KitchenTask",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "Lead",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "Menu",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "MenuDish",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "Notification",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "OverrideAudit",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "PrepComment",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "PrepList",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "PrepListItem",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "PrepMethod",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "PrepTaskPlanWorkflow",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "PrepTask",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "Proposal",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "ProposalLineItem",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "PurchaseOrder",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "PurchaseOrderItem",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "RecipeVersion",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "Recipe",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "RecipeIngredient",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "RecipeStep",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "RolePolicy",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "ScheduleShift",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "Schedule",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "Shipment",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "ShipmentItem",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "Station",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "TimeEntry",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "TimecardEditRequest",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "User",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "WasteEntry",
      "target": "memory",
      "config": {}
    },
    {
      "entity": "Workflow",
      "target": "memory",
      "config": {}
    }
  ],
  "events": [
    {
      "name": "AlertsConfigCreated",
      "channel": "alerts.config.created",
      "payload": [
        {
          "name": "alertsConfigId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "channel",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "destination",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "AlertsConfigUpdated",
      "channel": "alerts.config.updated",
      "payload": [
        {
          "name": "alertsConfigId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "channel",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "destination",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "AlertsConfigRemoved",
      "channel": "alerts.config.removed",
      "payload": [
        {
          "name": "alertsConfigId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "AllergenWarningCreated",
      "channel": "kitchen.allergen-warning.created",
      "payload": [
        {
          "name": "allergenWarningId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "dishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "warningType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "allergens",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "affectedGuests",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "severity",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "AllergenWarningAcknowledged",
      "channel": "kitchen.allergen-warning.acknowledged",
      "payload": [
        {
          "name": "allergenWarningId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "acknowledgedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "acknowledgedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "AllergenWarningResolved",
      "channel": "kitchen.allergen-warning.resolved",
      "payload": [
        {
          "name": "allergenWarningId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "resolvedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "AllergenWarningOverridden",
      "channel": "kitchen.allergen-warning.overridden",
      "payload": [
        {
          "name": "allergenWarningId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "overrideReason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "acknowledgedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "acknowledgedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "AllergenWarningDeleted",
      "channel": "kitchen.allergen-warning.deleted",
      "payload": [
        {
          "name": "allergenWarningId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "BattleBoardCreated",
      "channel": "events.battle_board.created",
      "payload": [
        {
          "name": "boardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "boardName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "boardType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "isTemplate",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "BattleBoardDishAdded",
      "channel": "events.battle_board.dish_added",
      "payload": [
        {
          "name": "boardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "boardName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "dishData",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "addedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "BattleBoardDishRemoved",
      "channel": "events.battle_board.dish_removed",
      "payload": [
        {
          "name": "boardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "boardName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "dishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "removedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "BattleBoardVoteCast",
      "channel": "events.battle_board.vote_cast",
      "payload": [
        {
          "name": "boardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "boardName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "voteData",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "votedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "BattleBoardOpened",
      "channel": "kitchen.battleboard.opened",
      "payload": [
        {
          "name": "boardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "boardName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "dishCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "openedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "BattleBoardVotingStarted",
      "channel": "kitchen.battleboard.voting_started",
      "payload": [
        {
          "name": "boardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "boardName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "startedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "BattleBoardFinalized",
      "channel": "events.battle_board.finalized",
      "payload": [
        {
          "name": "boardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "boardName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "finalizedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "CateringOrderCreated",
      "channel": "events.catering_order.created",
      "payload": [
        {
          "name": "orderId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "orderNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "customerId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "guestCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "deliveryDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "CateringOrderUpdated",
      "channel": "events.catering_order.updated",
      "payload": [
        {
          "name": "orderId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "orderNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "guestCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "CateringOrderConfirmed",
      "channel": "events.catering_order.confirmed",
      "payload": [
        {
          "name": "orderId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "orderNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "depositPaid",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "confirmedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "CateringOrderCancelled",
      "channel": "events.catering_order.cancelled",
      "payload": [
        {
          "name": "orderId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "orderNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "cancelledAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "CateringOrderPrepStarted",
      "channel": "catering.order.prep_started",
      "payload": [
        {
          "name": "orderId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "startedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "CateringOrderCompleted",
      "channel": "catering.order.completed",
      "payload": [
        {
          "name": "orderId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "completedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ClientInteractionCreated",
      "channel": "crm.interaction.created",
      "payload": [
        {
          "name": "interactionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "leadId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "employeeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "interactionType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "subject",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "followUpDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ClientInteractionUpdated",
      "channel": "crm.interaction.updated",
      "payload": [
        {
          "name": "interactionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "leadId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "subject",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "interactionType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "followUpDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ClientInteractionCompleted",
      "channel": "crm.interaction.completed",
      "payload": [
        {
          "name": "interactionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "leadId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "employeeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "subject",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "interactionType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "completionNotes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "completedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ClientCreated",
      "channel": "crm.client.created",
      "payload": [
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "clientType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "displayName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "source",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "assignedTo",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ClientUpdated",
      "channel": "crm.client.updated",
      "payload": [
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "displayName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ClientArchived",
      "channel": "crm.client.archived",
      "payload": [
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "displayName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "archivedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ClientReactivated",
      "channel": "crm.client.reactivated",
      "payload": [
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "displayName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reactivatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ClientContactCreated",
      "channel": "crm.client_contact.created",
      "payload": [
        {
          "name": "contactId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "fullName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "isPrimary",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ClientContactUpdated",
      "channel": "crm.client_contact.updated",
      "payload": [
        {
          "name": "contactId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "fullName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ClientContactRemoved",
      "channel": "crm.client_contact.removed",
      "payload": [
        {
          "name": "contactId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "fullName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "removedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ClientContactSetPrimary",
      "channel": "crm.client_contact.set_primary",
      "payload": [
        {
          "name": "contactId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "fullName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ClientPreferenceCreated",
      "channel": "crm.client_preference.created",
      "payload": [
        {
          "name": "preferenceId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "preferenceType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "preferenceKey",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ClientPreferenceUpdated",
      "channel": "crm.client_preference.updated",
      "payload": [
        {
          "name": "preferenceId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "preferenceType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "preferenceKey",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ClientPreferenceRemoved",
      "channel": "crm.client_preference.removed",
      "payload": [
        {
          "name": "preferenceId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "preferenceType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "preferenceKey",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "removedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "CommandBoardCreated",
      "channel": "board.command_board.created",
      "payload": [
        {
          "name": "boardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "status",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "isTemplate",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "CommandBoardUpdated",
      "channel": "board.command_board.updated",
      "payload": [
        {
          "name": "boardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "CommandBoardActivated",
      "channel": "board.command_board.activated",
      "payload": [
        {
          "name": "boardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "activatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "CommandBoardDeactivated",
      "channel": "board.command_board.deactivated",
      "payload": [
        {
          "name": "boardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "boardName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "deactivatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "CommandBoardCardCreated",
      "channel": "board.card.created",
      "payload": [
        {
          "name": "cardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "boardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "cardType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "status",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "positionX",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "positionY",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "CommandBoardCardUpdated",
      "channel": "board.card.updated",
      "payload": [
        {
          "name": "cardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "boardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldStatus",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newStatus",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "version",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "CommandBoardCardMoved",
      "channel": "board.card.moved",
      "payload": [
        {
          "name": "cardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "boardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldPositionX",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldPositionY",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newPositionX",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newPositionY",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "movedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "CommandBoardCardResized",
      "channel": "board.card.resized",
      "payload": [
        {
          "name": "cardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "boardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldWidth",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldHeight",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newWidth",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newHeight",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "resizedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "CommandBoardCardDeleted",
      "channel": "board.card.deleted",
      "payload": [
        {
          "name": "cardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "boardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "CommandBoardGroupCreated",
      "channel": "board.group.created",
      "payload": [
        {
          "name": "groupId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "boardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "color",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "CommandBoardGroupUpdated",
      "channel": "board.group.updated",
      "payload": [
        {
          "name": "groupId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "boardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "CommandBoardGroupDeleted",
      "channel": "board.group.deleted",
      "payload": [
        {
          "name": "groupId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "boardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "CommandBoardConnectionCreated",
      "channel": "board.connection.created",
      "payload": [
        {
          "name": "connectionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "boardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "fromCardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "toCardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "relationshipType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "CommandBoardConnectionDeleted",
      "channel": "board.connection.deleted",
      "payload": [
        {
          "name": "connectionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "boardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "fromCardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "toCardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "CommandBoardLayoutCreated",
      "channel": "board.layout.created",
      "payload": [
        {
          "name": "layoutId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "boardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "CommandBoardLayoutUpdated",
      "channel": "board.layout.updated",
      "payload": [
        {
          "name": "layoutId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "boardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "CommandBoardLayoutDeleted",
      "channel": "board.layout.deleted",
      "payload": [
        {
          "name": "layoutId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "boardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ContainerCreated",
      "channel": "kitchen.container.created",
      "payload": [
        {
          "name": "containerId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "containerType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "capacityVolumeMl",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "capacityWeightG",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "capacityPortions",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "isReusable",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ContainerUpdated",
      "channel": "kitchen.container.updated",
      "payload": [
        {
          "name": "containerId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "containerType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ContainerDeactivated",
      "channel": "kitchen.container.deactivated",
      "payload": [
        {
          "name": "containerId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "deactivatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "CycleCountSessionCreated",
      "channel": "inventory.cyclecount.session.created",
      "payload": [
        {
          "name": "sessionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "sessionName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "countType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdById",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "CycleCountSessionStarted",
      "channel": "inventory.cyclecount.session.started",
      "payload": [
        {
          "name": "sessionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "sessionName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "startedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "CycleCountSessionCompleted",
      "channel": "inventory.cyclecount.session.completed",
      "payload": [
        {
          "name": "sessionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "sessionName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalItems",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "countedItems",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalVariance",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "completedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "CycleCountSessionCancelled",
      "channel": "inventory.cyclecount.session.cancelled",
      "payload": [
        {
          "name": "sessionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "sessionName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "cancelledAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "CycleCountSessionFinalized",
      "channel": "inventory.cyclecount.session.finalized",
      "payload": [
        {
          "name": "sessionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "finalizedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "CycleCountRecordCreated",
      "channel": "inventory.cyclecount.record.created",
      "payload": [
        {
          "name": "recordId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "sessionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "expectedQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "countedQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "variance",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "countedById",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "CycleCountRecordUpdated",
      "channel": "inventory.cyclecount.record.updated",
      "payload": [
        {
          "name": "recordId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "sessionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "countedQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "variance",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "CycleCountRecordVerified",
      "channel": "inventory.cyclecount.record.verified",
      "payload": [
        {
          "name": "recordId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "sessionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "variance",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "variancePct",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "verifiedById",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "verifiedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "VarianceReportCreated",
      "channel": "inventory.variance.report.created",
      "payload": [
        {
          "name": "reportId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "sessionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "variance",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "variancePct",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "accuracyScore",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "VarianceReportReviewed",
      "channel": "inventory.variance.report.reviewed",
      "payload": [
        {
          "name": "reportId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "sessionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reviewedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "VarianceReportApproved",
      "channel": "inventory.variance.report.approved",
      "payload": [
        {
          "name": "reportId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "sessionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "adjustmentType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "adjustmentAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "approvedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "DishCreated",
      "channel": "kitchen.dish.created",
      "payload": [
        {
          "name": "dishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "recipeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "pricePerPerson",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "DishUpdated",
      "channel": "kitchen.dish.updated",
      "payload": [
        {
          "name": "dishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "DishDeactivated",
      "channel": "kitchen.dish.deactivated",
      "payload": [
        {
          "name": "dishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "deactivatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "DishPricingUpdated",
      "channel": "kitchen.dish.pricing.updated",
      "payload": [
        {
          "name": "dishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldPrice",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newPrice",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "DishLeadTimeUpdated",
      "channel": "kitchen.dish.leadtime.updated",
      "payload": [
        {
          "name": "dishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "minPrepLeadDays",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "maxPrepLeadDays",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventBudgetCreated",
      "channel": "events.budget.created",
      "payload": [
        {
          "name": "budgetId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalBudgetAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventBudgetUpdated",
      "channel": "events.budget.updated",
      "payload": [
        {
          "name": "budgetId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalBudgetAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalActualAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "varianceAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventBudgetFinalized",
      "channel": "events.budget.finalized",
      "payload": [
        {
          "name": "budgetId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalBudgetAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalActualAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "variancePercentage",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "finalizedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventBudgetApproved",
      "channel": "events.budget.approved",
      "payload": [
        {
          "name": "budgetId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalBudgeted",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "approvedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "BudgetLineItemCreated",
      "channel": "events.budget.line_item_created",
      "payload": [
        {
          "name": "lineItemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "budgetId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "budgetedAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "BudgetLineItemUpdated",
      "channel": "events.budget.line_item_updated",
      "payload": [
        {
          "name": "lineItemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "budgetId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldBudgetedAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newBudgetedAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "actualAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "varianceAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "BudgetLineItemRemoved",
      "channel": "events.budget.line_item_removed",
      "payload": [
        {
          "name": "lineItemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "budgetId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "removedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ContractCreated",
      "channel": "events.contract.created",
      "payload": [
        {
          "name": "contractId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "status",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ContractUpdated",
      "channel": "events.contract.updated",
      "payload": [
        {
          "name": "contractId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ContractSent",
      "channel": "events.contract.sent",
      "payload": [
        {
          "name": "contractId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "sentBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "sentAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ContractViewed",
      "channel": "events.contract.viewed",
      "payload": [
        {
          "name": "contractId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "viewedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ContractSigned",
      "channel": "events.contract.signed",
      "payload": [
        {
          "name": "contractId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "signedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ContractExpired",
      "channel": "events.contract.expired",
      "payload": [
        {
          "name": "contractId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "expiredAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ContractCancelled",
      "channel": "events.contract.cancelled",
      "payload": [
        {
          "name": "contractId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "canceledBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "cancelledAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ContractDeleted",
      "channel": "events.contract.deleted",
      "payload": [
        {
          "name": "contractId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "SignatureCreated",
      "channel": "events.contract.signature_created",
      "payload": [
        {
          "name": "signatureId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "contractId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "signerName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "signerEmail",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "signedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "SignatureDeleted",
      "channel": "events.contract.signature_deleted",
      "payload": [
        {
          "name": "signatureId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "contractId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "signerName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventDishCreated",
      "channel": "events.event-dish.created",
      "payload": [
        {
          "name": "eventDishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "dishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "courseLabel",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventDishRemoved",
      "channel": "events.event-dish.removed",
      "payload": [
        {
          "name": "eventDishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "dishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "removedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventGuestCreated",
      "channel": "kitchen.event-guest.created",
      "payload": [
        {
          "name": "guestId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "guestName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "guestEmail",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "guestPhone",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "isPrimaryContact",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "dietaryRestrictions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "allergenRestrictions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "specialMealRequired",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "mealPreference",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventGuestUpdated",
      "channel": "kitchen.event-guest.updated",
      "payload": [
        {
          "name": "guestId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "guestName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "guestEmail",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "isPrimaryContact",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "dietaryRestrictions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "allergenRestrictions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "specialMealRequired",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "mealPreference",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tableAssignment",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventGuestDeleted",
      "channel": "kitchen.event-guest.deleted",
      "payload": [
        {
          "name": "guestId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "guestName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventImportWorkflowCreated",
      "channel": "event.import.workflow.created",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "idempotencyKey",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventImportWorkflowParsingStarted",
      "channel": "event.import.workflow.parsing.started",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "currentStep",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventImportWorkflowParsingCompleted",
      "channel": "event.import.workflow.parsing.completed",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "confidence",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "currentStep",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventImportWorkflowExtractingStarted",
      "channel": "event.import.workflow.extracting.started",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "currentStep",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventImportWorkflowExtractingCompleted",
      "channel": "event.import.workflow.extracting.completed",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "currentStep",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventImportWorkflowValidatingStarted",
      "channel": "event.import.workflow.validating.started",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "currentStep",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventImportWorkflowValidationCompleted",
      "channel": "event.import.workflow.validating.completed",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "errorCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "warningCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "currentStep",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventImportWorkflowProposingStarted",
      "channel": "event.import.workflow.proposing.started",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "currentStep",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventImportWorkflowProposingCompleted",
      "channel": "event.import.workflow.proposing.completed",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "currentStep",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventImportWorkflowReservingStarted",
      "channel": "event.import.workflow.reserving.started",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "currentStep",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventImportWorkflowReservingCompleted",
      "channel": "event.import.workflow.reserving.completed",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "currentStep",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventImportWorkflowActivatingStarted",
      "channel": "event.import.workflow.activating.started",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "currentStep",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventImportWorkflowCompleted",
      "channel": "event.import.workflow.completed",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "completedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventImportWorkflowFailed",
      "channel": "event.import.workflow.failed",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "errors",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "failedAtStep",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "failedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventImportWorkflowPaused",
      "channel": "event.import.workflow.paused",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reasons",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "pausedAtStep",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventImportWorkflowResumed",
      "channel": "event.import.workflow.resumed",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "resumedAtStep",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventImportWorkflowCancelled",
      "channel": "event.import.workflow.cancelled",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reasons",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventImportWorkflowRetried",
      "channel": "event.import.workflow.retried",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "retryFromStep",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventReportCreated",
      "channel": "events.report.created",
      "payload": [
        {
          "name": "reportId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "version",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventReportSubmitted",
      "channel": "events.report.submitted",
      "payload": [
        {
          "name": "reportId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "completion",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "submittedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventReportApproved",
      "channel": "events.report.approved",
      "payload": [
        {
          "name": "reportId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reviewedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reviewNotes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "approvedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventReportCompleted",
      "channel": "events.report.completed",
      "payload": [
        {
          "name": "reportId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "completedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventConfirmed",
      "channel": "events.event.confirmed",
      "payload": [
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "guestCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "confirmedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventCreated",
      "channel": "events.event.created",
      "payload": [
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "guestCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventUpdated",
      "channel": "events.event.updated",
      "payload": [
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "guestCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventCancelled",
      "channel": "events.event.cancelled",
      "payload": [
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "cancelledAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventArchived",
      "channel": "events.event.archived",
      "payload": [
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "archivedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventGuestCountUpdated",
      "channel": "events.event.guest_count_updated",
      "payload": [
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldGuestCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newGuestCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventDateUpdated",
      "channel": "events.event.date_updated",
      "payload": [
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldEventDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newEventDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventLocationUpdated",
      "channel": "events.event.location_updated",
      "payload": [
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldVenueName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newVenueName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventFinalized",
      "channel": "events.event.finalized",
      "payload": [
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "finalizedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventUnfinalized",
      "channel": "events.event.unfinalized",
      "payload": [
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "unfinalizedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventProfitabilityCreated",
      "channel": "events.profitability.created",
      "payload": [
        {
          "name": "profitabilityId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "budgetedRevenue",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "budgetedTotalCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventProfitabilityUpdated",
      "channel": "events.profitability.updated",
      "payload": [
        {
          "name": "profitabilityId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "actualRevenue",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "actualTotalCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "actualGrossMargin",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventProfitabilityRecalculated",
      "channel": "events.profitability.recalculated",
      "payload": [
        {
          "name": "profitabilityId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "calculationMethod",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "calculatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventSummaryCreated",
      "channel": "events.summary.created",
      "payload": [
        {
          "name": "summaryId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "generatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventSummaryUpdated",
      "channel": "events.summary.updated",
      "payload": [
        {
          "name": "summaryId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventSummaryRefreshed",
      "channel": "events.summary.refreshed",
      "payload": [
        {
          "name": "summaryId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "generatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventStaffAssigned",
      "channel": "events.event-staff.assigned",
      "payload": [
        {
          "name": "eventStaffId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "role",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "shiftStart",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "shiftEnd",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "assignedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "EventStaffUnassigned",
      "channel": "events.event-staff.unassigned",
      "payload": [
        {
          "name": "eventStaffId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "unassignedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "IngredientCreated",
      "channel": "kitchen.ingredient.created",
      "payload": [
        {
          "name": "ingredientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "allergens",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "shelfLifeDays",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "IngredientUpdated",
      "channel": "kitchen.ingredient.updated",
      "payload": [
        {
          "name": "ingredientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "IngredientDeactivated",
      "channel": "kitchen.ingredient.deactivated",
      "payload": [
        {
          "name": "ingredientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "deactivatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "IngredientAllergensUpdated",
      "channel": "kitchen.ingredient.allergens.updated",
      "payload": [
        {
          "name": "ingredientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "allergens",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "IngredientShelfLifeUpdated",
      "channel": "kitchen.ingredient.shelflife.updated",
      "payload": [
        {
          "name": "ingredientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "shelfLifeDays",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "storageInstructions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "InventoryReserved",
      "channel": "kitchen.inventory.reserved",
      "payload": [
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reservedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "InventoryConsumed",
      "channel": "kitchen.inventory.consumed",
      "payload": [
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "lotId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "consumedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "InventoryWasted",
      "channel": "kitchen.inventory.wasted",
      "payload": [
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "lotId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "wastedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "InventoryAdjusted",
      "channel": "kitchen.inventory.adjusted",
      "payload": [
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "adjustedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "InventoryRestocked",
      "channel": "kitchen.inventory.restocked",
      "payload": [
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "costPerUnit",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "restockedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "InventoryItemCreated",
      "channel": "kitchen.inventory.created",
      "payload": [
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "InventoryReservationReleased",
      "channel": "kitchen.inventory.reservation.released",
      "payload": [
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "releasedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "InventorySupplierCreated",
      "channel": "inventory.supplier.created",
      "payload": [
        {
          "name": "supplierId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "supplierNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "paymentTerms",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "InventorySupplierUpdated",
      "channel": "inventory.supplier.updated",
      "payload": [
        {
          "name": "supplierId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "contactPerson",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "email",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "InventorySupplierDeactivated",
      "channel": "inventory.supplier.deactivated",
      "payload": [
        {
          "name": "supplierId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "openPOCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "deactivatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "InventoryTransactionCreated",
      "channel": "inventory.transaction.created",
      "payload": [
        {
          "name": "transactionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "transactionType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "unitCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "referenceType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "referenceId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "employeeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "KitchenTaskClaimed",
      "channel": "kitchen.kitchentask.claimed",
      "payload": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "claimedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "KitchenTaskStarted",
      "channel": "kitchen.kitchentask.started",
      "payload": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "startedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "KitchenTaskCompleted",
      "channel": "kitchen.kitchentask.completed",
      "payload": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "completedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "KitchenTaskReleased",
      "channel": "kitchen.kitchentask.released",
      "payload": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "previousUserId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "releasedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "KitchenTaskReassigned",
      "channel": "kitchen.kitchentask.reassigned",
      "payload": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "previousUserId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newUserId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reassignedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reassignedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "KitchenTaskPriorityUpdated",
      "channel": "kitchen.kitchentask.priority.updated",
      "payload": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldPriority",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newPriority",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "KitchenTaskComplexityUpdated",
      "channel": "kitchen.kitchentask.complexity.updated",
      "payload": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldComplexity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newComplexity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "KitchenTaskTagAdded",
      "channel": "kitchen.kitchentask.tag.added",
      "payload": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tag",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "addedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "KitchenTaskTagRemoved",
      "channel": "kitchen.kitchentask.tag.removed",
      "payload": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tag",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "removedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "KitchenTaskCanceled",
      "channel": "kitchen.kitchentask.canceled",
      "payload": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "canceledBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "canceledAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "KitchenTaskCreated",
      "channel": "kitchen.kitchentask.created",
      "payload": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "priority",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "LeadCreated",
      "channel": "crm.lead.created",
      "payload": [
        {
          "name": "leadId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "contactName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "companyName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "source",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "estimatedValue",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "assignedTo",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "LeadUpdated",
      "channel": "crm.lead.updated",
      "payload": [
        {
          "name": "leadId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "contactName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldStatus",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newStatus",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "estimatedValue",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "LeadConvertedToClient",
      "channel": "crm.lead.converted",
      "payload": [
        {
          "name": "leadId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "contactName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "companyName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "estimatedValue",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "convertedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "LeadDisqualified",
      "channel": "crm.lead.disqualified",
      "payload": [
        {
          "name": "leadId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "contactName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "companyName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "estimatedValue",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "disqualifiedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "LeadArchived",
      "channel": "crm.lead.archived",
      "payload": [
        {
          "name": "leadId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "contactName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "archivedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "MenuCreated",
      "channel": "kitchen.menu.created",
      "payload": [
        {
          "name": "menuId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "MenuUpdated",
      "channel": "kitchen.menu.updated",
      "payload": [
        {
          "name": "menuId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "MenuDeactivated",
      "channel": "kitchen.menu.deactivated",
      "payload": [
        {
          "name": "menuId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "deactivatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "MenuActivated",
      "channel": "kitchen.menu.activated",
      "payload": [
        {
          "name": "menuId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "activatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "MenuDishAdded",
      "channel": "kitchen.menu.dish_added",
      "payload": [
        {
          "name": "menuId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "dishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "menuDishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "course",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "addedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "MenuDishRemoved",
      "channel": "kitchen.menudish.removed",
      "payload": [
        {
          "name": "menuDishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "menuId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "dishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "removedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "MenuDishUpdated",
      "channel": "kitchen.menu.dish_updated",
      "payload": [
        {
          "name": "menuId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "dishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "menuDishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "course",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "sortOrder",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "isOptional",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "MenuDishesReordered",
      "channel": "kitchen.menu.dishes_reordered",
      "payload": [
        {
          "name": "menuId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "dishIdsJson",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reorderedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "NotificationCreated",
      "channel": "notification.created",
      "payload": [
        {
          "name": "notificationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "recipientEmployeeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notificationType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "hasAction",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "NotificationMarkedRead",
      "channel": "notification.marked_read",
      "payload": [
        {
          "name": "notificationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "recipientEmployeeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "readAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "NotificationDismissed",
      "channel": "notification.dismissed",
      "payload": [
        {
          "name": "notificationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "recipientEmployeeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "dismissedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "NotificationDeleted",
      "channel": "notification.deleted",
      "payload": [
        {
          "name": "notificationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "recipientEmployeeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "OverrideAuditCreated",
      "channel": "audit.override.created",
      "payload": [
        {
          "name": "overrideAuditId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "entityType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "entityId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "constraintId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "guardExpression",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "overriddenBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "overrideReason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "OverrideAuditAuthorized",
      "channel": "audit.override.authorized",
      "payload": [
        {
          "name": "overrideAuditId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "entityType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "entityId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "constraintId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "authorizedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "authorizedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepCommentCreated",
      "channel": "kitchen.prepcomment.created",
      "payload": [
        {
          "name": "commentId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "employeeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "commentText",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepCommentResolved",
      "channel": "kitchen.prepcomment.resolved",
      "payload": [
        {
          "name": "commentId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "resolvedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "resolvedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepCommentUnresolved",
      "channel": "kitchen.prepcomment.unresolved",
      "payload": [
        {
          "name": "commentId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "unresolvedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "unresolvedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepCommentDeleted",
      "channel": "kitchen.prepcomment.deleted",
      "payload": [
        {
          "name": "commentId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "deletedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepListCreated",
      "channel": "kitchen.preplist.created",
      "payload": [
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalItems",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "batchMultiplier",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepListSeedImported",
      "channel": "kitchen.preplist.seed_imported",
      "payload": [
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalItems",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "importedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepListUpdated",
      "channel": "kitchen.preplist.updated",
      "payload": [
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepListBatchMultiplierUpdated",
      "channel": "kitchen.preplist.batch_multiplier_updated",
      "payload": [
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldMultiplier",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newMultiplier",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepListFinalized",
      "channel": "kitchen.preplist.finalized",
      "payload": [
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalItems",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalEstimatedTime",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "finalizedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepListActivated",
      "channel": "kitchen.preplist.activated",
      "payload": [
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "activatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepListDeactivated",
      "channel": "kitchen.preplist.deactivated",
      "payload": [
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "deactivatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepListCompleted",
      "channel": "kitchen.preplist.completed",
      "payload": [
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "completedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepListReopened",
      "channel": "kitchen.preplist.reopened",
      "payload": [
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reopenedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepListCancelled",
      "channel": "kitchen.preplist.cancelled",
      "payload": [
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "cancelledAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepListItemCreated",
      "channel": "kitchen.preplist.item_created",
      "payload": [
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "ingredientName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "stationName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "scaledQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepListItemUpdated",
      "channel": "kitchen.preplist.item_updated",
      "payload": [
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "ingredientName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldScaledQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newScaledQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepListItemStationChanged",
      "channel": "kitchen.preplist.item_station_changed",
      "payload": [
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "ingredientName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldStationName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newStationName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "changedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepListItemNotesUpdated",
      "channel": "kitchen.preplist.item_notes_updated",
      "payload": [
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "ingredientName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepListItemCompleted",
      "channel": "kitchen.preplist.item_completed",
      "payload": [
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "ingredientName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "completedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "completedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepListItemUncompleted",
      "channel": "kitchen.preplist.item_uncompleted",
      "payload": [
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "ingredientName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "uncompletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepMethodCreated",
      "channel": "kitchen.prepmethod.created",
      "payload": [
        {
          "name": "prepMethodId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "estimatedDurationMinutes",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "requiresCertification",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepMethodUpdated",
      "channel": "kitchen.prepmethod.updated",
      "payload": [
        {
          "name": "prepMethodId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "estimatedDurationMinutes",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "requiresCertification",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepMethodDeactivated",
      "channel": "kitchen.prepmethod.deactivated",
      "payload": [
        {
          "name": "prepMethodId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "deactivatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskPlanWorkflowCreated",
      "channel": "prep.task.plan.workflow.created",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "idempotencyKey",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskPlanWorkflowGeneratingStarted",
      "channel": "prep.task.plan.workflow.generating.started",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "currentStep",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskPlanWorkflowGenerationCompleted",
      "channel": "prep.task.plan.workflow.generating.completed",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "generatedCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "currentStep",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskPlanWorkflowReviewingStarted",
      "channel": "prep.task.plan.workflow.reviewing.started",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reviewedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "generatedCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskPlanWorkflowReviewingCompleted",
      "channel": "prep.task.plan.workflow.reviewing.completed",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "approvedCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "rejectedCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reviewedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reviewedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskPlanWorkflowApprovingStarted",
      "channel": "prep.task.plan.workflow.approving.started",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "approvedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "approvedCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskPlanWorkflowApproved",
      "channel": "prep.task.plan.workflow.approved",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "approvedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "approvedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "approvedCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskPlanWorkflowRejected",
      "channel": "prep.task.plan.workflow.rejected",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reasons",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "rejectedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskPlanWorkflowInstantiatingStarted",
      "channel": "prep.task.plan.workflow.instantiating.started",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "approvedCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskPlanWorkflowInstantiatingCompleted",
      "channel": "prep.task.plan.workflow.instantiating.completed",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "instantiatedCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "currentStep",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskPlanWorkflowSchedulingStarted",
      "channel": "prep.task.plan.workflow.scheduling.started",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "instantiatedCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskPlanWorkflowCompleted",
      "channel": "prep.task.plan.workflow.completed",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "instantiatedCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "completedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskPlanWorkflowFailed",
      "channel": "prep.task.plan.workflow.failed",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "errors",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "failedAtStep",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "failedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskPlanWorkflowCancelled",
      "channel": "prep.task.plan.workflow.cancelled",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reasons",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "cancelledAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskPlanWorkflowRetried",
      "channel": "prep.task.plan.workflow.retried",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "retryFromStep",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskPlanWorkflowQuickApproved",
      "channel": "prep.task.plan.workflow.quick.approved",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "approvedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "approvedCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "approvedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskClaimed",
      "channel": "kitchen.preptask.claimed",
      "payload": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "stationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "claimedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskStarted",
      "channel": "kitchen.preptask.started",
      "payload": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "startedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskCompleted",
      "channel": "kitchen.preptask.completed",
      "payload": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantityCompleted",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "completedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskUnclaimed",
      "channel": "kitchen.preptask.unclaimed",
      "payload": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "unclaimedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskReleased",
      "channel": "kitchen.preptask.released",
      "payload": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "previousUserId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "releasedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskReassigned",
      "channel": "kitchen.preptask.reassigned",
      "payload": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "previousUserId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newUserId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reassignedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reassignedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskQuantityUpdated",
      "channel": "kitchen.preptask.quantity.updated",
      "payload": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldQuantityTotal",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newQuantityTotal",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantityCompleted",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskCreated",
      "channel": "kitchen.preptask.created",
      "payload": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "taskType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "priority",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskCanceled",
      "channel": "kitchen.preptask.canceled",
      "payload": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "canceledBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "canceledAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskStatusUpdated",
      "channel": "kitchen.preptask.status.updated",
      "payload": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldStatus",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newStatus",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskPriorityUpdated",
      "channel": "kitchen.preptask.priority.updated",
      "payload": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldPriority",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newPriority",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskAssignmentUpdated",
      "channel": "kitchen.preptask.assignment.updated",
      "payload": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldClaimedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newClaimedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PrepTaskDueDateUpdated",
      "channel": "kitchen.preptask.duedate.updated",
      "payload": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldDueByDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newDueByDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ProposalCreated",
      "channel": "crm.proposal.created",
      "payload": [
        {
          "name": "proposalId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "proposalNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "leadId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ProposalUpdated",
      "channel": "crm.proposal.updated",
      "payload": [
        {
          "name": "proposalId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "proposalNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "total",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ProposalSent",
      "channel": "crm.proposal.sent",
      "payload": [
        {
          "name": "proposalId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "proposalNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "total",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "validUntil",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "sentAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ProposalViewed",
      "channel": "crm.proposal.viewed",
      "payload": [
        {
          "name": "proposalId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "proposalNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "viewedByInfo",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "viewedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ProposalAccepted",
      "channel": "crm.proposal.accepted",
      "payload": [
        {
          "name": "proposalId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "proposalNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "total",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "acceptedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ProposalRejected",
      "channel": "crm.proposal.rejected",
      "payload": [
        {
          "name": "proposalId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "proposalNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "total",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "rejectedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ProposalWithdrawn",
      "channel": "crm.proposal.withdrawn",
      "payload": [
        {
          "name": "proposalId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "proposalNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "withdrawnAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ProposalLineItemCreated",
      "channel": "crm.proposal_line_item.created",
      "payload": [
        {
          "name": "lineItemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "proposalId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "unitPrice",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalPrice",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ProposalLineItemUpdated",
      "channel": "crm.proposal_line_item.updated",
      "payload": [
        {
          "name": "lineItemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "proposalId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "unitPrice",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalPrice",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ProposalLineItemRemoved",
      "channel": "crm.proposal_line_item.removed",
      "payload": [
        {
          "name": "lineItemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "proposalId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "removedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PurchaseOrderCreated",
      "channel": "purchasing.po.created",
      "payload": [
        {
          "name": "purchaseOrderId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "poNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "vendorId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PurchaseOrderSubmitted",
      "channel": "purchasing.po.submitted",
      "payload": [
        {
          "name": "purchaseOrderId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "poNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "vendorId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "submittedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "total",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "submittedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PurchaseOrderApproved",
      "channel": "purchasing.po.approved",
      "payload": [
        {
          "name": "purchaseOrderId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "poNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "vendorId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "total",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "approvedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PurchaseOrderRejected",
      "channel": "purchasing.po.rejected",
      "payload": [
        {
          "name": "purchaseOrderId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "poNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "vendorId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "rejectedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PurchaseOrderCancelled",
      "channel": "purchasing.po.cancelled",
      "payload": [
        {
          "name": "purchaseOrderId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "poNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "vendorId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "cancelledAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PurchaseOrderOrdered",
      "channel": "purchasing.po.ordered",
      "payload": [
        {
          "name": "purchaseOrderId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "poNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "vendorId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "orderedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PurchaseOrderReceived",
      "channel": "purchasing.po.received",
      "payload": [
        {
          "name": "purchaseOrderId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "poNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "vendorId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "receivedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "receivedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PurchaseOrderItemCreated",
      "channel": "purchasing.po.item.created",
      "payload": [
        {
          "name": "purchaseOrderItemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "purchaseOrderId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantityOrdered",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "unitCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PurchaseOrderItemUpdated",
      "channel": "purchasing.po.item.updated",
      "payload": [
        {
          "name": "purchaseOrderItemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "purchaseOrderId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantityOrdered",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "unitCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "PurchaseOrderItemRemoved",
      "channel": "purchasing.po.item.removed",
      "payload": [
        {
          "name": "purchaseOrderItemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "purchaseOrderId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "removedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "RecipeCreated",
      "channel": "kitchen.recipe.created",
      "payload": [
        {
          "name": "recipeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "RecipeUpdated",
      "channel": "kitchen.recipe.updated",
      "payload": [
        {
          "name": "recipeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "RecipeDeactivated",
      "channel": "kitchen.recipe.deactivated",
      "payload": [
        {
          "name": "recipeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "deactivatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "RecipeActivated",
      "channel": "kitchen.recipe.activated",
      "payload": [
        {
          "name": "recipeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "activatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "RecipeVersionCreated",
      "channel": "kitchen.recipe.version.created",
      "payload": [
        {
          "name": "versionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "recipeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "versionNumber",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "yieldQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "RecipeVersionRestored",
      "channel": "kitchen.recipe.version.restored",
      "payload": [
        {
          "name": "newVersionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "sourceVersionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "recipeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "versionNumber",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "restoredAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "RecipeVersionCostUpdated",
      "channel": "kitchen.recipe.version.cost.updated",
      "payload": [
        {
          "name": "recipeVersionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "recipeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "costPerYield",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "RecipeIngredientCreated",
      "channel": "kitchen.recipe.ingredient.created",
      "payload": [
        {
          "name": "recipeIngredientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "recipeVersionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "ingredientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "RecipeIngredientUpdated",
      "channel": "kitchen.recipe.ingredient.updated",
      "payload": [
        {
          "name": "recipeIngredientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "recipeVersionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "ingredientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "RecipeStepCreated",
      "channel": "kitchen.recipe.step.created",
      "payload": [
        {
          "name": "recipeStepId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "recipeVersionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "stepNumber",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "instruction",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "RecipeStepUpdated",
      "channel": "kitchen.recipe.step.updated",
      "payload": [
        {
          "name": "recipeStepId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "recipeVersionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "stepNumber",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldInstruction",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newInstruction",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "RecipeStepRemoved",
      "channel": "kitchen.recipe.step.removed",
      "payload": [
        {
          "name": "recipeStepId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "recipeVersionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "stepNumber",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "removedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "RecipeIngredientRemoved",
      "channel": "kitchen.recipeingredient.removed",
      "payload": [
        {
          "name": "recipeIngredientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "recipeVersionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "ingredientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "removedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "RecipeIngredientWasteFactorUpdated",
      "channel": "kitchen.recipe.ingredient.wastefactor.updated",
      "payload": [
        {
          "name": "recipeIngredientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "recipeVersionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldWasteFactor",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newWasteFactor",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "RolePolicyUpdated",
      "channel": "admin.role-policy.updated",
      "payload": [
        {
          "name": "rolePolicyId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "roleId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "roleName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "isActive",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "RolePolicyPermissionGranted",
      "channel": "admin.role-policy.permission_granted",
      "payload": [
        {
          "name": "rolePolicyId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "roleId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "permission",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "grantedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "grantedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "RolePolicyPermissionRevoked",
      "channel": "admin.role-policy.permission_revoked",
      "payload": [
        {
          "name": "rolePolicyId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "roleId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "permission",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "revokedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "revokedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ScheduleCreated",
      "channel": "staff.schedule.created",
      "payload": [
        {
          "name": "scheduleId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "scheduleDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ScheduleUpdated",
      "channel": "staff.schedule.updated",
      "payload": [
        {
          "name": "scheduleId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "scheduleDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "SchedulePublished",
      "channel": "staff.schedule.published",
      "payload": [
        {
          "name": "scheduleId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "scheduleDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "shiftCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "publishedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "publishedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ScheduleClosed",
      "channel": "staff.schedule.closed",
      "payload": [
        {
          "name": "scheduleId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "scheduleDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "closedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ScheduleShiftCreated",
      "channel": "staff.schedule.shift.created",
      "payload": [
        {
          "name": "shiftId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "scheduleId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "employeeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "shiftStart",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "shiftEnd",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "roleDuringShift",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ScheduleShiftUpdated",
      "channel": "staff.schedule.shift.updated",
      "payload": [
        {
          "name": "shiftId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "scheduleId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "employeeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "shiftStart",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "shiftEnd",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "roleDuringShift",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ScheduleShiftRemoved",
      "channel": "staff.schedule.shift.removed",
      "payload": [
        {
          "name": "shiftId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "scheduleId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "employeeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "removedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ShipmentCreated",
      "channel": "purchasing.shipment.created",
      "payload": [
        {
          "name": "shipmentId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "shipmentNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "supplierId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ShipmentUpdated",
      "channel": "purchasing.shipment.updated",
      "payload": [
        {
          "name": "shipmentId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "shipmentNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "trackingNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "carrier",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ShipmentDelivered",
      "channel": "purchasing.shipment.delivered",
      "payload": [
        {
          "name": "shipmentId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "shipmentNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "supplierId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "deliveredBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "receivedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalItems",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalValue",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "deliveredAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ShipmentCancelled",
      "channel": "purchasing.shipment.cancelled",
      "payload": [
        {
          "name": "shipmentId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "shipmentNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "cancelledAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ShipmentScheduled",
      "channel": "purchasing.shipment.scheduled",
      "payload": [
        {
          "name": "shipmentId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "purchaseOrderId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "scheduledAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ShipmentPreparationStarted",
      "channel": "purchasing.shipment.preparation_started",
      "payload": [
        {
          "name": "shipmentId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "purchaseOrderId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "startedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ShipmentShipped",
      "channel": "purchasing.shipment.shipped",
      "payload": [
        {
          "name": "shipmentId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "purchaseOrderId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "trackingNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "shippedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ShipmentItemCreated",
      "channel": "purchasing.shipment.item.created",
      "payload": [
        {
          "name": "shipmentItemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "shipmentId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantityShipped",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "unitCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "ShipmentItemReceived",
      "channel": "purchasing.shipment.item.received",
      "payload": [
        {
          "name": "shipmentItemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "shipmentId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantityReceived",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantityDamaged",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "condition",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "receivedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "StationTaskAssigned",
      "channel": "kitchen.station.task.assigned",
      "payload": [
        {
          "name": "stationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "stationName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "taskName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "currentTaskCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "capacity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "assignedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "StationTaskRemoved",
      "channel": "kitchen.station.task.removed",
      "payload": [
        {
          "name": "stationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "stationName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "currentTaskCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "removedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "StationCapacityUpdated",
      "channel": "kitchen.station.capacity.updated",
      "payload": [
        {
          "name": "stationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "stationName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldCapacity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newCapacity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "StationDeactivated",
      "channel": "kitchen.station.deactivated",
      "payload": [
        {
          "name": "stationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "stationName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "activeTaskCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "deactivatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "StationActivated",
      "channel": "kitchen.station.activated",
      "payload": [
        {
          "name": "stationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "stationName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "activatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "StationCreated",
      "channel": "kitchen.station.created",
      "payload": [
        {
          "name": "stationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "stationType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "capacity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "StationEquipmentUpdated",
      "channel": "kitchen.station.equipment.updated",
      "payload": [
        {
          "name": "stationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "stationName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "equipmentList",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "TimeEntryClockedIn",
      "channel": "staff.timeentry.clocked_in",
      "payload": [
        {
          "name": "timeEntryId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "employeeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "shiftId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "clockIn",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "TimeEntryClockedOut",
      "channel": "staff.timeentry.clocked_out",
      "payload": [
        {
          "name": "timeEntryId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "employeeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "clockIn",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "clockOut",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalHours",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "breakMinutes",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "clockedOutAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "TimeEntryAdded",
      "channel": "staff.timeentry.added",
      "payload": [
        {
          "name": "timeEntryId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "employeeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "clockIn",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "clockOut",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalHours",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "breakMinutes",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "TimecardEditRequested",
      "channel": "staff.timecard.edit.requested",
      "payload": [
        {
          "name": "editRequestId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "timeEntryId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "employeeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "requestedClockIn",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "requestedClockOut",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "TimecardEditApproved",
      "channel": "staff.timecard.edit.approved",
      "payload": [
        {
          "name": "editRequestId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "timeEntryId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "employeeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "approvedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "approvedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "TimecardEditRejected",
      "channel": "staff.timecard.edit.rejected",
      "payload": [
        {
          "name": "editRequestId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "timeEntryId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "employeeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "rejectedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "rejectedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "UserCreated",
      "channel": "staff.user.created",
      "payload": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "email",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "firstName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "lastName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "role",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "employmentType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "UserUpdated",
      "channel": "staff.user.updated",
      "payload": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "email",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "firstName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "lastName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "UserDeactivated",
      "channel": "staff.user.deactivated",
      "payload": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "email",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "deactivatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "UserTerminated",
      "channel": "staff.user.terminated",
      "payload": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "email",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "terminationDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "terminatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "UserRoleUpdated",
      "channel": "staff.user.role.updated",
      "payload": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "email",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "previousRole",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newRole",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "WasteEntryCreated",
      "channel": "kitchen.waste-entry.created",
      "payload": [
        {
          "name": "wasteEntryId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "inventoryItemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reasonId",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "unitId",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "loggedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "unitCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "WasteEntryUpdated",
      "channel": "kitchen.waste-entry.updated",
      "payload": [
        {
          "name": "wasteEntryId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "unitId",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "unitCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "WasteEntryDeleted",
      "channel": "kitchen.waste-entry.deleted",
      "payload": [
        {
          "name": "wasteEntryId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "deletedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "WorkflowCreated",
      "channel": "workflow.created",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "triggerType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "isActive",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "createdAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "WorkflowUpdated",
      "channel": "workflow.updated",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "oldName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "triggerType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "updatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "WorkflowActivated",
      "channel": "workflow.activated",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "workflowName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "triggerType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "activatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    },
    {
      "name": "WorkflowDeactivated",
      "channel": "workflow.deactivated",
      "payload": [
        {
          "name": "workflowId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tenantId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "workflowName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "deactivatedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ]
    }
  ],
  "commands": [
    {
      "name": "create",
      "entity": "AlertsConfig",
      "parameters": [
        {
          "name": "channel",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "destination",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "channel"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "channel"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "destination"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "destination"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Alert channel is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Alert destination is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "channel",
          "expression": {
            "kind": "identifier",
            "name": "channel"
          }
        },
        {
          "kind": "mutate",
          "target": "destination",
          "expression": {
            "kind": "identifier",
            "name": "destination"
          }
        }
      ],
      "emits": [
        "AlertsConfigCreated"
      ]
    },
    {
      "name": "update",
      "entity": "AlertsConfig",
      "parameters": [
        {
          "name": "channel",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "destination",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "channel"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "channel"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "destination"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "destination"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Alert channel is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Alert destination is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "channel",
          "expression": {
            "kind": "identifier",
            "name": "channel"
          }
        },
        {
          "kind": "mutate",
          "target": "destination",
          "expression": {
            "kind": "identifier",
            "name": "destination"
          }
        }
      ],
      "emits": [
        "AlertsConfigUpdated"
      ]
    },
    {
      "name": "remove",
      "entity": "AlertsConfig",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "reason"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "reason"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Removal reason is required"
            }
          }
        }
      ],
      "emits": [
        "AlertsConfigRemoved"
      ]
    },
    {
      "name": "create",
      "entity": "AllergenWarning",
      "parameters": [
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "dishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "warningType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "allergens",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "affectedGuests",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "severity",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "warningType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "warningType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "allergens"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "allergens"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Event ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Warning type is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Allergens list is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "eventId",
          "expression": {
            "kind": "identifier",
            "name": "eventId"
          }
        },
        {
          "kind": "mutate",
          "target": "dishId",
          "expression": {
            "kind": "identifier",
            "name": "dishId"
          }
        },
        {
          "kind": "mutate",
          "target": "warningType",
          "expression": {
            "kind": "identifier",
            "name": "warningType"
          }
        },
        {
          "kind": "mutate",
          "target": "allergens",
          "expression": {
            "kind": "identifier",
            "name": "allergens"
          }
        },
        {
          "kind": "mutate",
          "target": "affectedGuests",
          "expression": {
            "kind": "identifier",
            "name": "affectedGuests"
          }
        },
        {
          "kind": "mutate",
          "target": "severity",
          "expression": {
            "kind": "identifier",
            "name": "severity"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "isAcknowledged",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        },
        {
          "kind": "mutate",
          "target": "resolved",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "AllergenWarningCreated"
      ]
    },
    {
      "name": "acknowledge",
      "entity": "AllergenWarning",
      "parameters": [
        {
          "name": "acknowledgedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isAcknowledged"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "acknowledgedBy"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "acknowledgedBy"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Warning is already acknowledged"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Acknowledged by user is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "isAcknowledged",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        },
        {
          "kind": "mutate",
          "target": "acknowledgedBy",
          "expression": {
            "kind": "identifier",
            "name": "acknowledgedBy"
          }
        },
        {
          "kind": "mutate",
          "target": "acknowledgedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "AllergenWarningAcknowledged"
      ]
    },
    {
      "name": "resolve",
      "entity": "AllergenWarning",
      "parameters": [
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "resolved"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Warning is already resolved"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "resolved",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        },
        {
          "kind": "mutate",
          "target": "resolvedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "AllergenWarningResolved"
      ]
    },
    {
      "name": "applyOverride",
      "entity": "AllergenWarning",
      "parameters": [
        {
          "name": "overrideReason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "acknowledgedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "overrideReason"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "overrideReason"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "acknowledgedBy"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "acknowledgedBy"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Override reason is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Acknowledged by user is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "overrideReason",
          "expression": {
            "kind": "identifier",
            "name": "overrideReason"
          }
        },
        {
          "kind": "mutate",
          "target": "acknowledgedBy",
          "expression": {
            "kind": "identifier",
            "name": "acknowledgedBy"
          }
        },
        {
          "kind": "mutate",
          "target": "isAcknowledged",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        },
        {
          "kind": "mutate",
          "target": "acknowledgedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "AllergenWarningOverridden"
      ]
    },
    {
      "name": "softDelete",
      "entity": "AllergenWarning",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Warning is already deleted"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "deletedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "AllergenWarningDeleted"
      ]
    },
    {
      "name": "create",
      "entity": "BattleBoard",
      "parameters": [
        {
          "name": "boardName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "boardType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "isTemplate",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tags",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "boardName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "boardName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Board name is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "boardName",
          "expression": {
            "kind": "identifier",
            "name": "boardName"
          }
        },
        {
          "kind": "mutate",
          "target": "boardType",
          "expression": {
            "kind": "identifier",
            "name": "boardType"
          }
        },
        {
          "kind": "mutate",
          "target": "eventId",
          "expression": {
            "kind": "identifier",
            "name": "eventId"
          }
        },
        {
          "kind": "mutate",
          "target": "description",
          "expression": {
            "kind": "identifier",
            "name": "description"
          }
        },
        {
          "kind": "mutate",
          "target": "isTemplate",
          "expression": {
            "kind": "identifier",
            "name": "isTemplate"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "tags",
          "expression": {
            "kind": "identifier",
            "name": "tags"
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "draft"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "boardData",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "{}"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "BattleBoardCreated"
      ]
    },
    {
      "name": "open",
      "entity": "BattleBoard",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "draft"
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "blockNoDishes",
          "code": "blockNoDishes",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "dishCount"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only open draft battle boards"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Cannot open battle board '{boardName}' with no dishes"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "boardName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "boardName"
                      }
                    },
                    {
                      "key": "boardId",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "id"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "open"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "BattleBoardOpened"
      ]
    },
    {
      "name": "startVoting",
      "entity": "BattleBoard",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "open"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only start voting on open battle boards"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "voting"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "BattleBoardVotingStarted"
      ]
    },
    {
      "name": "addDish",
      "entity": "BattleBoard",
      "parameters": [
        {
          "name": "dishData",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "finalized"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "dishData"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "dishData"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot add dishes to finalized board"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Dish data is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "boardData",
          "expression": {
            "kind": "identifier",
            "name": "dishData"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "BattleBoardDishAdded"
      ]
    },
    {
      "name": "removeDish",
      "entity": "BattleBoard",
      "parameters": [
        {
          "name": "dishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "finalized"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "voting"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "dishId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "dishId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot remove dishes from finalized board"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot remove dishes during voting"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Dish ID is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "BattleBoardDishRemoved"
      ]
    },
    {
      "name": "vote",
      "entity": "BattleBoard",
      "parameters": [
        {
          "name": "voteData",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "voting"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "voteData"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "voteData"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only vote when board is in voting status"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "User ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Vote data is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "boardData",
          "expression": {
            "kind": "identifier",
            "name": "voteData"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "BattleBoardVoteCast"
      ]
    },
    {
      "name": "finalize",
      "entity": "BattleBoard",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "voting"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "boardData"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "{}"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "boardData"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only finalize boards in voting status"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot finalize board with no data"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "finalized"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "BattleBoardFinalized"
      ]
    },
    {
      "name": "create",
      "entity": "CateringOrder",
      "parameters": [
        {
          "name": "orderNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "customerId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "deliveryDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "deliveryTime",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "guestCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "venueName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "venueAddress",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "venueCity",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "venueState",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "venueZip",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "venueContactName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "venueContactPhone",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "specialInstructions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "dietaryRestrictions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "staffRequired",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "orderNumber"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "orderNumber"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "customerId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "customerId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Order number is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Customer ID is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "orderNumber",
          "expression": {
            "kind": "identifier",
            "name": "orderNumber"
          }
        },
        {
          "kind": "mutate",
          "target": "customerId",
          "expression": {
            "kind": "identifier",
            "name": "customerId"
          }
        },
        {
          "kind": "mutate",
          "target": "eventId",
          "expression": {
            "kind": "identifier",
            "name": "eventId"
          }
        },
        {
          "kind": "mutate",
          "target": "deliveryDate",
          "expression": {
            "kind": "identifier",
            "name": "deliveryDate"
          }
        },
        {
          "kind": "mutate",
          "target": "deliveryTime",
          "expression": {
            "kind": "identifier",
            "name": "deliveryTime"
          }
        },
        {
          "kind": "mutate",
          "target": "guestCount",
          "expression": {
            "kind": "identifier",
            "name": "guestCount"
          }
        },
        {
          "kind": "mutate",
          "target": "venueName",
          "expression": {
            "kind": "identifier",
            "name": "venueName"
          }
        },
        {
          "kind": "mutate",
          "target": "venueAddress",
          "expression": {
            "kind": "identifier",
            "name": "venueAddress"
          }
        },
        {
          "kind": "mutate",
          "target": "venueCity",
          "expression": {
            "kind": "identifier",
            "name": "venueCity"
          }
        },
        {
          "kind": "mutate",
          "target": "venueState",
          "expression": {
            "kind": "identifier",
            "name": "venueState"
          }
        },
        {
          "kind": "mutate",
          "target": "venueZip",
          "expression": {
            "kind": "identifier",
            "name": "venueZip"
          }
        },
        {
          "kind": "mutate",
          "target": "venueContactName",
          "expression": {
            "kind": "identifier",
            "name": "venueContactName"
          }
        },
        {
          "kind": "mutate",
          "target": "venueContactPhone",
          "expression": {
            "kind": "identifier",
            "name": "venueContactPhone"
          }
        },
        {
          "kind": "mutate",
          "target": "specialInstructions",
          "expression": {
            "kind": "identifier",
            "name": "specialInstructions"
          }
        },
        {
          "kind": "mutate",
          "target": "dietaryRestrictions",
          "expression": {
            "kind": "identifier",
            "name": "dietaryRestrictions"
          }
        },
        {
          "kind": "mutate",
          "target": "staffRequired",
          "expression": {
            "kind": "identifier",
            "name": "staffRequired"
          }
        },
        {
          "kind": "mutate",
          "target": "orderStatus",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "draft"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "orderDate",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "CateringOrderCreated"
      ]
    },
    {
      "name": "update",
      "entity": "CateringOrder",
      "parameters": [
        {
          "name": "guestCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "subtotalAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "taxAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "discountAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "serviceChargeAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "depositRequired",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "depositAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "specialInstructions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "dietaryRestrictions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "staffRequired",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "orderStatus"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "completed"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "orderStatus"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "cancelled"
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnGuestCountChange",
          "code": "warnGuestCountChange",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "identifier",
                "name": "guestCount"
              },
              "right": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "guestCount"
              }
            },
            "right": {
              "kind": "binary",
              "operator": "or",
              "left": {
                "kind": "binary",
                "operator": ">",
                "left": {
                  "kind": "identifier",
                  "name": "guestCount"
                },
                "right": {
                  "kind": "binary",
                  "operator": "*",
                  "left": {
                    "kind": "member",
                    "object": {
                      "kind": "identifier",
                      "name": "self"
                    },
                    "property": "guestCount"
                  },
                  "right": {
                    "kind": "literal",
                    "value": {
                      "kind": "number",
                      "value": 1.5
                    }
                  }
                }
              },
              "right": {
                "kind": "binary",
                "operator": "<",
                "left": {
                  "kind": "identifier",
                  "name": "guestCount"
                },
                "right": {
                  "kind": "binary",
                  "operator": "*",
                  "left": {
                    "kind": "member",
                    "object": {
                      "kind": "identifier",
                      "name": "self"
                    },
                    "property": "guestCount"
                  },
                  "right": {
                    "kind": "literal",
                    "value": {
                      "kind": "number",
                      "value": 0.5
                    }
                  }
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update completed order"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update cancelled order"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Guest count changing significantly from {oldCount} to {newCount}"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "oldCount",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "guestCount"
                      }
                    },
                    {
                      "key": "newCount",
                      "value": {
                        "kind": "identifier",
                        "name": "guestCount"
                      }
                    },
                    {
                      "key": "orderNumber",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "orderNumber"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "guestCount",
          "expression": {
            "kind": "identifier",
            "name": "guestCount"
          }
        },
        {
          "kind": "mutate",
          "target": "subtotalAmount",
          "expression": {
            "kind": "identifier",
            "name": "subtotalAmount"
          }
        },
        {
          "kind": "mutate",
          "target": "taxAmount",
          "expression": {
            "kind": "identifier",
            "name": "taxAmount"
          }
        },
        {
          "kind": "mutate",
          "target": "discountAmount",
          "expression": {
            "kind": "identifier",
            "name": "discountAmount"
          }
        },
        {
          "kind": "mutate",
          "target": "serviceChargeAmount",
          "expression": {
            "kind": "identifier",
            "name": "serviceChargeAmount"
          }
        },
        {
          "kind": "mutate",
          "target": "totalAmount",
          "expression": {
            "kind": "identifier",
            "name": "totalAmount"
          }
        },
        {
          "kind": "mutate",
          "target": "depositRequired",
          "expression": {
            "kind": "identifier",
            "name": "depositRequired"
          }
        },
        {
          "kind": "mutate",
          "target": "depositAmount",
          "expression": {
            "kind": "identifier",
            "name": "depositAmount"
          }
        },
        {
          "kind": "mutate",
          "target": "specialInstructions",
          "expression": {
            "kind": "identifier",
            "name": "specialInstructions"
          }
        },
        {
          "kind": "mutate",
          "target": "dietaryRestrictions",
          "expression": {
            "kind": "identifier",
            "name": "dietaryRestrictions"
          }
        },
        {
          "kind": "mutate",
          "target": "staffRequired",
          "expression": {
            "kind": "identifier",
            "name": "staffRequired"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "CateringOrderUpdated"
      ]
    },
    {
      "name": "confirm",
      "entity": "CateringOrder",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "orderStatus"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "draft"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "orderNumber"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "orderNumber"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnNoDepositOnConfirm",
          "code": "warnNoDepositOnConfirm",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "depositRequired"
            },
            "right": {
              "kind": "unary",
              "operator": "not",
              "operand": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "depositPaid"
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only confirm draft orders"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Order number is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Confirming order {orderNumber} without deposit payment"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "orderNumber",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "orderNumber"
                      }
                    },
                    {
                      "key": "depositAmount",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "depositAmount"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "orderStatus",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "confirmed"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "CateringOrderConfirmed"
      ]
    },
    {
      "name": "cancel",
      "entity": "CateringOrder",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "orderStatus"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "completed"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "orderStatus"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "cancelled"
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnCancelConfirmed",
          "code": "warnCancelConfirmed",
          "expression": {
            "kind": "binary",
            "operator": "or",
            "left": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "orderStatus"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "confirmed"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "orderStatus"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "in_progress"
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot cancel completed order"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Order is already cancelled"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Cancelling {status} order {orderNumber}"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "orderNumber",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "orderNumber"
                      }
                    },
                    {
                      "key": "status",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "orderStatus"
                      }
                    },
                    {
                      "key": "reason",
                      "value": {
                        "kind": "identifier",
                        "name": "reason"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "orderStatus",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "cancelled"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "CateringOrderCancelled"
      ]
    },
    {
      "name": "startPrep",
      "entity": "CateringOrder",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "orderStatus"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "confirmed"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only start prep on confirmed orders"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "orderStatus",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "in_progress"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "CateringOrderPrepStarted"
      ]
    },
    {
      "name": "markComplete",
      "entity": "CateringOrder",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "orderStatus"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "in_progress"
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnIncompleteItems",
          "code": "warnIncompleteItems",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only complete orders that are in progress"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Completing catering order '{orderId}'  verify all items are prepared"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "orderId",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "id"
                      }
                    },
                    {
                      "key": "eventId",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "eventId"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "orderStatus",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "completed"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "CateringOrderCompleted"
      ]
    },
    {
      "name": "create",
      "entity": "ClientInteraction",
      "parameters": [
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "leadId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "employeeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "interactionType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "interactionDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "subject",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "followUpDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "correlationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "subject"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "subject"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "employeeId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "employeeId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "interactionType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "interactionType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnPastFollowUp",
          "code": "warnPastFollowUp",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "identifier",
                "name": "followUpDate"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "<",
              "left": {
                "kind": "identifier",
                "name": "followUpDate"
              },
              "right": {
                "kind": "call",
                "callee": {
                  "kind": "identifier",
                  "name": "now"
                },
                "args": []
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Subject is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Employee ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Interaction type is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Creating interaction with a follow-up date in the past ({followUpDate})"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "subject",
                      "value": {
                        "kind": "identifier",
                        "name": "subject"
                      }
                    },
                    {
                      "key": "followUpDate",
                      "value": {
                        "kind": "identifier",
                        "name": "followUpDate"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "clientId",
          "expression": {
            "kind": "identifier",
            "name": "clientId"
          }
        },
        {
          "kind": "mutate",
          "target": "leadId",
          "expression": {
            "kind": "identifier",
            "name": "leadId"
          }
        },
        {
          "kind": "mutate",
          "target": "employeeId",
          "expression": {
            "kind": "identifier",
            "name": "employeeId"
          }
        },
        {
          "kind": "mutate",
          "target": "interactionType",
          "expression": {
            "kind": "identifier",
            "name": "interactionType"
          }
        },
        {
          "kind": "mutate",
          "target": "interactionDate",
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "identifier",
                "name": "interactionDate"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "consequent": {
              "kind": "identifier",
              "name": "interactionDate"
            },
            "alternate": {
              "kind": "call",
              "callee": {
                "kind": "identifier",
                "name": "now"
              },
              "args": []
            }
          }
        },
        {
          "kind": "mutate",
          "target": "subject",
          "expression": {
            "kind": "identifier",
            "name": "subject"
          }
        },
        {
          "kind": "mutate",
          "target": "description",
          "expression": {
            "kind": "identifier",
            "name": "description"
          }
        },
        {
          "kind": "mutate",
          "target": "followUpDate",
          "expression": {
            "kind": "identifier",
            "name": "followUpDate"
          }
        },
        {
          "kind": "mutate",
          "target": "followUpCompleted",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        },
        {
          "kind": "mutate",
          "target": "correlationId",
          "expression": {
            "kind": "identifier",
            "name": "correlationId"
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ClientInteractionCreated"
      ]
    },
    {
      "name": "update",
      "entity": "ClientInteraction",
      "parameters": [
        {
          "name": "interactionType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "interactionDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "subject",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "followUpDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "correlationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "subject"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "subject"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnPastFollowUp",
          "code": "warnPastFollowUp",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "identifier",
                "name": "followUpDate"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "<",
              "left": {
                "kind": "identifier",
                "name": "followUpDate"
              },
              "right": {
                "kind": "call",
                "callee": {
                  "kind": "identifier",
                  "name": "now"
                },
                "args": []
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update a deleted interaction"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Subject is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Updating interaction with a follow-up date in the past ({followUpDate})"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "subject",
                      "value": {
                        "kind": "identifier",
                        "name": "subject"
                      }
                    },
                    {
                      "key": "followUpDate",
                      "value": {
                        "kind": "identifier",
                        "name": "followUpDate"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "interactionType",
          "expression": {
            "kind": "identifier",
            "name": "interactionType"
          }
        },
        {
          "kind": "mutate",
          "target": "interactionDate",
          "expression": {
            "kind": "identifier",
            "name": "interactionDate"
          }
        },
        {
          "kind": "mutate",
          "target": "subject",
          "expression": {
            "kind": "identifier",
            "name": "subject"
          }
        },
        {
          "kind": "mutate",
          "target": "description",
          "expression": {
            "kind": "identifier",
            "name": "description"
          }
        },
        {
          "kind": "mutate",
          "target": "followUpDate",
          "expression": {
            "kind": "identifier",
            "name": "followUpDate"
          }
        },
        {
          "kind": "mutate",
          "target": "correlationId",
          "expression": {
            "kind": "identifier",
            "name": "correlationId"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ClientInteractionUpdated"
      ]
    },
    {
      "name": "complete",
      "entity": "ClientInteraction",
      "parameters": [
        {
          "name": "completionNotes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "followUpCompleted"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnNoFollowUp",
          "code": "warnNoFollowUp",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "hasFollowUp"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "boolean",
                "value": false
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot complete a deleted interaction"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Interaction follow-up is already completed"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Completing interaction '{subject}' that has no follow-up date set"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "subject",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "subject"
                      }
                    },
                    {
                      "key": "interactionType",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "interactionType"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "followUpCompleted",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ClientInteractionCompleted"
      ]
    },
    {
      "name": "create",
      "entity": "Client",
      "parameters": [
        {
          "name": "clientType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "companyName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "firstName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "lastName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "email",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "phone",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "website",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "addressLine1",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "addressLine2",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "city",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "stateProvince",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "postalCode",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "countryCode",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "defaultPaymentTerms",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "taxExempt",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "taxId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tags",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "source",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "assignedTo",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "clientType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "clientType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "blockCompanyNoName",
          "code": "blockCompanyNoName",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "identifier",
                "name": "clientType"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "company"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "or",
              "left": {
                "kind": "binary",
                "operator": "==",
                "left": {
                  "kind": "identifier",
                  "name": "companyName"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "null"
                  }
                }
              },
              "right": {
                "kind": "binary",
                "operator": "==",
                "left": {
                  "kind": "identifier",
                  "name": "companyName"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": ""
                  }
                }
              }
            }
          },
          "severity": "block",
          "overrideable": false
        },
        {
          "name": "blockIndividualNoName",
          "code": "blockIndividualNoName",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "identifier",
                "name": "clientType"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "individual"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "or",
              "left": {
                "kind": "binary",
                "operator": "==",
                "left": {
                  "kind": "identifier",
                  "name": "firstName"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "null"
                  }
                }
              },
              "right": {
                "kind": "binary",
                "operator": "==",
                "left": {
                  "kind": "identifier",
                  "name": "firstName"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": ""
                  }
                }
              }
            }
          },
          "severity": "block",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Client type is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Company clients require a company name"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": []
                }
              }
            ]
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Individual clients require a first name"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": []
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "clientType",
          "expression": {
            "kind": "identifier",
            "name": "clientType"
          }
        },
        {
          "kind": "mutate",
          "target": "companyName",
          "expression": {
            "kind": "identifier",
            "name": "companyName"
          }
        },
        {
          "kind": "mutate",
          "target": "firstName",
          "expression": {
            "kind": "identifier",
            "name": "firstName"
          }
        },
        {
          "kind": "mutate",
          "target": "lastName",
          "expression": {
            "kind": "identifier",
            "name": "lastName"
          }
        },
        {
          "kind": "mutate",
          "target": "email",
          "expression": {
            "kind": "identifier",
            "name": "email"
          }
        },
        {
          "kind": "mutate",
          "target": "phone",
          "expression": {
            "kind": "identifier",
            "name": "phone"
          }
        },
        {
          "kind": "mutate",
          "target": "website",
          "expression": {
            "kind": "identifier",
            "name": "website"
          }
        },
        {
          "kind": "mutate",
          "target": "addressLine1",
          "expression": {
            "kind": "identifier",
            "name": "addressLine1"
          }
        },
        {
          "kind": "mutate",
          "target": "addressLine2",
          "expression": {
            "kind": "identifier",
            "name": "addressLine2"
          }
        },
        {
          "kind": "mutate",
          "target": "city",
          "expression": {
            "kind": "identifier",
            "name": "city"
          }
        },
        {
          "kind": "mutate",
          "target": "stateProvince",
          "expression": {
            "kind": "identifier",
            "name": "stateProvince"
          }
        },
        {
          "kind": "mutate",
          "target": "postalCode",
          "expression": {
            "kind": "identifier",
            "name": "postalCode"
          }
        },
        {
          "kind": "mutate",
          "target": "countryCode",
          "expression": {
            "kind": "identifier",
            "name": "countryCode"
          }
        },
        {
          "kind": "mutate",
          "target": "defaultPaymentTerms",
          "expression": {
            "kind": "identifier",
            "name": "defaultPaymentTerms"
          }
        },
        {
          "kind": "mutate",
          "target": "taxExempt",
          "expression": {
            "kind": "identifier",
            "name": "taxExempt"
          }
        },
        {
          "kind": "mutate",
          "target": "taxId",
          "expression": {
            "kind": "identifier",
            "name": "taxId"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "tags",
          "expression": {
            "kind": "identifier",
            "name": "tags"
          }
        },
        {
          "kind": "mutate",
          "target": "source",
          "expression": {
            "kind": "identifier",
            "name": "source"
          }
        },
        {
          "kind": "mutate",
          "target": "assignedTo",
          "expression": {
            "kind": "identifier",
            "name": "assignedTo"
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ClientCreated"
      ]
    },
    {
      "name": "update",
      "entity": "Client",
      "parameters": [
        {
          "name": "companyName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "firstName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "lastName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "email",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "phone",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "website",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "addressLine1",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "addressLine2",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "city",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "stateProvince",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "postalCode",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "countryCode",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "defaultPaymentTerms",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "taxExempt",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "taxId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tags",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "source",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "assignedTo",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update an archived client"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "companyName",
          "expression": {
            "kind": "identifier",
            "name": "companyName"
          }
        },
        {
          "kind": "mutate",
          "target": "firstName",
          "expression": {
            "kind": "identifier",
            "name": "firstName"
          }
        },
        {
          "kind": "mutate",
          "target": "lastName",
          "expression": {
            "kind": "identifier",
            "name": "lastName"
          }
        },
        {
          "kind": "mutate",
          "target": "email",
          "expression": {
            "kind": "identifier",
            "name": "email"
          }
        },
        {
          "kind": "mutate",
          "target": "phone",
          "expression": {
            "kind": "identifier",
            "name": "phone"
          }
        },
        {
          "kind": "mutate",
          "target": "website",
          "expression": {
            "kind": "identifier",
            "name": "website"
          }
        },
        {
          "kind": "mutate",
          "target": "addressLine1",
          "expression": {
            "kind": "identifier",
            "name": "addressLine1"
          }
        },
        {
          "kind": "mutate",
          "target": "addressLine2",
          "expression": {
            "kind": "identifier",
            "name": "addressLine2"
          }
        },
        {
          "kind": "mutate",
          "target": "city",
          "expression": {
            "kind": "identifier",
            "name": "city"
          }
        },
        {
          "kind": "mutate",
          "target": "stateProvince",
          "expression": {
            "kind": "identifier",
            "name": "stateProvince"
          }
        },
        {
          "kind": "mutate",
          "target": "postalCode",
          "expression": {
            "kind": "identifier",
            "name": "postalCode"
          }
        },
        {
          "kind": "mutate",
          "target": "countryCode",
          "expression": {
            "kind": "identifier",
            "name": "countryCode"
          }
        },
        {
          "kind": "mutate",
          "target": "defaultPaymentTerms",
          "expression": {
            "kind": "identifier",
            "name": "defaultPaymentTerms"
          }
        },
        {
          "kind": "mutate",
          "target": "taxExempt",
          "expression": {
            "kind": "identifier",
            "name": "taxExempt"
          }
        },
        {
          "kind": "mutate",
          "target": "taxId",
          "expression": {
            "kind": "identifier",
            "name": "taxId"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "tags",
          "expression": {
            "kind": "identifier",
            "name": "tags"
          }
        },
        {
          "kind": "mutate",
          "target": "source",
          "expression": {
            "kind": "identifier",
            "name": "source"
          }
        },
        {
          "kind": "mutate",
          "target": "assignedTo",
          "expression": {
            "kind": "identifier",
            "name": "assignedTo"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ClientUpdated"
      ]
    },
    {
      "name": "archive",
      "entity": "Client",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnArchiveWithAssignment",
          "code": "warnArchiveWithAssignment",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "assignedTo"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Client is already archived"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Archiving client '{clientName}' who is assigned to a sales rep"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "clientName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "displayName"
                      }
                    },
                    {
                      "key": "assignedTo",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "assignedTo"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "deletedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ClientArchived"
      ]
    },
    {
      "name": "reactivate",
      "entity": "Client",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": ">",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Client is not archived"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "deletedAt",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ClientReactivated"
      ]
    },
    {
      "name": "create",
      "entity": "ClientContact",
      "parameters": [
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "firstName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "lastName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "email",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "phone",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "phoneMobile",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "isPrimary",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "isBillingContact",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "clientId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "clientId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "firstName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "firstName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "lastName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "lastName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Client ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "First name is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Last name is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "clientId",
          "expression": {
            "kind": "identifier",
            "name": "clientId"
          }
        },
        {
          "kind": "mutate",
          "target": "firstName",
          "expression": {
            "kind": "identifier",
            "name": "firstName"
          }
        },
        {
          "kind": "mutate",
          "target": "lastName",
          "expression": {
            "kind": "identifier",
            "name": "lastName"
          }
        },
        {
          "kind": "mutate",
          "target": "title",
          "expression": {
            "kind": "identifier",
            "name": "title"
          }
        },
        {
          "kind": "mutate",
          "target": "email",
          "expression": {
            "kind": "identifier",
            "name": "email"
          }
        },
        {
          "kind": "mutate",
          "target": "phone",
          "expression": {
            "kind": "identifier",
            "name": "phone"
          }
        },
        {
          "kind": "mutate",
          "target": "phoneMobile",
          "expression": {
            "kind": "identifier",
            "name": "phoneMobile"
          }
        },
        {
          "kind": "mutate",
          "target": "isPrimary",
          "expression": {
            "kind": "identifier",
            "name": "isPrimary"
          }
        },
        {
          "kind": "mutate",
          "target": "isBillingContact",
          "expression": {
            "kind": "identifier",
            "name": "isBillingContact"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ClientContactCreated"
      ]
    },
    {
      "name": "update",
      "entity": "ClientContact",
      "parameters": [
        {
          "name": "firstName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "lastName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "email",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "phone",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "phoneMobile",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "isBillingContact",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update a removed contact"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "firstName",
          "expression": {
            "kind": "identifier",
            "name": "firstName"
          }
        },
        {
          "kind": "mutate",
          "target": "lastName",
          "expression": {
            "kind": "identifier",
            "name": "lastName"
          }
        },
        {
          "kind": "mutate",
          "target": "title",
          "expression": {
            "kind": "identifier",
            "name": "title"
          }
        },
        {
          "kind": "mutate",
          "target": "email",
          "expression": {
            "kind": "identifier",
            "name": "email"
          }
        },
        {
          "kind": "mutate",
          "target": "phone",
          "expression": {
            "kind": "identifier",
            "name": "phone"
          }
        },
        {
          "kind": "mutate",
          "target": "phoneMobile",
          "expression": {
            "kind": "identifier",
            "name": "phoneMobile"
          }
        },
        {
          "kind": "mutate",
          "target": "isBillingContact",
          "expression": {
            "kind": "identifier",
            "name": "isBillingContact"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ClientContactUpdated"
      ]
    },
    {
      "name": "remove",
      "entity": "ClientContact",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnRemovePrimary",
          "code": "warnRemovePrimary",
          "expression": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isPrimary"
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Contact is already removed"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Removing primary contact '{contactName}' from client"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "contactName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "fullName"
                      }
                    },
                    {
                      "key": "clientId",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "clientId"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "deletedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ClientContactRemoved"
      ]
    },
    {
      "name": "setPrimary",
      "entity": "ClientContact",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isPrimary"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot set a removed contact as primary"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Contact is already primary"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "isPrimary",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ClientContactSetPrimary"
      ]
    },
    {
      "name": "create",
      "entity": "ClientPreference",
      "parameters": [
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "preferenceType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "preferenceKey",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "preferenceValue",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "clientId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "clientId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "preferenceType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "preferenceType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "preferenceKey"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "preferenceKey"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Client ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Preference type is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Preference key is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "clientId",
          "expression": {
            "kind": "identifier",
            "name": "clientId"
          }
        },
        {
          "kind": "mutate",
          "target": "preferenceType",
          "expression": {
            "kind": "identifier",
            "name": "preferenceType"
          }
        },
        {
          "kind": "mutate",
          "target": "preferenceKey",
          "expression": {
            "kind": "identifier",
            "name": "preferenceKey"
          }
        },
        {
          "kind": "mutate",
          "target": "preferenceValue",
          "expression": {
            "kind": "identifier",
            "name": "preferenceValue"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ClientPreferenceCreated"
      ]
    },
    {
      "name": "update",
      "entity": "ClientPreference",
      "parameters": [
        {
          "name": "preferenceValue",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update a removed preference"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "preferenceValue",
          "expression": {
            "kind": "identifier",
            "name": "preferenceValue"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ClientPreferenceUpdated"
      ]
    },
    {
      "name": "remove",
      "entity": "ClientPreference",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Preference is already removed"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "deletedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ClientPreferenceRemoved"
      ]
    },
    {
      "name": "create",
      "entity": "CommandBoard",
      "parameters": [
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "isTemplate",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tags",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Board name is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "name",
          "expression": {
            "kind": "identifier",
            "name": "name"
          }
        },
        {
          "kind": "mutate",
          "target": "description",
          "expression": {
            "kind": "identifier",
            "name": "description"
          }
        },
        {
          "kind": "mutate",
          "target": "eventId",
          "expression": {
            "kind": "identifier",
            "name": "eventId"
          }
        },
        {
          "kind": "mutate",
          "target": "isTemplate",
          "expression": {
            "kind": "identifier",
            "name": "isTemplate"
          }
        },
        {
          "kind": "mutate",
          "target": "tags",
          "expression": {
            "kind": "identifier",
            "name": "tags"
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "draft"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "CommandBoardCreated"
      ]
    },
    {
      "name": "update",
      "entity": "CommandBoard",
      "parameters": [
        {
          "name": "newName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newDescription",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newTags",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "draft"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnNameChange",
          "code": "warnNameChange",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "name"
            },
            "right": {
              "kind": "identifier",
              "name": "newName"
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only update draft boards"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Board name is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Renaming board from '{oldName}' to '{newName}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "oldName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "newName",
                      "value": {
                        "kind": "identifier",
                        "name": "newName"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "name",
          "expression": {
            "kind": "identifier",
            "name": "newName"
          }
        },
        {
          "kind": "mutate",
          "target": "description",
          "expression": {
            "kind": "identifier",
            "name": "newDescription"
          }
        },
        {
          "kind": "mutate",
          "target": "tags",
          "expression": {
            "kind": "identifier",
            "name": "newTags"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "CommandBoardUpdated"
      ]
    },
    {
      "name": "activate",
      "entity": "CommandBoard",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "draft"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only activate draft boards"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "active"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "CommandBoardActivated"
      ]
    },
    {
      "name": "deactivate",
      "entity": "CommandBoard",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "archived"
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnHasActiveCards",
          "code": "warnHasActiveCards",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Board is already archived"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Deactivating board '{boardName}' may affect active cards"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "boardName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "reason",
                      "value": {
                        "kind": "identifier",
                        "name": "reason"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "archived"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "deletedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "CommandBoardDeactivated"
      ]
    },
    {
      "name": "create",
      "entity": "CommandBoardCard",
      "parameters": [
        {
          "name": "boardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "content",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "cardType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "status",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "positionX",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "positionY",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "width",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "height",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "color",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "metadata",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "groupId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "entityId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "entityType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "boardId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "boardId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "title"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "title"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Board ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Card title is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "boardId",
          "expression": {
            "kind": "identifier",
            "name": "boardId"
          }
        },
        {
          "kind": "mutate",
          "target": "title",
          "expression": {
            "kind": "identifier",
            "name": "title"
          }
        },
        {
          "kind": "mutate",
          "target": "content",
          "expression": {
            "kind": "identifier",
            "name": "content"
          }
        },
        {
          "kind": "mutate",
          "target": "cardType",
          "expression": {
            "kind": "identifier",
            "name": "cardType"
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "identifier",
            "name": "status"
          }
        },
        {
          "kind": "mutate",
          "target": "positionX",
          "expression": {
            "kind": "identifier",
            "name": "positionX"
          }
        },
        {
          "kind": "mutate",
          "target": "positionY",
          "expression": {
            "kind": "identifier",
            "name": "positionY"
          }
        },
        {
          "kind": "mutate",
          "target": "width",
          "expression": {
            "kind": "identifier",
            "name": "width"
          }
        },
        {
          "kind": "mutate",
          "target": "height",
          "expression": {
            "kind": "identifier",
            "name": "height"
          }
        },
        {
          "kind": "mutate",
          "target": "color",
          "expression": {
            "kind": "identifier",
            "name": "color"
          }
        },
        {
          "kind": "mutate",
          "target": "metadata",
          "expression": {
            "kind": "identifier",
            "name": "metadata"
          }
        },
        {
          "kind": "mutate",
          "target": "groupId",
          "expression": {
            "kind": "identifier",
            "name": "groupId"
          }
        },
        {
          "kind": "mutate",
          "target": "entityId",
          "expression": {
            "kind": "identifier",
            "name": "entityId"
          }
        },
        {
          "kind": "mutate",
          "target": "entityType",
          "expression": {
            "kind": "identifier",
            "name": "entityType"
          }
        },
        {
          "kind": "mutate",
          "target": "version",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "zIndex",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "CommandBoardCardCreated"
      ]
    },
    {
      "name": "update",
      "entity": "CommandBoardCard",
      "parameters": [
        {
          "name": "newTitle",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newContent",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newCardType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newStatus",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newColor",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newMetadata",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newGroupId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newTitle"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newTitle"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnStatusChange",
          "code": "warnStatusChange",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "identifier",
              "name": "newStatus"
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Card title is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Card '{cardTitle}' status changing from '{oldStatus}' to '{newStatus}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "cardTitle",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "title"
                      }
                    },
                    {
                      "key": "oldStatus",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "status"
                      }
                    },
                    {
                      "key": "newStatus",
                      "value": {
                        "kind": "identifier",
                        "name": "newStatus"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "title",
          "expression": {
            "kind": "identifier",
            "name": "newTitle"
          }
        },
        {
          "kind": "mutate",
          "target": "content",
          "expression": {
            "kind": "identifier",
            "name": "newContent"
          }
        },
        {
          "kind": "mutate",
          "target": "cardType",
          "expression": {
            "kind": "identifier",
            "name": "newCardType"
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "identifier",
            "name": "newStatus"
          }
        },
        {
          "kind": "mutate",
          "target": "color",
          "expression": {
            "kind": "identifier",
            "name": "newColor"
          }
        },
        {
          "kind": "mutate",
          "target": "metadata",
          "expression": {
            "kind": "identifier",
            "name": "newMetadata"
          }
        },
        {
          "kind": "mutate",
          "target": "groupId",
          "expression": {
            "kind": "identifier",
            "name": "newGroupId"
          }
        },
        {
          "kind": "mutate",
          "target": "version",
          "expression": {
            "kind": "binary",
            "operator": "+",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "version"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 1
              }
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "CommandBoardCardUpdated"
      ]
    },
    {
      "name": "move",
      "entity": "CommandBoardCard",
      "parameters": [
        {
          "name": "newPositionX",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newPositionY",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newZIndex",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "identifier",
            "name": "newPositionX"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "null"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "identifier",
            "name": "newPositionY"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "null"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Position X is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Position Y is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "positionX",
          "expression": {
            "kind": "identifier",
            "name": "newPositionX"
          }
        },
        {
          "kind": "mutate",
          "target": "positionY",
          "expression": {
            "kind": "identifier",
            "name": "newPositionY"
          }
        },
        {
          "kind": "mutate",
          "target": "zIndex",
          "expression": {
            "kind": "identifier",
            "name": "newZIndex"
          }
        },
        {
          "kind": "mutate",
          "target": "version",
          "expression": {
            "kind": "binary",
            "operator": "+",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "version"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 1
              }
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "CommandBoardCardMoved"
      ]
    },
    {
      "name": "resize",
      "entity": "CommandBoardCard",
      "parameters": [
        {
          "name": "newWidth",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newHeight",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newWidth"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "newWidth"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newHeight"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "newHeight"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Width must be positive"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Height must be positive"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "width",
          "expression": {
            "kind": "identifier",
            "name": "newWidth"
          }
        },
        {
          "kind": "mutate",
          "target": "height",
          "expression": {
            "kind": "identifier",
            "name": "newHeight"
          }
        },
        {
          "kind": "mutate",
          "target": "version",
          "expression": {
            "kind": "binary",
            "operator": "+",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "version"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 1
              }
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "CommandBoardCardResized"
      ]
    },
    {
      "name": "remove",
      "entity": "CommandBoardCard",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Card is already deleted"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "deletedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "CommandBoardCardDeleted"
      ]
    },
    {
      "name": "create",
      "entity": "CommandBoardGroup",
      "parameters": [
        {
          "name": "boardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "color",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "positionX",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "positionY",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "width",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "height",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "boardId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "boardId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Board ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Group name is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "boardId",
          "expression": {
            "kind": "identifier",
            "name": "boardId"
          }
        },
        {
          "kind": "mutate",
          "target": "name",
          "expression": {
            "kind": "identifier",
            "name": "name"
          }
        },
        {
          "kind": "mutate",
          "target": "color",
          "expression": {
            "kind": "identifier",
            "name": "color"
          }
        },
        {
          "kind": "mutate",
          "target": "positionX",
          "expression": {
            "kind": "identifier",
            "name": "positionX"
          }
        },
        {
          "kind": "mutate",
          "target": "positionY",
          "expression": {
            "kind": "identifier",
            "name": "positionY"
          }
        },
        {
          "kind": "mutate",
          "target": "width",
          "expression": {
            "kind": "identifier",
            "name": "width"
          }
        },
        {
          "kind": "mutate",
          "target": "height",
          "expression": {
            "kind": "identifier",
            "name": "height"
          }
        },
        {
          "kind": "mutate",
          "target": "collapsed",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        },
        {
          "kind": "mutate",
          "target": "zIndex",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "CommandBoardGroupCreated"
      ]
    },
    {
      "name": "update",
      "entity": "CommandBoardGroup",
      "parameters": [
        {
          "name": "newName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newColor",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newCollapsed",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newPositionX",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newPositionY",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newWidth",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newHeight",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Group name is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "name",
          "expression": {
            "kind": "identifier",
            "name": "newName"
          }
        },
        {
          "kind": "mutate",
          "target": "color",
          "expression": {
            "kind": "identifier",
            "name": "newColor"
          }
        },
        {
          "kind": "mutate",
          "target": "collapsed",
          "expression": {
            "kind": "identifier",
            "name": "newCollapsed"
          }
        },
        {
          "kind": "mutate",
          "target": "positionX",
          "expression": {
            "kind": "identifier",
            "name": "newPositionX"
          }
        },
        {
          "kind": "mutate",
          "target": "positionY",
          "expression": {
            "kind": "identifier",
            "name": "newPositionY"
          }
        },
        {
          "kind": "mutate",
          "target": "width",
          "expression": {
            "kind": "identifier",
            "name": "newWidth"
          }
        },
        {
          "kind": "mutate",
          "target": "height",
          "expression": {
            "kind": "identifier",
            "name": "newHeight"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "CommandBoardGroupUpdated"
      ]
    },
    {
      "name": "remove",
      "entity": "CommandBoardGroup",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Group is already deleted"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "deletedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "CommandBoardGroupDeleted"
      ]
    },
    {
      "name": "create",
      "entity": "CommandBoardConnection",
      "parameters": [
        {
          "name": "boardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "fromCardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "toCardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "relationshipType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "label",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "boardId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "boardId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "fromCardId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "fromCardId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "toCardId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "toCardId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "identifier",
            "name": "fromCardId"
          },
          "right": {
            "kind": "identifier",
            "name": "toCardId"
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Board ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Source card ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Target card ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot connect a card to itself"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "boardId",
          "expression": {
            "kind": "identifier",
            "name": "boardId"
          }
        },
        {
          "kind": "mutate",
          "target": "fromCardId",
          "expression": {
            "kind": "identifier",
            "name": "fromCardId"
          }
        },
        {
          "kind": "mutate",
          "target": "toCardId",
          "expression": {
            "kind": "identifier",
            "name": "toCardId"
          }
        },
        {
          "kind": "mutate",
          "target": "relationshipType",
          "expression": {
            "kind": "identifier",
            "name": "relationshipType"
          }
        },
        {
          "kind": "mutate",
          "target": "label",
          "expression": {
            "kind": "identifier",
            "name": "label"
          }
        },
        {
          "kind": "mutate",
          "target": "visible",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "CommandBoardConnectionCreated"
      ]
    },
    {
      "name": "remove",
      "entity": "CommandBoardConnection",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Connection is already deleted"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "deletedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "CommandBoardConnectionDeleted"
      ]
    },
    {
      "name": "create",
      "entity": "CommandBoardLayout",
      "parameters": [
        {
          "name": "boardId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "viewport",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "visibleCards",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "gridSize",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "showGrid",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "snapToGrid",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "boardId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "boardId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Board ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "User ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Layout name is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "boardId",
          "expression": {
            "kind": "identifier",
            "name": "boardId"
          }
        },
        {
          "kind": "mutate",
          "target": "userId",
          "expression": {
            "kind": "identifier",
            "name": "userId"
          }
        },
        {
          "kind": "mutate",
          "target": "name",
          "expression": {
            "kind": "identifier",
            "name": "name"
          }
        },
        {
          "kind": "mutate",
          "target": "viewport",
          "expression": {
            "kind": "identifier",
            "name": "viewport"
          }
        },
        {
          "kind": "mutate",
          "target": "visibleCards",
          "expression": {
            "kind": "identifier",
            "name": "visibleCards"
          }
        },
        {
          "kind": "mutate",
          "target": "gridSize",
          "expression": {
            "kind": "identifier",
            "name": "gridSize"
          }
        },
        {
          "kind": "mutate",
          "target": "showGrid",
          "expression": {
            "kind": "identifier",
            "name": "showGrid"
          }
        },
        {
          "kind": "mutate",
          "target": "snapToGrid",
          "expression": {
            "kind": "identifier",
            "name": "snapToGrid"
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "CommandBoardLayoutCreated"
      ]
    },
    {
      "name": "update",
      "entity": "CommandBoardLayout",
      "parameters": [
        {
          "name": "newName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newViewport",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newVisibleCards",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newGridSize",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newShowGrid",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newSnapToGrid",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Layout name is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "name",
          "expression": {
            "kind": "identifier",
            "name": "newName"
          }
        },
        {
          "kind": "mutate",
          "target": "viewport",
          "expression": {
            "kind": "identifier",
            "name": "newViewport"
          }
        },
        {
          "kind": "mutate",
          "target": "visibleCards",
          "expression": {
            "kind": "identifier",
            "name": "newVisibleCards"
          }
        },
        {
          "kind": "mutate",
          "target": "gridSize",
          "expression": {
            "kind": "identifier",
            "name": "newGridSize"
          }
        },
        {
          "kind": "mutate",
          "target": "showGrid",
          "expression": {
            "kind": "identifier",
            "name": "newShowGrid"
          }
        },
        {
          "kind": "mutate",
          "target": "snapToGrid",
          "expression": {
            "kind": "identifier",
            "name": "newSnapToGrid"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "CommandBoardLayoutUpdated"
      ]
    },
    {
      "name": "remove",
      "entity": "CommandBoardLayout",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Layout is already deleted"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "deletedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "CommandBoardLayoutDeleted"
      ]
    },
    {
      "name": "create",
      "entity": "Container",
      "parameters": [
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "containerType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "sizeDescription",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "capacityVolumeMl",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "capacityWeightG",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "capacityPortions",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "isReusable",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "containerType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "containerType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">=",
          "left": {
            "kind": "identifier",
            "name": "capacityVolumeMl"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">=",
          "left": {
            "kind": "identifier",
            "name": "capacityWeightG"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">=",
          "left": {
            "kind": "identifier",
            "name": "capacityPortions"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Container name is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Container type is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Volume capacity cannot be negative"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Weight capacity cannot be negative"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Portion capacity cannot be negative"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "name",
          "expression": {
            "kind": "identifier",
            "name": "name"
          }
        },
        {
          "kind": "mutate",
          "target": "containerType",
          "expression": {
            "kind": "identifier",
            "name": "containerType"
          }
        },
        {
          "kind": "mutate",
          "target": "locationId",
          "expression": {
            "kind": "identifier",
            "name": "locationId"
          }
        },
        {
          "kind": "mutate",
          "target": "sizeDescription",
          "expression": {
            "kind": "identifier",
            "name": "sizeDescription"
          }
        },
        {
          "kind": "mutate",
          "target": "capacityVolumeMl",
          "expression": {
            "kind": "identifier",
            "name": "capacityVolumeMl"
          }
        },
        {
          "kind": "mutate",
          "target": "capacityWeightG",
          "expression": {
            "kind": "identifier",
            "name": "capacityWeightG"
          }
        },
        {
          "kind": "mutate",
          "target": "capacityPortions",
          "expression": {
            "kind": "identifier",
            "name": "capacityPortions"
          }
        },
        {
          "kind": "mutate",
          "target": "isReusable",
          "expression": {
            "kind": "identifier",
            "name": "isReusable"
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ContainerCreated"
      ]
    },
    {
      "name": "update",
      "entity": "Container",
      "parameters": [
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "containerType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "sizeDescription",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "capacityVolumeMl",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "capacityWeightG",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "capacityPortions",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "isReusable",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "self"
          },
          "property": "isActive"
        },
        {
          "kind": "binary",
          "operator": ">=",
          "left": {
            "kind": "identifier",
            "name": "capacityVolumeMl"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">=",
          "left": {
            "kind": "identifier",
            "name": "capacityWeightG"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">=",
          "left": {
            "kind": "identifier",
            "name": "capacityPortions"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Container name is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update a deactivated container"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Volume capacity cannot be negative"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Weight capacity cannot be negative"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Portion capacity cannot be negative"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "name",
          "expression": {
            "kind": "identifier",
            "name": "name"
          }
        },
        {
          "kind": "mutate",
          "target": "containerType",
          "expression": {
            "kind": "identifier",
            "name": "containerType"
          }
        },
        {
          "kind": "mutate",
          "target": "locationId",
          "expression": {
            "kind": "identifier",
            "name": "locationId"
          }
        },
        {
          "kind": "mutate",
          "target": "sizeDescription",
          "expression": {
            "kind": "identifier",
            "name": "sizeDescription"
          }
        },
        {
          "kind": "mutate",
          "target": "capacityVolumeMl",
          "expression": {
            "kind": "identifier",
            "name": "capacityVolumeMl"
          }
        },
        {
          "kind": "mutate",
          "target": "capacityWeightG",
          "expression": {
            "kind": "identifier",
            "name": "capacityWeightG"
          }
        },
        {
          "kind": "mutate",
          "target": "capacityPortions",
          "expression": {
            "kind": "identifier",
            "name": "capacityPortions"
          }
        },
        {
          "kind": "mutate",
          "target": "isReusable",
          "expression": {
            "kind": "identifier",
            "name": "isReusable"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ContainerUpdated"
      ]
    },
    {
      "name": "deactivate",
      "entity": "Container",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "self"
          },
          "property": "isActive"
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Container is already deactivated"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ContainerDeactivated"
      ]
    },
    {
      "name": "create",
      "entity": "CycleCountSession",
      "parameters": [
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "sessionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "sessionName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "countType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "scheduledDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "sessionName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "sessionName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "locationId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "locationId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Session name is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Location is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "locationId",
          "expression": {
            "kind": "identifier",
            "name": "locationId"
          }
        },
        {
          "kind": "mutate",
          "target": "sessionId",
          "expression": {
            "kind": "identifier",
            "name": "sessionId"
          }
        },
        {
          "kind": "mutate",
          "target": "sessionName",
          "expression": {
            "kind": "identifier",
            "name": "sessionName"
          }
        },
        {
          "kind": "mutate",
          "target": "countType",
          "expression": {
            "kind": "identifier",
            "name": "countType"
          }
        },
        {
          "kind": "mutate",
          "target": "scheduledDate",
          "expression": {
            "kind": "identifier",
            "name": "scheduledDate"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "createdById",
          "expression": {
            "kind": "identifier",
            "name": "userId"
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "draft"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "totalItems",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "countedItems",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "totalVariance",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "variancePercentage",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "CycleCountSessionCreated"
      ]
    },
    {
      "name": "start",
      "entity": "CycleCountSession",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "draft"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only start draft sessions"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "in_progress"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "startedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "CycleCountSessionStarted"
      ]
    },
    {
      "name": "complete",
      "entity": "CycleCountSession",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "in_progress"
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnIncomplete",
          "code": "warnIncomplete",
          "expression": {
            "kind": "binary",
            "operator": "<",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "countedItems"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "totalItems"
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only complete in-progress sessions"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Completing session '{sessionName}' with only {counted}/{total} items counted"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "sessionName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "sessionName"
                      }
                    },
                    {
                      "key": "counted",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "countedItems"
                      }
                    },
                    {
                      "key": "total",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "totalItems"
                      }
                    },
                    {
                      "key": "progress",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "countProgress"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "completed"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "completedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "CycleCountSessionCompleted"
      ]
    },
    {
      "name": "finalize",
      "entity": "CycleCountSession",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "completed"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only finalize completed sessions"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "finalized"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "CycleCountSessionFinalized"
      ]
    },
    {
      "name": "cancel",
      "entity": "CycleCountSession",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "completed"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "cancelled"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "finalized"
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnCancelInProgress",
          "code": "warnCancelInProgress",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "status"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "in_progress"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "countedItems"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot cancel a completed session"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Session is already cancelled"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot cancel a finalized session"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Cancelling in-progress session '{sessionName}' with {counted} items already counted"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "sessionName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "sessionName"
                      }
                    },
                    {
                      "key": "counted",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "countedItems"
                      }
                    },
                    {
                      "key": "reason",
                      "value": {
                        "kind": "identifier",
                        "name": "reason"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "cancelled"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "reason"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "CycleCountSessionCancelled"
      ]
    },
    {
      "name": "create",
      "entity": "CycleCountRecord",
      "parameters": [
        {
          "name": "sessionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "storageLocationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "expectedQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "countedQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "barcode",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "sessionId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "sessionId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "itemId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "itemId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "countedQuantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "identifier",
              "name": "countedQuantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Session ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Item ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Counted quantity cannot be negative"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "sessionId",
          "expression": {
            "kind": "identifier",
            "name": "sessionId"
          }
        },
        {
          "kind": "mutate",
          "target": "itemId",
          "expression": {
            "kind": "identifier",
            "name": "itemId"
          }
        },
        {
          "kind": "mutate",
          "target": "itemNumber",
          "expression": {
            "kind": "identifier",
            "name": "itemNumber"
          }
        },
        {
          "kind": "mutate",
          "target": "itemName",
          "expression": {
            "kind": "identifier",
            "name": "itemName"
          }
        },
        {
          "kind": "mutate",
          "target": "storageLocationId",
          "expression": {
            "kind": "identifier",
            "name": "storageLocationId"
          }
        },
        {
          "kind": "mutate",
          "target": "expectedQuantity",
          "expression": {
            "kind": "identifier",
            "name": "expectedQuantity"
          }
        },
        {
          "kind": "mutate",
          "target": "countedQuantity",
          "expression": {
            "kind": "identifier",
            "name": "countedQuantity"
          }
        },
        {
          "kind": "mutate",
          "target": "variance",
          "expression": {
            "kind": "binary",
            "operator": "-",
            "left": {
              "kind": "identifier",
              "name": "countedQuantity"
            },
            "right": {
              "kind": "identifier",
              "name": "expectedQuantity"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "variancePct",
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "identifier",
                "name": "expectedQuantity"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "consequent": {
              "kind": "binary",
              "operator": "*",
              "left": {
                "kind": "binary",
                "operator": "/",
                "left": {
                  "kind": "binary",
                  "operator": "-",
                  "left": {
                    "kind": "identifier",
                    "name": "countedQuantity"
                  },
                  "right": {
                    "kind": "identifier",
                    "name": "expectedQuantity"
                  }
                },
                "right": {
                  "kind": "identifier",
                  "name": "expectedQuantity"
                }
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 100
                }
              }
            },
            "alternate": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "mutate",
          "target": "countDate",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "countedById",
          "expression": {
            "kind": "identifier",
            "name": "userId"
          }
        },
        {
          "kind": "mutate",
          "target": "barcode",
          "expression": {
            "kind": "identifier",
            "name": "barcode"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "isVerified",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        },
        {
          "kind": "mutate",
          "target": "syncStatus",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "synced"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "CycleCountRecordCreated"
      ]
    },
    {
      "name": "update",
      "entity": "CycleCountRecord",
      "parameters": [
        {
          "name": "countedQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "countedQuantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "identifier",
              "name": "countedQuantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "unary",
          "operator": "not",
          "operand": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isVerified"
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Counted quantity cannot be negative"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update a verified record"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "countedQuantity",
          "expression": {
            "kind": "identifier",
            "name": "countedQuantity"
          }
        },
        {
          "kind": "mutate",
          "target": "variance",
          "expression": {
            "kind": "binary",
            "operator": "-",
            "left": {
              "kind": "identifier",
              "name": "countedQuantity"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "expectedQuantity"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "variancePct",
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "expectedQuantity"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "consequent": {
              "kind": "binary",
              "operator": "*",
              "left": {
                "kind": "binary",
                "operator": "/",
                "left": {
                  "kind": "binary",
                  "operator": "-",
                  "left": {
                    "kind": "identifier",
                    "name": "countedQuantity"
                  },
                  "right": {
                    "kind": "member",
                    "object": {
                      "kind": "identifier",
                      "name": "self"
                    },
                    "property": "expectedQuantity"
                  }
                },
                "right": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "expectedQuantity"
                }
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 100
                }
              }
            },
            "alternate": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "countedById",
          "expression": {
            "kind": "identifier",
            "name": "userId"
          }
        },
        {
          "kind": "mutate",
          "target": "countDate",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "CycleCountRecordUpdated"
      ]
    },
    {
      "name": "verify",
      "entity": "CycleCountRecord",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "unary",
          "operator": "not",
          "operand": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isVerified"
          }
        }
      ],
      "constraints": [
        {
          "name": "warnLargeVariance",
          "code": "warnLargeVariance",
          "expression": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isLargeVariance"
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Record is already verified"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Verifying record for '{itemName}' with large variance ({variancePct}%)"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "itemName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "itemName"
                      }
                    },
                    {
                      "key": "variance",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "variance"
                      }
                    },
                    {
                      "key": "variancePct",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "variancePct"
                      }
                    },
                    {
                      "key": "expected",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "expectedQuantity"
                      }
                    },
                    {
                      "key": "counted",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "countedQuantity"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "isVerified",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        },
        {
          "kind": "mutate",
          "target": "verifiedById",
          "expression": {
            "kind": "identifier",
            "name": "userId"
          }
        },
        {
          "kind": "mutate",
          "target": "verifiedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "CycleCountRecordVerified"
      ]
    },
    {
      "name": "create",
      "entity": "VarianceReport",
      "parameters": [
        {
          "name": "sessionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reportType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "expectedQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "countedQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "variance",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "variancePct",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "accuracyScore",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "sessionId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "sessionId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "itemId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "itemId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Session ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Item ID is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "sessionId",
          "expression": {
            "kind": "identifier",
            "name": "sessionId"
          }
        },
        {
          "kind": "mutate",
          "target": "reportType",
          "expression": {
            "kind": "identifier",
            "name": "reportType"
          }
        },
        {
          "kind": "mutate",
          "target": "itemId",
          "expression": {
            "kind": "identifier",
            "name": "itemId"
          }
        },
        {
          "kind": "mutate",
          "target": "itemNumber",
          "expression": {
            "kind": "identifier",
            "name": "itemNumber"
          }
        },
        {
          "kind": "mutate",
          "target": "itemName",
          "expression": {
            "kind": "identifier",
            "name": "itemName"
          }
        },
        {
          "kind": "mutate",
          "target": "expectedQuantity",
          "expression": {
            "kind": "identifier",
            "name": "expectedQuantity"
          }
        },
        {
          "kind": "mutate",
          "target": "countedQuantity",
          "expression": {
            "kind": "identifier",
            "name": "countedQuantity"
          }
        },
        {
          "kind": "mutate",
          "target": "variance",
          "expression": {
            "kind": "identifier",
            "name": "variance"
          }
        },
        {
          "kind": "mutate",
          "target": "variancePct",
          "expression": {
            "kind": "identifier",
            "name": "variancePct"
          }
        },
        {
          "kind": "mutate",
          "target": "accuracyScore",
          "expression": {
            "kind": "identifier",
            "name": "accuracyScore"
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "pending"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "generatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "VarianceReportCreated"
      ]
    },
    {
      "name": "review",
      "entity": "VarianceReport",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "pending"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only review pending reports"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "reviewed"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "VarianceReportReviewed"
      ]
    },
    {
      "name": "approve",
      "entity": "VarianceReport",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "adjustmentType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "adjustmentAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "reviewed"
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnHighVariance",
          "code": "warnHighVariance",
          "expression": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isHighVariance"
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only approve reviewed reports"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Approving high-variance report for '{itemName}' ({variancePct}% variance)"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "itemName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "itemName"
                      }
                    },
                    {
                      "key": "variance",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "variance"
                      }
                    },
                    {
                      "key": "variancePct",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "variancePct"
                      }
                    },
                    {
                      "key": "adjustmentType",
                      "value": {
                        "kind": "identifier",
                        "name": "adjustmentType"
                      }
                    },
                    {
                      "key": "adjustmentAmount",
                      "value": {
                        "kind": "identifier",
                        "name": "adjustmentAmount"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "approved"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "adjustmentType",
          "expression": {
            "kind": "identifier",
            "name": "adjustmentType"
          }
        },
        {
          "kind": "mutate",
          "target": "adjustmentAmount",
          "expression": {
            "kind": "identifier",
            "name": "adjustmentAmount"
          }
        },
        {
          "kind": "mutate",
          "target": "adjustmentDate",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "VarianceReportApproved"
      ]
    },
    {
      "name": "create",
      "entity": "Dish",
      "parameters": [
        {
          "name": "recipeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "serviceStyle",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "defaultContainerId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "presentationImageUrl",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "minPrepLeadDays",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "maxPrepLeadDays",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "portionSizeDescription",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "dietaryTags",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "allergens",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "pricePerPerson",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "costPerPerson",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "recipeId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "recipeId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">=",
          "left": {
            "kind": "identifier",
            "name": "pricePerPerson"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">=",
          "left": {
            "kind": "identifier",
            "name": "costPerPerson"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">=",
          "left": {
            "kind": "identifier",
            "name": "minPrepLeadDays"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Dish name is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Recipe ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Price per person cannot be negative"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cost per person cannot be negative"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Min prep lead days cannot be negative"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "recipeId",
          "expression": {
            "kind": "identifier",
            "name": "recipeId"
          }
        },
        {
          "kind": "mutate",
          "target": "name",
          "expression": {
            "kind": "identifier",
            "name": "name"
          }
        },
        {
          "kind": "mutate",
          "target": "description",
          "expression": {
            "kind": "identifier",
            "name": "description"
          }
        },
        {
          "kind": "mutate",
          "target": "category",
          "expression": {
            "kind": "identifier",
            "name": "category"
          }
        },
        {
          "kind": "mutate",
          "target": "serviceStyle",
          "expression": {
            "kind": "identifier",
            "name": "serviceStyle"
          }
        },
        {
          "kind": "mutate",
          "target": "defaultContainerId",
          "expression": {
            "kind": "identifier",
            "name": "defaultContainerId"
          }
        },
        {
          "kind": "mutate",
          "target": "presentationImageUrl",
          "expression": {
            "kind": "identifier",
            "name": "presentationImageUrl"
          }
        },
        {
          "kind": "mutate",
          "target": "minPrepLeadDays",
          "expression": {
            "kind": "identifier",
            "name": "minPrepLeadDays"
          }
        },
        {
          "kind": "mutate",
          "target": "maxPrepLeadDays",
          "expression": {
            "kind": "identifier",
            "name": "maxPrepLeadDays"
          }
        },
        {
          "kind": "mutate",
          "target": "portionSizeDescription",
          "expression": {
            "kind": "identifier",
            "name": "portionSizeDescription"
          }
        },
        {
          "kind": "mutate",
          "target": "dietaryTags",
          "expression": {
            "kind": "identifier",
            "name": "dietaryTags"
          }
        },
        {
          "kind": "mutate",
          "target": "allergens",
          "expression": {
            "kind": "identifier",
            "name": "allergens"
          }
        },
        {
          "kind": "mutate",
          "target": "pricePerPerson",
          "expression": {
            "kind": "identifier",
            "name": "pricePerPerson"
          }
        },
        {
          "kind": "mutate",
          "target": "costPerPerson",
          "expression": {
            "kind": "identifier",
            "name": "costPerPerson"
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "DishCreated"
      ]
    },
    {
      "name": "update",
      "entity": "Dish",
      "parameters": [
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "serviceStyle",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "defaultContainerId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "presentationImageUrl",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "portionSizeDescription",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "dietaryTags",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "allergens",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "self"
          },
          "property": "isActive"
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Dish name is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update a deactivated dish"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "name",
          "expression": {
            "kind": "identifier",
            "name": "name"
          }
        },
        {
          "kind": "mutate",
          "target": "description",
          "expression": {
            "kind": "identifier",
            "name": "description"
          }
        },
        {
          "kind": "mutate",
          "target": "category",
          "expression": {
            "kind": "identifier",
            "name": "category"
          }
        },
        {
          "kind": "mutate",
          "target": "serviceStyle",
          "expression": {
            "kind": "identifier",
            "name": "serviceStyle"
          }
        },
        {
          "kind": "mutate",
          "target": "defaultContainerId",
          "expression": {
            "kind": "identifier",
            "name": "defaultContainerId"
          }
        },
        {
          "kind": "mutate",
          "target": "presentationImageUrl",
          "expression": {
            "kind": "identifier",
            "name": "presentationImageUrl"
          }
        },
        {
          "kind": "mutate",
          "target": "portionSizeDescription",
          "expression": {
            "kind": "identifier",
            "name": "portionSizeDescription"
          }
        },
        {
          "kind": "mutate",
          "target": "dietaryTags",
          "expression": {
            "kind": "identifier",
            "name": "dietaryTags"
          }
        },
        {
          "kind": "mutate",
          "target": "allergens",
          "expression": {
            "kind": "identifier",
            "name": "allergens"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "DishUpdated"
      ]
    },
    {
      "name": "deactivate",
      "entity": "Dish",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "self"
          },
          "property": "isActive"
        }
      ],
      "constraints": [
        {
          "name": "warnActiveMenu",
          "code": "warnActiveMenu",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Dish is already deactivated"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Deactivating dish '{dishName}'  verify it is not on any active menus"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "dishName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "dishId",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "id"
                      }
                    },
                    {
                      "key": "reason",
                      "value": {
                        "kind": "identifier",
                        "name": "reason"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "DishDeactivated"
      ]
    },
    {
      "name": "updatePricing",
      "entity": "Dish",
      "parameters": [
        {
          "name": "pricePerPerson",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "costPerPerson",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "self"
          },
          "property": "isActive"
        },
        {
          "kind": "binary",
          "operator": ">=",
          "left": {
            "kind": "identifier",
            "name": "pricePerPerson"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">=",
          "left": {
            "kind": "identifier",
            "name": "costPerPerson"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnLowMargin",
          "code": "warnLowMargin",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "and",
              "left": {
                "kind": "binary",
                "operator": ">",
                "left": {
                  "kind": "identifier",
                  "name": "pricePerPerson"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "number",
                    "value": 0
                  }
                }
              },
              "right": {
                "kind": "binary",
                "operator": ">",
                "left": {
                  "kind": "identifier",
                  "name": "costPerPerson"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "number",
                    "value": 0
                  }
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "<",
              "left": {
                "kind": "binary",
                "operator": "*",
                "left": {
                  "kind": "binary",
                  "operator": "/",
                  "left": {
                    "kind": "binary",
                    "operator": "-",
                    "left": {
                      "kind": "identifier",
                      "name": "pricePerPerson"
                    },
                    "right": {
                      "kind": "identifier",
                      "name": "costPerPerson"
                    }
                  },
                  "right": {
                    "kind": "identifier",
                    "name": "pricePerPerson"
                  }
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "number",
                    "value": 100
                  }
                }
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 20
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update pricing on a deactivated dish"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Price per person cannot be negative"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cost per person cannot be negative"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "New pricing for '{dishName}' results in a low margin ({margin}%)"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "dishName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "price",
                      "value": {
                        "kind": "identifier",
                        "name": "pricePerPerson"
                      }
                    },
                    {
                      "key": "cost",
                      "value": {
                        "kind": "identifier",
                        "name": "costPerPerson"
                      }
                    },
                    {
                      "key": "margin",
                      "value": {
                        "kind": "binary",
                        "operator": "*",
                        "left": {
                          "kind": "binary",
                          "operator": "/",
                          "left": {
                            "kind": "binary",
                            "operator": "-",
                            "left": {
                              "kind": "identifier",
                              "name": "pricePerPerson"
                            },
                            "right": {
                              "kind": "identifier",
                              "name": "costPerPerson"
                            }
                          },
                          "right": {
                            "kind": "identifier",
                            "name": "pricePerPerson"
                          }
                        },
                        "right": {
                          "kind": "literal",
                          "value": {
                            "kind": "number",
                            "value": 100
                          }
                        }
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "pricePerPerson",
          "expression": {
            "kind": "identifier",
            "name": "pricePerPerson"
          }
        },
        {
          "kind": "mutate",
          "target": "costPerPerson",
          "expression": {
            "kind": "identifier",
            "name": "costPerPerson"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "DishPricingUpdated"
      ]
    },
    {
      "name": "updateLeadTime",
      "entity": "Dish",
      "parameters": [
        {
          "name": "minPrepLeadDays",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "maxPrepLeadDays",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "self"
          },
          "property": "isActive"
        },
        {
          "kind": "binary",
          "operator": ">=",
          "left": {
            "kind": "identifier",
            "name": "minPrepLeadDays"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">=",
          "left": {
            "kind": "identifier",
            "name": "maxPrepLeadDays"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": "or",
          "left": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "identifier",
              "name": "maxPrepLeadDays"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "identifier",
              "name": "maxPrepLeadDays"
            },
            "right": {
              "kind": "identifier",
              "name": "minPrepLeadDays"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update lead time on a deactivated dish"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Min prep lead days cannot be negative"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Max prep lead days cannot be negative"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Max lead days must be >= min lead days"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "minPrepLeadDays",
          "expression": {
            "kind": "identifier",
            "name": "minPrepLeadDays"
          }
        },
        {
          "kind": "mutate",
          "target": "maxPrepLeadDays",
          "expression": {
            "kind": "identifier",
            "name": "maxPrepLeadDays"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "DishLeadTimeUpdated"
      ]
    },
    {
      "name": "create",
      "entity": "EventBudget",
      "parameters": [
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalBudgetAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">=",
          "left": {
            "kind": "identifier",
            "name": "totalBudgetAmount"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Event ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Budget amount must be non-negative"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "eventId",
          "expression": {
            "kind": "identifier",
            "name": "eventId"
          }
        },
        {
          "kind": "mutate",
          "target": "totalBudgetAmount",
          "expression": {
            "kind": "identifier",
            "name": "totalBudgetAmount"
          }
        },
        {
          "kind": "mutate",
          "target": "totalActualAmount",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "varianceAmount",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "variancePercentage",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "draft"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "version",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 1
            }
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventBudgetCreated"
      ]
    },
    {
      "name": "update",
      "entity": "EventBudget",
      "parameters": [
        {
          "name": "totalBudgetAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalActualAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "finalized"
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">=",
          "left": {
            "kind": "identifier",
            "name": "totalBudgetAmount"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnBudgetIncrease",
          "code": "warnBudgetIncrease",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "totalBudgetAmount"
            },
            "right": {
              "kind": "binary",
              "operator": "*",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "totalBudgetAmount"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 1.25
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update finalized budget"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Budget amount must be non-negative"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Budget increasing by more than 25% (from {oldBudget} to {newBudget})"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "oldBudget",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "totalBudgetAmount"
                      }
                    },
                    {
                      "key": "newBudget",
                      "value": {
                        "kind": "identifier",
                        "name": "totalBudgetAmount"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "totalBudgetAmount",
          "expression": {
            "kind": "identifier",
            "name": "totalBudgetAmount"
          }
        },
        {
          "kind": "mutate",
          "target": "totalActualAmount",
          "expression": {
            "kind": "identifier",
            "name": "totalActualAmount"
          }
        },
        {
          "kind": "mutate",
          "target": "varianceAmount",
          "expression": {
            "kind": "binary",
            "operator": "-",
            "left": {
              "kind": "identifier",
              "name": "totalActualAmount"
            },
            "right": {
              "kind": "identifier",
              "name": "totalBudgetAmount"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventBudgetUpdated"
      ]
    },
    {
      "name": "approve",
      "entity": "EventBudget",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "draft"
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "blockNoLineItems",
          "code": "blockNoLineItems",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "totalBudgetAmount"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only approve draft budgets"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Cannot approve budget with no budgeted amount"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "budgetId",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "id"
                      }
                    },
                    {
                      "key": "eventId",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "eventId"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "approved"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventBudgetApproved"
      ]
    },
    {
      "name": "finalize",
      "entity": "EventBudget",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "or",
          "left": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "draft"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "approved"
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnFinalizeWithVariance",
          "code": "warnFinalizeWithVariance",
          "expression": {
            "kind": "binary",
            "operator": "or",
            "left": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "variancePercentage"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 10
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "<",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "variancePercentage"
              },
              "right": {
                "kind": "unary",
                "operator": "-",
                "operand": {
                  "kind": "literal",
                  "value": {
                    "kind": "number",
                    "value": 10
                  }
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only finalize draft or approved budgets"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Finalizing budget with {variancePct}% variance"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "variancePercentage",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "variancePercentage"
                      }
                    },
                    {
                      "key": "varianceAmount",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "varianceAmount"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "finalized"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventBudgetFinalized"
      ]
    },
    {
      "name": "create",
      "entity": "BudgetLineItem",
      "parameters": [
        {
          "name": "budgetId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "budgetedAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "sortOrder",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "budgetId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "budgetId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "category"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "category"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">=",
          "left": {
            "kind": "identifier",
            "name": "budgetedAmount"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Budget ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Category is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Line item name is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Budgeted amount must be non-negative"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "budgetId",
          "expression": {
            "kind": "identifier",
            "name": "budgetId"
          }
        },
        {
          "kind": "mutate",
          "target": "category",
          "expression": {
            "kind": "identifier",
            "name": "category"
          }
        },
        {
          "kind": "mutate",
          "target": "name",
          "expression": {
            "kind": "identifier",
            "name": "name"
          }
        },
        {
          "kind": "mutate",
          "target": "description",
          "expression": {
            "kind": "identifier",
            "name": "description"
          }
        },
        {
          "kind": "mutate",
          "target": "budgetedAmount",
          "expression": {
            "kind": "identifier",
            "name": "budgetedAmount"
          }
        },
        {
          "kind": "mutate",
          "target": "actualAmount",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "varianceAmount",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "sortOrder",
          "expression": {
            "kind": "identifier",
            "name": "sortOrder"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "BudgetLineItemCreated"
      ]
    },
    {
      "name": "update",
      "entity": "BudgetLineItem",
      "parameters": [
        {
          "name": "budgetedAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "actualAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": ">=",
          "left": {
            "kind": "identifier",
            "name": "budgetedAmount"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">=",
          "left": {
            "kind": "identifier",
            "name": "actualAmount"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnSignificantOverage",
          "code": "warnSignificantOverage",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "actualAmount"
            },
            "right": {
              "kind": "binary",
              "operator": "*",
              "left": {
                "kind": "identifier",
                "name": "budgetedAmount"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 1.5
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Budgeted amount must be non-negative"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Actual amount must be non-negative"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Line item '{itemName}' actual exceeds budget by 50%+"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "itemName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "budgetedAmount",
                      "value": {
                        "kind": "identifier",
                        "name": "budgetedAmount"
                      }
                    },
                    {
                      "key": "actualAmount",
                      "value": {
                        "kind": "identifier",
                        "name": "actualAmount"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "budgetedAmount",
          "expression": {
            "kind": "identifier",
            "name": "budgetedAmount"
          }
        },
        {
          "kind": "mutate",
          "target": "actualAmount",
          "expression": {
            "kind": "identifier",
            "name": "actualAmount"
          }
        },
        {
          "kind": "mutate",
          "target": "varianceAmount",
          "expression": {
            "kind": "binary",
            "operator": "-",
            "left": {
              "kind": "identifier",
              "name": "actualAmount"
            },
            "right": {
              "kind": "identifier",
              "name": "budgetedAmount"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "description",
          "expression": {
            "kind": "identifier",
            "name": "description"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "BudgetLineItemUpdated"
      ]
    },
    {
      "name": "remove",
      "entity": "BudgetLineItem",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "deletedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "BudgetLineItemRemoved"
      ]
    },
    {
      "name": "create",
      "entity": "EventContract",
      "parameters": [
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "contractNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "documentUrl",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "documentType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "expiresAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "clientId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "clientId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Event ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Client ID is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "eventId",
          "expression": {
            "kind": "identifier",
            "name": "eventId"
          }
        },
        {
          "kind": "mutate",
          "target": "clientId",
          "expression": {
            "kind": "identifier",
            "name": "clientId"
          }
        },
        {
          "kind": "mutate",
          "target": "contractNumber",
          "expression": {
            "kind": "identifier",
            "name": "contractNumber"
          }
        },
        {
          "kind": "mutate",
          "target": "title",
          "expression": {
            "kind": "identifier",
            "name": "title"
          }
        },
        {
          "kind": "mutate",
          "target": "documentUrl",
          "expression": {
            "kind": "identifier",
            "name": "documentUrl"
          }
        },
        {
          "kind": "mutate",
          "target": "documentType",
          "expression": {
            "kind": "identifier",
            "name": "documentType"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "expiresAt",
          "expression": {
            "kind": "identifier",
            "name": "expiresAt"
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "draft"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ContractCreated"
      ]
    },
    {
      "name": "update",
      "entity": "EventContract",
      "parameters": [
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "documentUrl",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "documentType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "expiresAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "signed"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot modify a signed contract"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "title",
          "expression": {
            "kind": "identifier",
            "name": "title"
          }
        },
        {
          "kind": "mutate",
          "target": "documentUrl",
          "expression": {
            "kind": "identifier",
            "name": "documentUrl"
          }
        },
        {
          "kind": "mutate",
          "target": "documentType",
          "expression": {
            "kind": "identifier",
            "name": "documentType"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "expiresAt",
          "expression": {
            "kind": "identifier",
            "name": "expiresAt"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ContractUpdated"
      ]
    },
    {
      "name": "send",
      "entity": "EventContract",
      "parameters": [
        {
          "name": "sentBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "signed"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "sentBy"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "sentBy"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot send a signed contract"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Sender is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "sent"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ContractSent"
      ]
    },
    {
      "name": "markViewed",
      "entity": "EventContract",
      "parameters": [],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "sent"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Contract must be sent before it can be viewed"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "viewed"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ContractViewed"
      ]
    },
    {
      "name": "sign",
      "entity": "EventContract",
      "parameters": [],
      "guards": [
        {
          "kind": "binary",
          "operator": "or",
          "left": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "sent"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "viewed"
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Contract must be sent or viewed to be signed"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "signed"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ContractSigned"
      ]
    },
    {
      "name": "expire",
      "entity": "EventContract",
      "parameters": [],
      "guards": [
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "signed"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "cancelled"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot expire a signed contract"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot expire a cancelled contract"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "expired"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ContractExpired"
      ]
    },
    {
      "name": "cancel",
      "entity": "EventContract",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "canceledBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "signed"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot cancel a signed contract"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "cancelled"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ContractCancelled"
      ]
    },
    {
      "name": "softDelete",
      "entity": "EventContract",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "deletedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ContractDeleted"
      ]
    },
    {
      "name": "create",
      "entity": "ContractSignature",
      "parameters": [
        {
          "name": "contractId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "signatureData",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "signerName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "signerEmail",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "ipAddress",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "contractId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "contractId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "signatureData"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "signatureData"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "signerName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "signerName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Contract ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Signature data is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Signer name is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "contractId",
          "expression": {
            "kind": "identifier",
            "name": "contractId"
          }
        },
        {
          "kind": "mutate",
          "target": "signatureData",
          "expression": {
            "kind": "identifier",
            "name": "signatureData"
          }
        },
        {
          "kind": "mutate",
          "target": "signerName",
          "expression": {
            "kind": "identifier",
            "name": "signerName"
          }
        },
        {
          "kind": "mutate",
          "target": "signerEmail",
          "expression": {
            "kind": "identifier",
            "name": "signerEmail"
          }
        },
        {
          "kind": "mutate",
          "target": "ipAddress",
          "expression": {
            "kind": "identifier",
            "name": "ipAddress"
          }
        },
        {
          "kind": "mutate",
          "target": "signedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "SignatureCreated"
      ]
    },
    {
      "name": "softDelete",
      "entity": "ContractSignature",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "deletedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "SignatureDeleted"
      ]
    },
    {
      "name": "create",
      "entity": "EventDish",
      "parameters": [
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "dishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "courseLabel",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "sortOrder",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "dishId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "dishId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">",
          "left": {
            "kind": "identifier",
            "name": "quantity"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Event ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Dish ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Quantity must be positive"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "eventId",
          "expression": {
            "kind": "identifier",
            "name": "eventId"
          }
        },
        {
          "kind": "mutate",
          "target": "dishId",
          "expression": {
            "kind": "identifier",
            "name": "dishId"
          }
        },
        {
          "kind": "mutate",
          "target": "quantity",
          "expression": {
            "kind": "identifier",
            "name": "quantity"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "courseLabel",
          "expression": {
            "kind": "identifier",
            "name": "courseLabel"
          }
        },
        {
          "kind": "mutate",
          "target": "sortOrder",
          "expression": {
            "kind": "identifier",
            "name": "sortOrder"
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventDishCreated"
      ]
    },
    {
      "name": "remove",
      "entity": "EventDish",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Event dish is already removed"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "deletedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventDishRemoved"
      ]
    },
    {
      "name": "create",
      "entity": "EventGuest",
      "parameters": [
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "guestName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "guestEmail",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "guestPhone",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "isPrimaryContact",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "dietaryRestrictions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "allergenRestrictions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "specialMealRequired",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "specialMealNotes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tableAssignment",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "mealPreference",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "guestName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "guestName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Event ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Guest name is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "eventId",
          "expression": {
            "kind": "identifier",
            "name": "eventId"
          }
        },
        {
          "kind": "mutate",
          "target": "guestName",
          "expression": {
            "kind": "identifier",
            "name": "guestName"
          }
        },
        {
          "kind": "mutate",
          "target": "guestEmail",
          "expression": {
            "kind": "identifier",
            "name": "guestEmail"
          }
        },
        {
          "kind": "mutate",
          "target": "guestPhone",
          "expression": {
            "kind": "identifier",
            "name": "guestPhone"
          }
        },
        {
          "kind": "mutate",
          "target": "isPrimaryContact",
          "expression": {
            "kind": "identifier",
            "name": "isPrimaryContact"
          }
        },
        {
          "kind": "mutate",
          "target": "dietaryRestrictions",
          "expression": {
            "kind": "identifier",
            "name": "dietaryRestrictions"
          }
        },
        {
          "kind": "mutate",
          "target": "allergenRestrictions",
          "expression": {
            "kind": "identifier",
            "name": "allergenRestrictions"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "specialMealRequired",
          "expression": {
            "kind": "identifier",
            "name": "specialMealRequired"
          }
        },
        {
          "kind": "mutate",
          "target": "specialMealNotes",
          "expression": {
            "kind": "identifier",
            "name": "specialMealNotes"
          }
        },
        {
          "kind": "mutate",
          "target": "tableAssignment",
          "expression": {
            "kind": "identifier",
            "name": "tableAssignment"
          }
        },
        {
          "kind": "mutate",
          "target": "mealPreference",
          "expression": {
            "kind": "identifier",
            "name": "mealPreference"
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventGuestCreated"
      ]
    },
    {
      "name": "update",
      "entity": "EventGuest",
      "parameters": [
        {
          "name": "guestName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "guestEmail",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "guestPhone",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "isPrimaryContact",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "dietaryRestrictions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "allergenRestrictions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "specialMealRequired",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "specialMealNotes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tableAssignment",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "mealPreference",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "guestName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "guestName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Guest name is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update a deleted guest"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "guestName",
          "expression": {
            "kind": "identifier",
            "name": "guestName"
          }
        },
        {
          "kind": "mutate",
          "target": "guestEmail",
          "expression": {
            "kind": "identifier",
            "name": "guestEmail"
          }
        },
        {
          "kind": "mutate",
          "target": "guestPhone",
          "expression": {
            "kind": "identifier",
            "name": "guestPhone"
          }
        },
        {
          "kind": "mutate",
          "target": "isPrimaryContact",
          "expression": {
            "kind": "identifier",
            "name": "isPrimaryContact"
          }
        },
        {
          "kind": "mutate",
          "target": "dietaryRestrictions",
          "expression": {
            "kind": "identifier",
            "name": "dietaryRestrictions"
          }
        },
        {
          "kind": "mutate",
          "target": "allergenRestrictions",
          "expression": {
            "kind": "identifier",
            "name": "allergenRestrictions"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "specialMealRequired",
          "expression": {
            "kind": "identifier",
            "name": "specialMealRequired"
          }
        },
        {
          "kind": "mutate",
          "target": "specialMealNotes",
          "expression": {
            "kind": "identifier",
            "name": "specialMealNotes"
          }
        },
        {
          "kind": "mutate",
          "target": "tableAssignment",
          "expression": {
            "kind": "identifier",
            "name": "tableAssignment"
          }
        },
        {
          "kind": "mutate",
          "target": "mealPreference",
          "expression": {
            "kind": "identifier",
            "name": "mealPreference"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventGuestUpdated"
      ]
    },
    {
      "name": "softDelete",
      "entity": "EventGuest",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Guest is already deleted"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "deletedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventGuestDeleted"
      ]
    },
    {
      "name": "create",
      "entity": "EventImportWorkflow",
      "parameters": [
        {
          "name": "idempotencyKey",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "inputData",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "or",
          "left": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "identifier",
            "name": "idempotencyKey"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": ""
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Workflow already initialized"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Idempotency key is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "created"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "idempotencyKey",
          "expression": {
            "kind": "identifier",
            "name": "idempotencyKey"
          }
        },
        {
          "kind": "mutate",
          "target": "inputData",
          "expression": {
            "kind": "identifier",
            "name": "inputData"
          }
        },
        {
          "kind": "mutate",
          "target": "currentStep",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventImportWorkflowCreated"
      ]
    },
    {
      "name": "startParsing",
      "entity": "EventImportWorkflow",
      "parameters": [],
      "guards": [
        {
          "kind": "binary",
          "operator": "or",
          "left": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "created"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "paused"
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "parsing"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "currentStep",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 1
            }
          }
        },
        {
          "kind": "mutate",
          "target": "startedAt",
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "call",
                "callee": {
                  "kind": "identifier",
                  "name": "now"
                },
                "args": []
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "consequent": {
              "kind": "call",
              "callee": {
                "kind": "identifier",
                "name": "now"
              },
              "args": []
            },
            "alternate": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "startedAt"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventImportWorkflowParsingStarted"
      ]
    },
    {
      "name": "completeParsing",
      "entity": "EventImportWorkflow",
      "parameters": [
        {
          "name": "extractedData",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "confidence",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "parsing"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "identifier",
              "name": "confidence"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "<=",
            "left": {
              "kind": "identifier",
              "name": "confidence"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 100
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnLowConfidence",
          "code": "warnLowConfidence",
          "expression": {
            "kind": "binary",
            "operator": "<",
            "left": {
              "kind": "identifier",
              "name": "confidence"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 70
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "mutate",
          "target": "outputData",
          "expression": {
            "kind": "identifier",
            "name": "extractedData"
          }
        },
        {
          "kind": "mutate",
          "target": "confidence",
          "expression": {
            "kind": "identifier",
            "name": "confidence"
          }
        },
        {
          "kind": "mutate",
          "target": "currentStep",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 2
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Low parsing confidence ({confidence}%) - manual review recommended"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "confidence",
                      "value": {
                        "kind": "identifier",
                        "name": "confidence"
                      }
                    }
                  ]
                }
              }
            ]
          }
        }
      ],
      "emits": [
        "EventImportWorkflowParsingCompleted"
      ]
    },
    {
      "name": "startExtracting",
      "entity": "EventImportWorkflow",
      "parameters": [],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "parsing"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "extracting"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventImportWorkflowExtractingStarted"
      ]
    },
    {
      "name": "completeExtraction",
      "entity": "EventImportWorkflow",
      "parameters": [
        {
          "name": "eventData",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "extracting"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "outputData",
          "expression": {
            "kind": "identifier",
            "name": "eventData"
          }
        },
        {
          "kind": "mutate",
          "target": "currentStep",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 3
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventImportWorkflowExtractingCompleted"
      ]
    },
    {
      "name": "startValidating",
      "entity": "EventImportWorkflow",
      "parameters": [],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "extracting"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "validating"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventImportWorkflowValidatingStarted"
      ]
    },
    {
      "name": "completeValidation",
      "entity": "EventImportWorkflow",
      "parameters": [
        {
          "name": "validationErrors",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "validationWarnings",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "validating"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "errors",
          "expression": {
            "kind": "identifier",
            "name": "validationErrors"
          }
        },
        {
          "kind": "mutate",
          "target": "warnings",
          "expression": {
            "kind": "identifier",
            "name": "validationWarnings"
          }
        },
        {
          "kind": "mutate",
          "target": "currentStep",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 4
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventImportWorkflowValidationCompleted"
      ]
    },
    {
      "name": "startProposing",
      "entity": "EventImportWorkflow",
      "parameters": [],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "validating"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "proposing"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventImportWorkflowProposingStarted"
      ]
    },
    {
      "name": "completeProposing",
      "entity": "EventImportWorkflow",
      "parameters": [
        {
          "name": "proposedTasks",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "proposing"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "stepResults",
          "expression": {
            "kind": "identifier",
            "name": "proposedTasks"
          }
        },
        {
          "kind": "mutate",
          "target": "currentStep",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 5
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventImportWorkflowProposingCompleted"
      ]
    },
    {
      "name": "startReserving",
      "entity": "EventImportWorkflow",
      "parameters": [],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "proposing"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "reserving"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventImportWorkflowReservingStarted"
      ]
    },
    {
      "name": "completeReserving",
      "entity": "EventImportWorkflow",
      "parameters": [
        {
          "name": "reservationResults",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "reserving"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "stepResults",
          "expression": {
            "kind": "identifier",
            "name": "reservationResults"
          }
        },
        {
          "kind": "mutate",
          "target": "currentStep",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 6
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventImportWorkflowReservingCompleted"
      ]
    },
    {
      "name": "startActivating",
      "entity": "EventImportWorkflow",
      "parameters": [],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "reserving"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "activating"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventImportWorkflowActivatingStarted"
      ]
    },
    {
      "name": "completeActivating",
      "entity": "EventImportWorkflow",
      "parameters": [
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "activating"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "eventId",
          "expression": {
            "kind": "identifier",
            "name": "eventId"
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "completed"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "completedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventImportWorkflowCompleted"
      ]
    },
    {
      "name": "fail",
      "entity": "EventImportWorkflow",
      "parameters": [
        {
          "name": "errorList",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "step",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "in",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "array",
            "elements": [
              {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "parsing"
                }
              },
              {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "extracting"
                }
              },
              {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "validating"
                }
              },
              {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "proposing"
                }
              },
              {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "reserving"
                }
              },
              {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "activating"
                }
              }
            ]
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "failed"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "errors",
          "expression": {
            "kind": "identifier",
            "name": "errorList"
          }
        },
        {
          "kind": "mutate",
          "target": "currentStep",
          "expression": {
            "kind": "identifier",
            "name": "step"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventImportWorkflowFailed"
      ]
    },
    {
      "name": "pause",
      "entity": "EventImportWorkflow",
      "parameters": [
        {
          "name": "reasonList",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "self"
          },
          "property": "isActive"
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "paused"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "warnings",
          "expression": {
            "kind": "identifier",
            "name": "reasonList"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventImportWorkflowPaused"
      ]
    },
    {
      "name": "resume",
      "entity": "EventImportWorkflow",
      "parameters": [],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "paused"
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "currentStep"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "currentStep"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 1
                }
              }
            },
            "consequent": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "parsing"
              }
            },
            "alternate": {
              "kind": "conditional",
              "condition": {
                "kind": "binary",
                "operator": "==",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "currentStep"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "number",
                    "value": 2
                  }
                }
              },
              "consequent": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "extracting"
                }
              },
              "alternate": {
                "kind": "conditional",
                "condition": {
                  "kind": "binary",
                  "operator": "==",
                  "left": {
                    "kind": "member",
                    "object": {
                      "kind": "identifier",
                      "name": "self"
                    },
                    "property": "currentStep"
                  },
                  "right": {
                    "kind": "literal",
                    "value": {
                      "kind": "number",
                      "value": 3
                    }
                  }
                },
                "consequent": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "validating"
                  }
                },
                "alternate": {
                  "kind": "conditional",
                  "condition": {
                    "kind": "binary",
                    "operator": "==",
                    "left": {
                      "kind": "member",
                      "object": {
                        "kind": "identifier",
                        "name": "self"
                      },
                      "property": "currentStep"
                    },
                    "right": {
                      "kind": "literal",
                      "value": {
                        "kind": "number",
                        "value": 4
                      }
                    }
                  },
                  "consequent": {
                    "kind": "literal",
                    "value": {
                      "kind": "string",
                      "value": "proposing"
                    }
                  },
                  "alternate": {
                    "kind": "conditional",
                    "condition": {
                      "kind": "binary",
                      "operator": "==",
                      "left": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "currentStep"
                      },
                      "right": {
                        "kind": "literal",
                        "value": {
                          "kind": "number",
                          "value": 5
                        }
                      }
                    },
                    "consequent": {
                      "kind": "literal",
                      "value": {
                        "kind": "string",
                        "value": "reserving"
                      }
                    },
                    "alternate": {
                      "kind": "literal",
                      "value": {
                        "kind": "string",
                        "value": "activating"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventImportWorkflowResumed"
      ]
    },
    {
      "name": "cancel",
      "entity": "EventImportWorkflow",
      "parameters": [
        {
          "name": "reasonList",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "in",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "array",
            "elements": [
              {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "created"
                }
              },
              {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "paused"
                }
              },
              {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "failed"
                }
              }
            ]
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "cancelled"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "errors",
          "expression": {
            "kind": "identifier",
            "name": "reasonList"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventImportWorkflowCancelled"
      ]
    },
    {
      "name": "retry",
      "entity": "EventImportWorkflow",
      "parameters": [],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "failed"
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "currentStep"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "currentStep",
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "currentStep"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 1
                }
              }
            },
            "consequent": {
              "kind": "binary",
              "operator": "-",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "currentStep"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 1
                }
              }
            },
            "alternate": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 1
              }
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "currentStep"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 1
                }
              }
            },
            "consequent": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "parsing"
              }
            },
            "alternate": {
              "kind": "conditional",
              "condition": {
                "kind": "binary",
                "operator": "==",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "currentStep"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "number",
                    "value": 2
                  }
                }
              },
              "consequent": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "extracting"
                }
              },
              "alternate": {
                "kind": "conditional",
                "condition": {
                  "kind": "binary",
                  "operator": "==",
                  "left": {
                    "kind": "member",
                    "object": {
                      "kind": "identifier",
                      "name": "self"
                    },
                    "property": "currentStep"
                  },
                  "right": {
                    "kind": "literal",
                    "value": {
                      "kind": "number",
                      "value": 3
                    }
                  }
                },
                "consequent": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "validating"
                  }
                },
                "alternate": {
                  "kind": "conditional",
                  "condition": {
                    "kind": "binary",
                    "operator": "==",
                    "left": {
                      "kind": "member",
                      "object": {
                        "kind": "identifier",
                        "name": "self"
                      },
                      "property": "currentStep"
                    },
                    "right": {
                      "kind": "literal",
                      "value": {
                        "kind": "number",
                        "value": 4
                      }
                    }
                  },
                  "consequent": {
                    "kind": "literal",
                    "value": {
                      "kind": "string",
                      "value": "proposing"
                    }
                  },
                  "alternate": {
                    "kind": "conditional",
                    "condition": {
                      "kind": "binary",
                      "operator": "==",
                      "left": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "currentStep"
                      },
                      "right": {
                        "kind": "literal",
                        "value": {
                          "kind": "number",
                          "value": 5
                        }
                      }
                    },
                    "consequent": {
                      "kind": "literal",
                      "value": {
                        "kind": "string",
                        "value": "reserving"
                      }
                    },
                    "alternate": {
                      "kind": "literal",
                      "value": {
                        "kind": "string",
                        "value": "activating"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        {
          "kind": "mutate",
          "target": "errors",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "[]"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventImportWorkflowRetried"
      ]
    },
    {
      "name": "create",
      "entity": "EventReport",
      "parameters": [
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "version",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "checklistData",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reportConfig",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Event ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Report name is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "eventId",
          "expression": {
            "kind": "identifier",
            "name": "eventId"
          }
        },
        {
          "kind": "mutate",
          "target": "name",
          "expression": {
            "kind": "identifier",
            "name": "name"
          }
        },
        {
          "kind": "mutate",
          "target": "version",
          "expression": {
            "kind": "identifier",
            "name": "version"
          }
        },
        {
          "kind": "mutate",
          "target": "checklistData",
          "expression": {
            "kind": "identifier",
            "name": "checklistData"
          }
        },
        {
          "kind": "mutate",
          "target": "reportConfig",
          "expression": {
            "kind": "identifier",
            "name": "reportConfig"
          }
        },
        {
          "kind": "mutate",
          "target": "reviewNotes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "draft"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "completion",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventReportCreated"
      ]
    },
    {
      "name": "submit",
      "entity": "EventReport",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "or",
          "left": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "draft"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "in_progress"
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "checklistData"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "{}"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "checklistData"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnIncomplete",
          "code": "warnIncomplete",
          "expression": {
            "kind": "binary",
            "operator": "<",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "completion"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 100
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only submit draft or in-progress reports"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot submit report with empty checklist data"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Submitting report '{reportName}' at {completion}% completion"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "reportName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "completion",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "completion"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "completed"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "completedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventReportSubmitted"
      ]
    },
    {
      "name": "approve",
      "entity": "EventReport",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reviewNotes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "completed"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only approve completed reports"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Reviewer user ID is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "approved"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "reviewedBy",
          "expression": {
            "kind": "identifier",
            "name": "userId"
          }
        },
        {
          "kind": "mutate",
          "target": "reviewedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "reviewNotes",
          "expression": {
            "kind": "identifier",
            "name": "reviewNotes"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventReportApproved"
      ]
    },
    {
      "name": "complete",
      "entity": "EventReport",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "or",
          "left": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "draft"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "in_progress"
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "checklistData"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "{}"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "checklistData"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only complete draft or in-progress reports"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot complete report with empty checklist data"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "completed"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "completion",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 100
            }
          }
        },
        {
          "kind": "mutate",
          "target": "completedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventReportCompleted"
      ]
    },
    {
      "name": "create",
      "entity": "Event",
      "parameters": [
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "guestCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "venueName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "venueAddress",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tags",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "status",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "tenantId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "tenantId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "clientId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "clientId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventNumber"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventNumber"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "title"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "title"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">",
          "left": {
            "kind": "identifier",
            "name": "eventDate"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">",
          "left": {
            "kind": "identifier",
            "name": "guestCount"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": "or",
          "left": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "identifier",
              "name": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "identifier",
              "name": "status"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "draft"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "confirmed"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "completed"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "archived"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "cancelled"
                  }
                }
              ]
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Tenant ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Client ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Event number is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Event title is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Event type is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Event date is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Guest count must be positive"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Status must be valid"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "clientId",
          "expression": {
            "kind": "identifier",
            "name": "clientId"
          }
        },
        {
          "kind": "mutate",
          "target": "eventNumber",
          "expression": {
            "kind": "identifier",
            "name": "eventNumber"
          }
        },
        {
          "kind": "mutate",
          "target": "title",
          "expression": {
            "kind": "identifier",
            "name": "title"
          }
        },
        {
          "kind": "mutate",
          "target": "eventType",
          "expression": {
            "kind": "identifier",
            "name": "eventType"
          }
        },
        {
          "kind": "mutate",
          "target": "eventDate",
          "expression": {
            "kind": "identifier",
            "name": "eventDate"
          }
        },
        {
          "kind": "mutate",
          "target": "guestCount",
          "expression": {
            "kind": "identifier",
            "name": "guestCount"
          }
        },
        {
          "kind": "mutate",
          "target": "venueName",
          "expression": {
            "kind": "identifier",
            "name": "venueName"
          }
        },
        {
          "kind": "mutate",
          "target": "venueAddress",
          "expression": {
            "kind": "identifier",
            "name": "venueAddress"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "tags",
          "expression": {
            "kind": "identifier",
            "name": "tags"
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": "and",
              "left": {
                "kind": "binary",
                "operator": "!=",
                "left": {
                  "kind": "identifier",
                  "name": "status"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "null"
                  }
                }
              },
              "right": {
                "kind": "binary",
                "operator": "!=",
                "left": {
                  "kind": "identifier",
                  "name": "status"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": ""
                  }
                }
              }
            },
            "consequent": {
              "kind": "identifier",
              "name": "status"
            },
            "alternate": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "draft"
              }
            }
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventCreated"
      ]
    },
    {
      "name": "update",
      "entity": "Event",
      "parameters": [
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "guestCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "venueName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "venueAddress",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tags",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "status",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "cancelled"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "archived"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "tenantId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "tenantId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "clientId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "clientId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventNumber"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventNumber"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "title"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "title"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">",
          "left": {
            "kind": "identifier",
            "name": "eventDate"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">",
          "left": {
            "kind": "identifier",
            "name": "guestCount"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": "or",
          "left": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "identifier",
              "name": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "identifier",
              "name": "status"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "draft"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "confirmed"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "completed"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "archived"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "cancelled"
                  }
                }
              ]
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update cancelled event"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update archived event"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Tenant ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Client ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Event number is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Event title is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Event type is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Event date is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Guest count must be positive"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Status must be valid"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "clientId",
          "expression": {
            "kind": "identifier",
            "name": "clientId"
          }
        },
        {
          "kind": "mutate",
          "target": "eventNumber",
          "expression": {
            "kind": "identifier",
            "name": "eventNumber"
          }
        },
        {
          "kind": "mutate",
          "target": "title",
          "expression": {
            "kind": "identifier",
            "name": "title"
          }
        },
        {
          "kind": "mutate",
          "target": "eventType",
          "expression": {
            "kind": "identifier",
            "name": "eventType"
          }
        },
        {
          "kind": "mutate",
          "target": "eventDate",
          "expression": {
            "kind": "identifier",
            "name": "eventDate"
          }
        },
        {
          "kind": "mutate",
          "target": "guestCount",
          "expression": {
            "kind": "identifier",
            "name": "guestCount"
          }
        },
        {
          "kind": "mutate",
          "target": "venueName",
          "expression": {
            "kind": "identifier",
            "name": "venueName"
          }
        },
        {
          "kind": "mutate",
          "target": "venueAddress",
          "expression": {
            "kind": "identifier",
            "name": "venueAddress"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "tags",
          "expression": {
            "kind": "identifier",
            "name": "tags"
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": "and",
              "left": {
                "kind": "binary",
                "operator": "!=",
                "left": {
                  "kind": "identifier",
                  "name": "status"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "null"
                  }
                }
              },
              "right": {
                "kind": "binary",
                "operator": "!=",
                "left": {
                  "kind": "identifier",
                  "name": "status"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": ""
                  }
                }
              }
            },
            "consequent": {
              "kind": "identifier",
              "name": "status"
            },
            "alternate": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventUpdated"
      ]
    },
    {
      "name": "confirm",
      "entity": "Event",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "draft"
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "blockNoGuestCount",
          "code": "blockNoGuestCount",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "guestCount"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only confirm draft events"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Cannot confirm event '{eventName}' with no guest count"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "eventName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "title"
                      }
                    },
                    {
                      "key": "eventId",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "id"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "confirmed"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventConfirmed"
      ]
    },
    {
      "name": "cancel",
      "entity": "Event",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "completed"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "archived"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "cancelled"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot cancel completed event"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot cancel archived event"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Event is already cancelled"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "cancelled"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventCancelled"
      ]
    },
    {
      "name": "archive",
      "entity": "Event",
      "parameters": [],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "completed"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only archive completed events"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "archived"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventArchived"
      ]
    },
    {
      "name": "updateGuestCount",
      "entity": "Event",
      "parameters": [
        {
          "name": "newGuestCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "cancelled"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "archived"
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">",
          "left": {
            "kind": "identifier",
            "name": "newGuestCount"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnLargeGuestCountChange",
          "code": "warnLargeGuestCountChange",
          "expression": {
            "kind": "binary",
            "operator": "or",
            "left": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "identifier",
                "name": "newGuestCount"
              },
              "right": {
                "kind": "binary",
                "operator": "*",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "guestCount"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "number",
                    "value": 1.5
                  }
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "<",
              "left": {
                "kind": "identifier",
                "name": "newGuestCount"
              },
              "right": {
                "kind": "binary",
                "operator": "*",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "guestCount"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "number",
                    "value": 0.5
                  }
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update cancelled event"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update archived event"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Guest count must be positive"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Guest count changing significantly from {oldCount} to {newCount}"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "oldCount",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "guestCount"
                      }
                    },
                    {
                      "key": "newCount",
                      "value": {
                        "kind": "identifier",
                        "name": "newGuestCount"
                      }
                    },
                    {
                      "key": "eventTitle",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "title"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "guestCount",
          "expression": {
            "kind": "identifier",
            "name": "newGuestCount"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventGuestCountUpdated"
      ]
    },
    {
      "name": "updateDate",
      "entity": "Event",
      "parameters": [
        {
          "name": "newEventDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "cancelled"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "archived"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "completed"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update cancelled event"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update archived event"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update completed event"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "eventDate",
          "expression": {
            "kind": "identifier",
            "name": "newEventDate"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventDateUpdated"
      ]
    },
    {
      "name": "updateLocation",
      "entity": "Event",
      "parameters": [
        {
          "name": "newLocationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newVenueId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newVenueName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newVenueAddress",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "cancelled"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "archived"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "completed"
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnLocationChange",
          "code": "warnLocationChange",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "venueName"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ""
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "venueName"
              },
              "right": {
                "kind": "identifier",
                "name": "newVenueName"
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update cancelled event"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update archived event"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update completed event"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Changing venue from '{oldVenue}' to '{newVenue}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "oldVenue",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "venueName"
                      }
                    },
                    {
                      "key": "newVenue",
                      "value": {
                        "kind": "identifier",
                        "name": "newVenueName"
                      }
                    },
                    {
                      "key": "eventTitle",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "title"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "locationId",
          "expression": {
            "kind": "identifier",
            "name": "newLocationId"
          }
        },
        {
          "kind": "mutate",
          "target": "venueId",
          "expression": {
            "kind": "identifier",
            "name": "newVenueId"
          }
        },
        {
          "kind": "mutate",
          "target": "venueName",
          "expression": {
            "kind": "identifier",
            "name": "newVenueName"
          }
        },
        {
          "kind": "mutate",
          "target": "venueAddress",
          "expression": {
            "kind": "identifier",
            "name": "newVenueAddress"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventLocationUpdated"
      ]
    },
    {
      "name": "finalize",
      "entity": "Event",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "confirmed"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only finalize confirmed events"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "completed"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventFinalized"
      ]
    },
    {
      "name": "unfinalize",
      "entity": "Event",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "completed"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only unfinalize completed events"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "confirmed"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventUnfinalized"
      ]
    },
    {
      "name": "create",
      "entity": "EventProfitability",
      "parameters": [
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "budgetedRevenue",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "budgetedFoodCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "budgetedLaborCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "budgetedOverhead",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Event ID is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "eventId",
          "expression": {
            "kind": "identifier",
            "name": "eventId"
          }
        },
        {
          "kind": "mutate",
          "target": "budgetedRevenue",
          "expression": {
            "kind": "identifier",
            "name": "budgetedRevenue"
          }
        },
        {
          "kind": "mutate",
          "target": "budgetedFoodCost",
          "expression": {
            "kind": "identifier",
            "name": "budgetedFoodCost"
          }
        },
        {
          "kind": "mutate",
          "target": "budgetedLaborCost",
          "expression": {
            "kind": "identifier",
            "name": "budgetedLaborCost"
          }
        },
        {
          "kind": "mutate",
          "target": "budgetedOverhead",
          "expression": {
            "kind": "identifier",
            "name": "budgetedOverhead"
          }
        },
        {
          "kind": "mutate",
          "target": "budgetedTotalCost",
          "expression": {
            "kind": "binary",
            "operator": "+",
            "left": {
              "kind": "binary",
              "operator": "+",
              "left": {
                "kind": "identifier",
                "name": "budgetedFoodCost"
              },
              "right": {
                "kind": "identifier",
                "name": "budgetedLaborCost"
              }
            },
            "right": {
              "kind": "identifier",
              "name": "budgetedOverhead"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "budgetedGrossMargin",
          "expression": {
            "kind": "binary",
            "operator": "-",
            "left": {
              "kind": "identifier",
              "name": "budgetedRevenue"
            },
            "right": {
              "kind": "binary",
              "operator": "+",
              "left": {
                "kind": "binary",
                "operator": "+",
                "left": {
                  "kind": "identifier",
                  "name": "budgetedFoodCost"
                },
                "right": {
                  "kind": "identifier",
                  "name": "budgetedLaborCost"
                }
              },
              "right": {
                "kind": "identifier",
                "name": "budgetedOverhead"
              }
            }
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "calculationMethod",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "auto"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "calculatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventProfitabilityCreated"
      ]
    },
    {
      "name": "update",
      "entity": "EventProfitability",
      "parameters": [
        {
          "name": "actualRevenue",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "actualFoodCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "actualLaborCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "actualOverhead",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "actualRevenue",
          "expression": {
            "kind": "identifier",
            "name": "actualRevenue"
          }
        },
        {
          "kind": "mutate",
          "target": "actualFoodCost",
          "expression": {
            "kind": "identifier",
            "name": "actualFoodCost"
          }
        },
        {
          "kind": "mutate",
          "target": "actualLaborCost",
          "expression": {
            "kind": "identifier",
            "name": "actualLaborCost"
          }
        },
        {
          "kind": "mutate",
          "target": "actualOverhead",
          "expression": {
            "kind": "identifier",
            "name": "actualOverhead"
          }
        },
        {
          "kind": "mutate",
          "target": "actualTotalCost",
          "expression": {
            "kind": "binary",
            "operator": "+",
            "left": {
              "kind": "binary",
              "operator": "+",
              "left": {
                "kind": "identifier",
                "name": "actualFoodCost"
              },
              "right": {
                "kind": "identifier",
                "name": "actualLaborCost"
              }
            },
            "right": {
              "kind": "identifier",
              "name": "actualOverhead"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "actualGrossMargin",
          "expression": {
            "kind": "binary",
            "operator": "-",
            "left": {
              "kind": "identifier",
              "name": "actualRevenue"
            },
            "right": {
              "kind": "binary",
              "operator": "+",
              "left": {
                "kind": "binary",
                "operator": "+",
                "left": {
                  "kind": "identifier",
                  "name": "actualFoodCost"
                },
                "right": {
                  "kind": "identifier",
                  "name": "actualLaborCost"
                }
              },
              "right": {
                "kind": "identifier",
                "name": "actualOverhead"
              }
            }
          }
        },
        {
          "kind": "mutate",
          "target": "revenueVariance",
          "expression": {
            "kind": "binary",
            "operator": "-",
            "left": {
              "kind": "identifier",
              "name": "actualRevenue"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "budgetedRevenue"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "foodCostVariance",
          "expression": {
            "kind": "binary",
            "operator": "-",
            "left": {
              "kind": "identifier",
              "name": "actualFoodCost"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "budgetedFoodCost"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "laborCostVariance",
          "expression": {
            "kind": "binary",
            "operator": "-",
            "left": {
              "kind": "identifier",
              "name": "actualLaborCost"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "budgetedLaborCost"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "totalCostVariance",
          "expression": {
            "kind": "binary",
            "operator": "-",
            "left": {
              "kind": "binary",
              "operator": "+",
              "left": {
                "kind": "binary",
                "operator": "+",
                "left": {
                  "kind": "identifier",
                  "name": "actualFoodCost"
                },
                "right": {
                  "kind": "identifier",
                  "name": "actualLaborCost"
                }
              },
              "right": {
                "kind": "identifier",
                "name": "actualOverhead"
              }
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "budgetedTotalCost"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventProfitabilityUpdated"
      ]
    },
    {
      "name": "recalculate",
      "entity": "EventProfitability",
      "parameters": [
        {
          "name": "calculationMethod",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "revenueVariance",
          "expression": {
            "kind": "binary",
            "operator": "-",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "actualRevenue"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "budgetedRevenue"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "foodCostVariance",
          "expression": {
            "kind": "binary",
            "operator": "-",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "actualFoodCost"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "budgetedFoodCost"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "laborCostVariance",
          "expression": {
            "kind": "binary",
            "operator": "-",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "actualLaborCost"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "budgetedLaborCost"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "totalCostVariance",
          "expression": {
            "kind": "binary",
            "operator": "-",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "actualTotalCost"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "budgetedTotalCost"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "calculationMethod",
          "expression": {
            "kind": "identifier",
            "name": "calculationMethod"
          }
        },
        {
          "kind": "mutate",
          "target": "calculatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventProfitabilityRecalculated"
      ]
    },
    {
      "name": "create",
      "entity": "EventSummary",
      "parameters": [
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "highlights",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "issues",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "financialPerformance",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "clientFeedback",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "insights",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "overallSummary",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Event ID is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "eventId",
          "expression": {
            "kind": "identifier",
            "name": "eventId"
          }
        },
        {
          "kind": "mutate",
          "target": "highlights",
          "expression": {
            "kind": "identifier",
            "name": "highlights"
          }
        },
        {
          "kind": "mutate",
          "target": "issues",
          "expression": {
            "kind": "identifier",
            "name": "issues"
          }
        },
        {
          "kind": "mutate",
          "target": "financialPerformance",
          "expression": {
            "kind": "identifier",
            "name": "financialPerformance"
          }
        },
        {
          "kind": "mutate",
          "target": "clientFeedback",
          "expression": {
            "kind": "identifier",
            "name": "clientFeedback"
          }
        },
        {
          "kind": "mutate",
          "target": "insights",
          "expression": {
            "kind": "identifier",
            "name": "insights"
          }
        },
        {
          "kind": "mutate",
          "target": "overallSummary",
          "expression": {
            "kind": "identifier",
            "name": "overallSummary"
          }
        },
        {
          "kind": "mutate",
          "target": "generatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventSummaryCreated"
      ]
    },
    {
      "name": "update",
      "entity": "EventSummary",
      "parameters": [
        {
          "name": "highlights",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "issues",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "financialPerformance",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "clientFeedback",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "insights",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "overallSummary",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "highlights",
          "expression": {
            "kind": "identifier",
            "name": "highlights"
          }
        },
        {
          "kind": "mutate",
          "target": "issues",
          "expression": {
            "kind": "identifier",
            "name": "issues"
          }
        },
        {
          "kind": "mutate",
          "target": "financialPerformance",
          "expression": {
            "kind": "identifier",
            "name": "financialPerformance"
          }
        },
        {
          "kind": "mutate",
          "target": "clientFeedback",
          "expression": {
            "kind": "identifier",
            "name": "clientFeedback"
          }
        },
        {
          "kind": "mutate",
          "target": "insights",
          "expression": {
            "kind": "identifier",
            "name": "insights"
          }
        },
        {
          "kind": "mutate",
          "target": "overallSummary",
          "expression": {
            "kind": "identifier",
            "name": "overallSummary"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventSummaryUpdated"
      ]
    },
    {
      "name": "refresh",
      "entity": "EventSummary",
      "parameters": [],
      "guards": [],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "generatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventSummaryRefreshed"
      ]
    },
    {
      "name": "assign",
      "entity": "EventStaff",
      "parameters": [
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "role",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "shiftStart",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "shiftEnd",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Event ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "User ID is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "eventId",
          "expression": {
            "kind": "identifier",
            "name": "eventId"
          }
        },
        {
          "kind": "mutate",
          "target": "userId",
          "expression": {
            "kind": "identifier",
            "name": "userId"
          }
        },
        {
          "kind": "mutate",
          "target": "role",
          "expression": {
            "kind": "identifier",
            "name": "role"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "shiftStart",
          "expression": {
            "kind": "identifier",
            "name": "shiftStart"
          }
        },
        {
          "kind": "mutate",
          "target": "shiftEnd",
          "expression": {
            "kind": "identifier",
            "name": "shiftEnd"
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "assigned"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventStaffAssigned"
      ]
    },
    {
      "name": "unassign",
      "entity": "EventStaff",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "assigned"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Staff member is not currently assigned"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "unassigned"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "EventStaffUnassigned"
      ]
    },
    {
      "name": "create",
      "entity": "Ingredient",
      "parameters": [
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "defaultUnitId",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "densityGPerMl",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "shelfLifeDays",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "storageInstructions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "allergens",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "defaultUnitId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "defaultUnitId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Ingredient name is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Default unit ID is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "name",
          "expression": {
            "kind": "identifier",
            "name": "name"
          }
        },
        {
          "kind": "mutate",
          "target": "category",
          "expression": {
            "kind": "identifier",
            "name": "category"
          }
        },
        {
          "kind": "mutate",
          "target": "defaultUnitId",
          "expression": {
            "kind": "identifier",
            "name": "defaultUnitId"
          }
        },
        {
          "kind": "mutate",
          "target": "densityGPerMl",
          "expression": {
            "kind": "identifier",
            "name": "densityGPerMl"
          }
        },
        {
          "kind": "mutate",
          "target": "shelfLifeDays",
          "expression": {
            "kind": "identifier",
            "name": "shelfLifeDays"
          }
        },
        {
          "kind": "mutate",
          "target": "storageInstructions",
          "expression": {
            "kind": "identifier",
            "name": "storageInstructions"
          }
        },
        {
          "kind": "mutate",
          "target": "allergens",
          "expression": {
            "kind": "identifier",
            "name": "allergens"
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "IngredientCreated"
      ]
    },
    {
      "name": "update",
      "entity": "Ingredient",
      "parameters": [
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "defaultUnitId",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "densityGPerMl",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "storageInstructions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "self"
          },
          "property": "isActive"
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Ingredient name is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update a deactivated ingredient"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "name",
          "expression": {
            "kind": "identifier",
            "name": "name"
          }
        },
        {
          "kind": "mutate",
          "target": "category",
          "expression": {
            "kind": "identifier",
            "name": "category"
          }
        },
        {
          "kind": "mutate",
          "target": "defaultUnitId",
          "expression": {
            "kind": "identifier",
            "name": "defaultUnitId"
          }
        },
        {
          "kind": "mutate",
          "target": "densityGPerMl",
          "expression": {
            "kind": "identifier",
            "name": "densityGPerMl"
          }
        },
        {
          "kind": "mutate",
          "target": "storageInstructions",
          "expression": {
            "kind": "identifier",
            "name": "storageInstructions"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "IngredientUpdated"
      ]
    },
    {
      "name": "deactivate",
      "entity": "Ingredient",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "self"
          },
          "property": "isActive"
        }
      ],
      "constraints": [
        {
          "name": "warnActiveRecipes",
          "code": "warnActiveRecipes",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Ingredient is already deactivated"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Deactivating ingredient '{ingredientName}'  verify it is not used in active recipes"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "ingredientName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "ingredientId",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "id"
                      }
                    },
                    {
                      "key": "reason",
                      "value": {
                        "kind": "identifier",
                        "name": "reason"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "IngredientDeactivated"
      ]
    },
    {
      "name": "updateAllergens",
      "entity": "Ingredient",
      "parameters": [
        {
          "name": "allergens",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "self"
          },
          "property": "isActive"
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update allergens on a deactivated ingredient"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "allergens",
          "expression": {
            "kind": "identifier",
            "name": "allergens"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "IngredientAllergensUpdated"
      ]
    },
    {
      "name": "updateShelfLife",
      "entity": "Ingredient",
      "parameters": [
        {
          "name": "shelfLifeDays",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "storageInstructions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "self"
          },
          "property": "isActive"
        },
        {
          "kind": "binary",
          "operator": ">=",
          "left": {
            "kind": "identifier",
            "name": "shelfLifeDays"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update shelf life on a deactivated ingredient"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Shelf life days cannot be negative"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "shelfLifeDays",
          "expression": {
            "kind": "identifier",
            "name": "shelfLifeDays"
          }
        },
        {
          "kind": "mutate",
          "target": "storageInstructions",
          "expression": {
            "kind": "identifier",
            "name": "storageInstructions"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "IngredientShelfLifeUpdated"
      ]
    },
    {
      "name": "reserve",
      "entity": "InventoryItem",
      "parameters": [
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnStockoutRisk",
          "code": "warnStockoutRisk",
          "expression": {
            "kind": "binary",
            "operator": "<",
            "left": {
              "kind": "binary",
              "operator": "-",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityAvailable"
              },
              "right": {
                "kind": "identifier",
                "name": "quantity"
              }
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        },
        {
          "name": "warnBelowParAfterReserve",
          "code": "warnBelowParAfterReserve",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "<",
              "left": {
                "kind": "binary",
                "operator": "-",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "quantityOnHand"
                },
                "right": {
                  "kind": "identifier",
                  "name": "quantity"
                }
              },
              "right": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "parLevel"
              }
            },
            "right": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "parLevel"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Reserving {quantity} {unit} - only {available} available"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "itemName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "requested",
                      "value": {
                        "kind": "identifier",
                        "name": "quantity"
                      }
                    },
                    {
                      "key": "available",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "quantityAvailable"
                      }
                    },
                    {
                      "key": "shortfall",
                      "value": {
                        "kind": "binary",
                        "operator": "-",
                        "left": {
                          "kind": "identifier",
                          "name": "quantity"
                        },
                        "right": {
                          "kind": "member",
                          "object": {
                            "kind": "identifier",
                            "name": "self"
                          },
                          "property": "quantityAvailable"
                        }
                      }
                    },
                    {
                      "key": "unit",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "baseUnit"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "After reservation, '{itemName}' will be below par level"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "itemName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "currentOnHand",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "quantityOnHand"
                      }
                    },
                    {
                      "key": "parLevel",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "parLevel"
                      }
                    },
                    {
                      "key": "newOnHand",
                      "value": {
                        "kind": "binary",
                        "operator": "-",
                        "left": {
                          "kind": "member",
                          "object": {
                            "kind": "identifier",
                            "name": "self"
                          },
                          "property": "quantityOnHand"
                        },
                        "right": {
                          "kind": "identifier",
                          "name": "quantity"
                        }
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "quantityReserved",
          "expression": {
            "kind": "binary",
            "operator": "+",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityReserved"
            },
            "right": {
              "kind": "identifier",
              "name": "quantity"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "InventoryReserved"
      ]
    },
    {
      "name": "consume",
      "entity": "InventoryItem",
      "parameters": [
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "lotId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "blockInsufficientStock",
          "code": "blockInsufficientStock",
          "expression": {
            "kind": "binary",
            "operator": "<",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityOnHand"
            },
            "right": {
              "kind": "identifier",
              "name": "quantity"
            }
          },
          "severity": "block",
          "overrideable": false
        },
        {
          "name": "warnBelowParAfterConsume",
          "code": "warnBelowParAfterConsume",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "<",
              "left": {
                "kind": "binary",
                "operator": "-",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "quantityOnHand"
                },
                "right": {
                  "kind": "identifier",
                  "name": "quantity"
                }
              },
              "right": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "parLevel"
              }
            },
            "right": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "parLevel"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        },
        {
          "name": "infoConsumed",
          "code": "infoConsumed",
          "expression": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityOnHand"
            },
            "right": {
              "kind": "identifier",
              "name": "quantity"
            }
          },
          "severity": "ok",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Cannot consume {quantity} {unit} - only {onHand} on hand"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "itemName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "requested",
                      "value": {
                        "kind": "identifier",
                        "name": "quantity"
                      }
                    },
                    {
                      "key": "onHand",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "quantityOnHand"
                      }
                    },
                    {
                      "key": "shortfall",
                      "value": {
                        "kind": "binary",
                        "operator": "-",
                        "left": {
                          "kind": "identifier",
                          "name": "quantity"
                        },
                        "right": {
                          "kind": "member",
                          "object": {
                            "kind": "identifier",
                            "name": "self"
                          },
                          "property": "quantityOnHand"
                        }
                      }
                    },
                    {
                      "key": "unit",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "baseUnit"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "After consumption, '{itemName}' will be below par - recommend reorder"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "itemName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "currentOnHand",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "quantityOnHand"
                      }
                    },
                    {
                      "key": "parLevel",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "parLevel"
                      }
                    },
                    {
                      "key": "newOnHand",
                      "value": {
                        "kind": "binary",
                        "operator": "-",
                        "left": {
                          "kind": "member",
                          "object": {
                            "kind": "identifier",
                            "name": "self"
                          },
                          "property": "quantityOnHand"
                        },
                        "right": {
                          "kind": "identifier",
                          "name": "quantity"
                        }
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Consuming {quantity} {unit} of '{itemName}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "itemName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "quantity",
                      "value": {
                        "kind": "identifier",
                        "name": "quantity"
                      }
                    },
                    {
                      "key": "unit",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "baseUnit"
                      }
                    },
                    {
                      "key": "lotId",
                      "value": {
                        "kind": "identifier",
                        "name": "lotId"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "quantityOnHand",
          "expression": {
            "kind": "binary",
            "operator": "-",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityOnHand"
            },
            "right": {
              "kind": "identifier",
              "name": "quantity"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "quantityReserved",
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityReserved"
              },
              "right": {
                "kind": "identifier",
                "name": "quantity"
              }
            },
            "consequent": {
              "kind": "binary",
              "operator": "-",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityReserved"
              },
              "right": {
                "kind": "identifier",
                "name": "quantity"
              }
            },
            "alternate": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "InventoryConsumed"
      ]
    },
    {
      "name": "waste",
      "entity": "InventoryItem",
      "parameters": [
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "lotId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "reason"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "reason"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "blockInsufficientForWaste",
          "code": "blockInsufficientForWaste",
          "expression": {
            "kind": "binary",
            "operator": "<",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityOnHand"
            },
            "right": {
              "kind": "identifier",
              "name": "quantity"
            }
          },
          "severity": "block",
          "overrideable": false
        },
        {
          "name": "warnHighWaste",
          "code": "warnHighWaste",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "identifier",
                "name": "quantity"
              },
              "right": {
                "kind": "binary",
                "operator": "*",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "quantityOnHand"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "number",
                    "value": 0.1
                  }
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityOnHand"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Cannot record waste of {quantity} {unit} - only {onHand} on hand"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "itemName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "requested",
                      "value": {
                        "kind": "identifier",
                        "name": "quantity"
                      }
                    },
                    {
                      "key": "onHand",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "quantityOnHand"
                      }
                    },
                    {
                      "key": "shortfall",
                      "value": {
                        "kind": "binary",
                        "operator": "-",
                        "left": {
                          "kind": "identifier",
                          "name": "quantity"
                        },
                        "right": {
                          "kind": "member",
                          "object": {
                            "kind": "identifier",
                            "name": "self"
                          },
                          "property": "quantityOnHand"
                        }
                      }
                    },
                    {
                      "key": "unit",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "baseUnit"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "High waste amount ({percentage}% of on-hand) for '{itemName}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "itemName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "quantity",
                      "value": {
                        "kind": "identifier",
                        "name": "quantity"
                      }
                    },
                    {
                      "key": "onHand",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "quantityOnHand"
                      }
                    },
                    {
                      "key": "percentage",
                      "value": {
                        "kind": "binary",
                        "operator": "*",
                        "left": {
                          "kind": "binary",
                          "operator": "/",
                          "left": {
                            "kind": "identifier",
                            "name": "quantity"
                          },
                          "right": {
                            "kind": "member",
                            "object": {
                              "kind": "identifier",
                              "name": "self"
                            },
                            "property": "quantityOnHand"
                          }
                        },
                        "right": {
                          "kind": "literal",
                          "value": {
                            "kind": "number",
                            "value": 100
                          }
                        }
                      }
                    },
                    {
                      "key": "reason",
                      "value": {
                        "kind": "identifier",
                        "name": "reason"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "quantityOnHand",
          "expression": {
            "kind": "binary",
            "operator": "-",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityOnHand"
            },
            "right": {
              "kind": "identifier",
              "name": "quantity"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "quantityReserved",
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityReserved"
              },
              "right": {
                "kind": "identifier",
                "name": "quantity"
              }
            },
            "consequent": {
              "kind": "binary",
              "operator": "-",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityReserved"
              },
              "right": {
                "kind": "identifier",
                "name": "quantity"
              }
            },
            "alternate": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "InventoryWasted"
      ]
    },
    {
      "name": "adjust",
      "entity": "InventoryItem",
      "parameters": [
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "reason"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "reason"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnLargeNegativeAdjustment",
          "code": "warnLargeNegativeAdjustment",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "<",
              "left": {
                "kind": "identifier",
                "name": "quantity"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "<",
              "left": {
                "kind": "identifier",
                "name": "quantity"
              },
              "right": {
                "kind": "binary",
                "operator": "*",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "quantityOnHand"
                },
                "right": {
                  "kind": "unary",
                  "operator": "-",
                  "operand": {
                    "kind": "literal",
                    "value": {
                      "kind": "number",
                      "value": 0.5
                    }
                  }
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Large negative adjustment ({adjustment}) for '{itemName}' - requires verification"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "itemName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "adjustment",
                      "value": {
                        "kind": "identifier",
                        "name": "quantity"
                      }
                    },
                    {
                      "key": "currentOnHand",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "quantityOnHand"
                      }
                    },
                    {
                      "key": "newOnHand",
                      "value": {
                        "kind": "binary",
                        "operator": "+",
                        "left": {
                          "kind": "member",
                          "object": {
                            "kind": "identifier",
                            "name": "self"
                          },
                          "property": "quantityOnHand"
                        },
                        "right": {
                          "kind": "identifier",
                          "name": "quantity"
                        }
                      }
                    },
                    {
                      "key": "reason",
                      "value": {
                        "kind": "identifier",
                        "name": "reason"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "quantityOnHand",
          "expression": {
            "kind": "binary",
            "operator": "+",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityOnHand"
            },
            "right": {
              "kind": "identifier",
              "name": "quantity"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "InventoryAdjusted"
      ]
    },
    {
      "name": "restock",
      "entity": "InventoryItem",
      "parameters": [
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "costPerUnit",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "costPerUnit"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "identifier",
              "name": "costPerUnit"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "infoRestocked",
          "code": "infoRestocked",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "ok",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Restocked {quantity} {unit} of '{itemName}' at ${unitCost} per {unit}"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "itemName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "quantity",
                      "value": {
                        "kind": "identifier",
                        "name": "quantity"
                      }
                    },
                    {
                      "key": "unit",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "baseUnit"
                      }
                    },
                    {
                      "key": "unitCost",
                      "value": {
                        "kind": "identifier",
                        "name": "costPerUnit"
                      }
                    },
                    {
                      "key": "totalCost",
                      "value": {
                        "kind": "binary",
                        "operator": "*",
                        "left": {
                          "kind": "identifier",
                          "name": "quantity"
                        },
                        "right": {
                          "kind": "identifier",
                          "name": "costPerUnit"
                        }
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "quantityOnHand",
          "expression": {
            "kind": "binary",
            "operator": "+",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityOnHand"
            },
            "right": {
              "kind": "identifier",
              "name": "quantity"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "costPerUnit",
          "expression": {
            "kind": "identifier",
            "name": "costPerUnit"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "InventoryRestocked"
      ]
    },
    {
      "name": "releaseReservation",
      "entity": "InventoryItem",
      "parameters": [
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnReleaseExceedsReserved",
          "code": "warnReleaseExceedsReserved",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityReserved"
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Releasing more ({quantity}) than reserved ({reserved}) - adjusting to reserved amount"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "itemName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "requestedRelease",
                      "value": {
                        "kind": "identifier",
                        "name": "quantity"
                      }
                    },
                    {
                      "key": "reserved",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "quantityReserved"
                      }
                    },
                    {
                      "key": "adjusted",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "quantityReserved"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "quantityReserved",
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityReserved"
              },
              "right": {
                "kind": "identifier",
                "name": "quantity"
              }
            },
            "consequent": {
              "kind": "binary",
              "operator": "-",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityReserved"
              },
              "right": {
                "kind": "identifier",
                "name": "quantity"
              }
            },
            "alternate": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "InventoryReservationReleased"
      ]
    },
    {
      "name": "create",
      "entity": "InventoryItem",
      "parameters": [
        {
          "name": "itemNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "baseUnit",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "parLevel",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reorderPoint",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reorderQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "costPerUnit",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "supplierId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "allergens",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "itemNumber"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "itemNumber"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Item number/SKU is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Item name is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "itemNumber",
          "expression": {
            "kind": "identifier",
            "name": "itemNumber"
          }
        },
        {
          "kind": "mutate",
          "target": "name",
          "expression": {
            "kind": "identifier",
            "name": "name"
          }
        },
        {
          "kind": "mutate",
          "target": "itemType",
          "expression": {
            "kind": "identifier",
            "name": "itemType"
          }
        },
        {
          "kind": "mutate",
          "target": "category",
          "expression": {
            "kind": "identifier",
            "name": "category"
          }
        },
        {
          "kind": "mutate",
          "target": "baseUnit",
          "expression": {
            "kind": "identifier",
            "name": "baseUnit"
          }
        },
        {
          "kind": "mutate",
          "target": "quantityOnHand",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "quantityReserved",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "quantityAvailable",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "parLevel",
          "expression": {
            "kind": "identifier",
            "name": "parLevel"
          }
        },
        {
          "kind": "mutate",
          "target": "reorderPoint",
          "expression": {
            "kind": "identifier",
            "name": "reorderPoint"
          }
        },
        {
          "kind": "mutate",
          "target": "reorderQuantity",
          "expression": {
            "kind": "identifier",
            "name": "reorderQuantity"
          }
        },
        {
          "kind": "mutate",
          "target": "costPerUnit",
          "expression": {
            "kind": "identifier",
            "name": "costPerUnit"
          }
        },
        {
          "kind": "mutate",
          "target": "supplierId",
          "expression": {
            "kind": "identifier",
            "name": "supplierId"
          }
        },
        {
          "kind": "mutate",
          "target": "locationId",
          "expression": {
            "kind": "identifier",
            "name": "locationId"
          }
        },
        {
          "kind": "mutate",
          "target": "allergens",
          "expression": {
            "kind": "identifier",
            "name": "allergens"
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "InventoryItemCreated"
      ]
    },
    {
      "name": "create",
      "entity": "InventorySupplier",
      "parameters": [
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "supplierNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "contactPerson",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "email",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "phone",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "paymentTerms",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tags",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnNoContact",
          "code": "warnNoContact",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "or",
              "left": {
                "kind": "binary",
                "operator": "==",
                "left": {
                  "kind": "identifier",
                  "name": "contactPerson"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "null"
                  }
                }
              },
              "right": {
                "kind": "binary",
                "operator": "==",
                "left": {
                  "kind": "identifier",
                  "name": "contactPerson"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": ""
                  }
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "or",
              "left": {
                "kind": "binary",
                "operator": "==",
                "left": {
                  "kind": "identifier",
                  "name": "email"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "null"
                  }
                }
              },
              "right": {
                "kind": "binary",
                "operator": "==",
                "left": {
                  "kind": "identifier",
                  "name": "email"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": ""
                  }
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Supplier name is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Creating supplier '{name}' without contact information"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "name",
                      "value": {
                        "kind": "identifier",
                        "name": "name"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "name",
          "expression": {
            "kind": "identifier",
            "name": "name"
          }
        },
        {
          "kind": "mutate",
          "target": "supplierNumber",
          "expression": {
            "kind": "identifier",
            "name": "supplierNumber"
          }
        },
        {
          "kind": "mutate",
          "target": "contactPerson",
          "expression": {
            "kind": "identifier",
            "name": "contactPerson"
          }
        },
        {
          "kind": "mutate",
          "target": "email",
          "expression": {
            "kind": "identifier",
            "name": "email"
          }
        },
        {
          "kind": "mutate",
          "target": "phone",
          "expression": {
            "kind": "identifier",
            "name": "phone"
          }
        },
        {
          "kind": "mutate",
          "target": "paymentTerms",
          "expression": {
            "kind": "identifier",
            "name": "paymentTerms"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "tags",
          "expression": {
            "kind": "identifier",
            "name": "tags"
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        },
        {
          "kind": "mutate",
          "target": "openPOCount",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "InventorySupplierCreated"
      ]
    },
    {
      "name": "update",
      "entity": "InventorySupplier",
      "parameters": [
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "contactPerson",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "email",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "phone",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "paymentTerms",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tags",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Supplier name is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "name",
          "expression": {
            "kind": "identifier",
            "name": "name"
          }
        },
        {
          "kind": "mutate",
          "target": "contactPerson",
          "expression": {
            "kind": "identifier",
            "name": "contactPerson"
          }
        },
        {
          "kind": "mutate",
          "target": "email",
          "expression": {
            "kind": "identifier",
            "name": "email"
          }
        },
        {
          "kind": "mutate",
          "target": "phone",
          "expression": {
            "kind": "identifier",
            "name": "phone"
          }
        },
        {
          "kind": "mutate",
          "target": "paymentTerms",
          "expression": {
            "kind": "identifier",
            "name": "paymentTerms"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "tags",
          "expression": {
            "kind": "identifier",
            "name": "tags"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "InventorySupplierUpdated"
      ]
    },
    {
      "name": "deactivate",
      "entity": "InventorySupplier",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "self"
          },
          "property": "isActive"
        }
      ],
      "constraints": [
        {
          "name": "warnOpenPOs",
          "code": "warnOpenPOs",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "openPOCount"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Supplier is already inactive"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Deactivating supplier '{name}' with {count} open purchase orders"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "name",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "count",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "openPOCount"
                      }
                    },
                    {
                      "key": "reason",
                      "value": {
                        "kind": "identifier",
                        "name": "reason"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "InventorySupplierDeactivated"
      ]
    },
    {
      "name": "create",
      "entity": "InventoryTransaction",
      "parameters": [
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "transactionType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "unitCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "referenceType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "referenceId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "employeeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "storageLocationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "itemId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "itemId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "transactionType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "transactionType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnUnknownType",
          "code": "warnUnknownType",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "identifier",
              "name": "transactionType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        },
        {
          "name": "warnLargeQuantity",
          "code": "warnLargeQuantity",
          "expression": {
            "kind": "binary",
            "operator": "or",
            "left": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "identifier",
                "name": "quantity"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 1000
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "<",
              "left": {
                "kind": "identifier",
                "name": "quantity"
              },
              "right": {
                "kind": "unary",
                "operator": "-",
                "operand": {
                  "kind": "literal",
                  "value": {
                    "kind": "number",
                    "value": 1000
                  }
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        },
        {
          "name": "warnWaste",
          "code": "warnWaste",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "identifier",
              "name": "transactionType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "waste"
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Item ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Transaction type is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Quantity must not be zero"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Transaction type is empty for item '{itemId}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "itemId",
                      "value": {
                        "kind": "identifier",
                        "name": "itemId"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Large transaction quantity ({quantity}) for item '{itemId}' - verify correctness"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "itemId",
                      "value": {
                        "kind": "identifier",
                        "name": "itemId"
                      }
                    },
                    {
                      "key": "quantity",
                      "value": {
                        "kind": "identifier",
                        "name": "quantity"
                      }
                    },
                    {
                      "key": "transactionType",
                      "value": {
                        "kind": "identifier",
                        "name": "transactionType"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Recording waste of {quantity} units for item '{itemId}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "itemId",
                      "value": {
                        "kind": "identifier",
                        "name": "itemId"
                      }
                    },
                    {
                      "key": "quantity",
                      "value": {
                        "kind": "identifier",
                        "name": "quantity"
                      }
                    },
                    {
                      "key": "reason",
                      "value": {
                        "kind": "identifier",
                        "name": "reason"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "itemId",
          "expression": {
            "kind": "identifier",
            "name": "itemId"
          }
        },
        {
          "kind": "mutate",
          "target": "transactionType",
          "expression": {
            "kind": "identifier",
            "name": "transactionType"
          }
        },
        {
          "kind": "mutate",
          "target": "quantity",
          "expression": {
            "kind": "identifier",
            "name": "quantity"
          }
        },
        {
          "kind": "mutate",
          "target": "unitCost",
          "expression": {
            "kind": "identifier",
            "name": "unitCost"
          }
        },
        {
          "kind": "mutate",
          "target": "totalCost",
          "expression": {
            "kind": "binary",
            "operator": "*",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "identifier",
              "name": "unitCost"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "referenceType",
          "expression": {
            "kind": "identifier",
            "name": "referenceType"
          }
        },
        {
          "kind": "mutate",
          "target": "referenceId",
          "expression": {
            "kind": "identifier",
            "name": "referenceId"
          }
        },
        {
          "kind": "mutate",
          "target": "reason",
          "expression": {
            "kind": "identifier",
            "name": "reason"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "employeeId",
          "expression": {
            "kind": "identifier",
            "name": "employeeId"
          }
        },
        {
          "kind": "mutate",
          "target": "storageLocationId",
          "expression": {
            "kind": "identifier",
            "name": "storageLocationId"
          }
        },
        {
          "kind": "mutate",
          "target": "transactionDate",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "InventoryTransactionCreated"
      ]
    },
    {
      "name": "claim",
      "entity": "KitchenTask",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "or",
          "left": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "pending"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "in_progress"
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "in_progress"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "KitchenTaskClaimed"
      ]
    },
    {
      "name": "start",
      "entity": "KitchenTask",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "pending"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "in_progress"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "KitchenTaskStarted"
      ]
    },
    {
      "name": "complete",
      "entity": "KitchenTask",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "in_progress"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "done"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "completedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "KitchenTaskCompleted"
      ]
    },
    {
      "name": "release",
      "entity": "KitchenTask",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "in_progress"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "pending"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "KitchenTaskReleased"
      ]
    },
    {
      "name": "reassign",
      "entity": "KitchenTask",
      "parameters": [
        {
          "name": "newUserId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "requestedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newUserId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newUserId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "requestedBy"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "requestedBy"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "in",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "array",
            "elements": [
              {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "pending"
                }
              },
              {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "in_progress"
                }
              }
            ]
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "KitchenTaskReassigned"
      ]
    },
    {
      "name": "updatePriority",
      "entity": "KitchenTask",
      "parameters": [
        {
          "name": "priority",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "identifier",
              "name": "priority"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 1
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "<=",
            "left": {
              "kind": "identifier",
              "name": "priority"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 5
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "priority",
          "expression": {
            "kind": "identifier",
            "name": "priority"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "KitchenTaskPriorityUpdated"
      ]
    },
    {
      "name": "updateComplexity",
      "entity": "KitchenTask",
      "parameters": [
        {
          "name": "complexity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "identifier",
              "name": "complexity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 1
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "<=",
            "left": {
              "kind": "identifier",
              "name": "complexity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 5
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "complexity",
          "expression": {
            "kind": "identifier",
            "name": "complexity"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "KitchenTaskComplexityUpdated"
      ]
    },
    {
      "name": "addTag",
      "entity": "KitchenTask",
      "parameters": [
        {
          "name": "tag",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "tag"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "tag"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "tags",
          "expression": {
            "kind": "binary",
            "operator": "+",
            "left": {
              "kind": "binary",
              "operator": "+",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "tags"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": ","
                }
              }
            },
            "right": {
              "kind": "identifier",
              "name": "tag"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "KitchenTaskTagAdded"
      ]
    },
    {
      "name": "removeTag",
      "entity": "KitchenTask",
      "parameters": [
        {
          "name": "tag",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "tag"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "tag"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "KitchenTaskTagRemoved"
      ]
    },
    {
      "name": "cancel",
      "entity": "KitchenTask",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "canceledBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "done"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "cancelled"
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "cancelled"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "KitchenTaskCanceled"
      ]
    },
    {
      "name": "create",
      "entity": "KitchenTask",
      "parameters": [
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "summary",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "priority",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "complexity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tags",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "dueDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "title"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "title"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "summary"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "summary"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "identifier",
              "name": "priority"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 1
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "<=",
            "left": {
              "kind": "identifier",
              "name": "priority"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 5
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "identifier",
              "name": "complexity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 1
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "<=",
            "left": {
              "kind": "identifier",
              "name": "complexity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 5
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Task title is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Task summary is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Priority must be between 1 and 5"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Complexity must be between 1 and 5"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "title",
          "expression": {
            "kind": "identifier",
            "name": "title"
          }
        },
        {
          "kind": "mutate",
          "target": "summary",
          "expression": {
            "kind": "identifier",
            "name": "summary"
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "pending"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "priority",
          "expression": {
            "kind": "identifier",
            "name": "priority"
          }
        },
        {
          "kind": "mutate",
          "target": "complexity",
          "expression": {
            "kind": "identifier",
            "name": "complexity"
          }
        },
        {
          "kind": "mutate",
          "target": "tags",
          "expression": {
            "kind": "identifier",
            "name": "tags"
          }
        },
        {
          "kind": "mutate",
          "target": "dueDate",
          "expression": {
            "kind": "identifier",
            "name": "dueDate"
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "KitchenTaskCreated"
      ]
    },
    {
      "name": "create",
      "entity": "Lead",
      "parameters": [
        {
          "name": "source",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "companyName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "contactName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "contactEmail",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "contactPhone",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "estimatedGuests",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "estimatedValue",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "assignedTo",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "contactName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "contactName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnNoContactInfo",
          "code": "warnNoContactInfo",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "or",
              "left": {
                "kind": "binary",
                "operator": "==",
                "left": {
                  "kind": "identifier",
                  "name": "contactEmail"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "null"
                  }
                }
              },
              "right": {
                "kind": "binary",
                "operator": "==",
                "left": {
                  "kind": "identifier",
                  "name": "contactEmail"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": ""
                  }
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "or",
              "left": {
                "kind": "binary",
                "operator": "==",
                "left": {
                  "kind": "identifier",
                  "name": "contactPhone"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "null"
                  }
                }
              },
              "right": {
                "kind": "binary",
                "operator": "==",
                "left": {
                  "kind": "identifier",
                  "name": "contactPhone"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": ""
                  }
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Contact name is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Creating lead with no email or phone for '{contactName}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "contactName",
                      "value": {
                        "kind": "identifier",
                        "name": "contactName"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "source",
          "expression": {
            "kind": "identifier",
            "name": "source"
          }
        },
        {
          "kind": "mutate",
          "target": "companyName",
          "expression": {
            "kind": "identifier",
            "name": "companyName"
          }
        },
        {
          "kind": "mutate",
          "target": "contactName",
          "expression": {
            "kind": "identifier",
            "name": "contactName"
          }
        },
        {
          "kind": "mutate",
          "target": "contactEmail",
          "expression": {
            "kind": "identifier",
            "name": "contactEmail"
          }
        },
        {
          "kind": "mutate",
          "target": "contactPhone",
          "expression": {
            "kind": "identifier",
            "name": "contactPhone"
          }
        },
        {
          "kind": "mutate",
          "target": "eventType",
          "expression": {
            "kind": "identifier",
            "name": "eventType"
          }
        },
        {
          "kind": "mutate",
          "target": "eventDate",
          "expression": {
            "kind": "identifier",
            "name": "eventDate"
          }
        },
        {
          "kind": "mutate",
          "target": "estimatedGuests",
          "expression": {
            "kind": "identifier",
            "name": "estimatedGuests"
          }
        },
        {
          "kind": "mutate",
          "target": "estimatedValue",
          "expression": {
            "kind": "identifier",
            "name": "estimatedValue"
          }
        },
        {
          "kind": "mutate",
          "target": "assignedTo",
          "expression": {
            "kind": "identifier",
            "name": "assignedTo"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "new"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "LeadCreated"
      ]
    },
    {
      "name": "update",
      "entity": "Lead",
      "parameters": [
        {
          "name": "companyName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "contactName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "contactEmail",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "contactPhone",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "estimatedGuests",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "estimatedValue",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "status",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "assignedTo",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isConverted"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "contactName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "contactName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnStatusRegression",
          "code": "warnStatusRegression",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "identifier",
                "name": "status"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "new"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "status"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "new"
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update an archived lead"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update a converted lead"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Contact name is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Reverting lead '{contactName}' status from '{oldStatus}' back to 'new'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "contactName",
                      "value": {
                        "kind": "identifier",
                        "name": "contactName"
                      }
                    },
                    {
                      "key": "oldStatus",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "status"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "companyName",
          "expression": {
            "kind": "identifier",
            "name": "companyName"
          }
        },
        {
          "kind": "mutate",
          "target": "contactName",
          "expression": {
            "kind": "identifier",
            "name": "contactName"
          }
        },
        {
          "kind": "mutate",
          "target": "contactEmail",
          "expression": {
            "kind": "identifier",
            "name": "contactEmail"
          }
        },
        {
          "kind": "mutate",
          "target": "contactPhone",
          "expression": {
            "kind": "identifier",
            "name": "contactPhone"
          }
        },
        {
          "kind": "mutate",
          "target": "eventType",
          "expression": {
            "kind": "identifier",
            "name": "eventType"
          }
        },
        {
          "kind": "mutate",
          "target": "eventDate",
          "expression": {
            "kind": "identifier",
            "name": "eventDate"
          }
        },
        {
          "kind": "mutate",
          "target": "estimatedGuests",
          "expression": {
            "kind": "identifier",
            "name": "estimatedGuests"
          }
        },
        {
          "kind": "mutate",
          "target": "estimatedValue",
          "expression": {
            "kind": "identifier",
            "name": "estimatedValue"
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "identifier",
            "name": "status"
          }
        },
        {
          "kind": "mutate",
          "target": "assignedTo",
          "expression": {
            "kind": "identifier",
            "name": "assignedTo"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "LeadUpdated"
      ]
    },
    {
      "name": "convertToClient",
      "entity": "Lead",
      "parameters": [
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "clientId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "clientId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "blockAlreadyConverted",
          "code": "blockAlreadyConverted",
          "expression": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isConverted"
          },
          "severity": "block",
          "overrideable": false
        },
        {
          "name": "blockDisqualified",
          "code": "blockDisqualified",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "disqualified"
              }
            }
          },
          "severity": "block",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot convert an archived lead"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Client ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Lead '{contactName}' has already been converted to client '{existingClientId}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "contactName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "contactName"
                      }
                    },
                    {
                      "key": "existingClientId",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "convertedToClientId"
                      }
                    },
                    {
                      "key": "convertedAt",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "convertedAt"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Cannot convert disqualified lead '{contactName}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "contactName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "contactName"
                      }
                    },
                    {
                      "key": "status",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "status"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "convertedToClientId",
          "expression": {
            "kind": "identifier",
            "name": "clientId"
          }
        },
        {
          "kind": "mutate",
          "target": "convertedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "won"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "LeadConvertedToClient"
      ]
    },
    {
      "name": "disqualify",
      "entity": "Lead",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isConverted"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnHighValueDisqualify",
          "code": "warnHighValueDisqualify",
          "expression": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isHighValue"
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot disqualify an archived lead"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot disqualify a converted lead"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Disqualifying high-value lead '{contactName}' (${estimatedValue})"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "contactName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "contactName"
                      }
                    },
                    {
                      "key": "estimatedValue",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "estimatedValue"
                      }
                    },
                    {
                      "key": "companyName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "companyName"
                      }
                    },
                    {
                      "key": "reason",
                      "value": {
                        "kind": "identifier",
                        "name": "reason"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "disqualified"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "LeadDisqualified"
      ]
    },
    {
      "name": "archive",
      "entity": "Lead",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnArchiveOpenLead",
          "code": "warnArchiveOpenLead",
          "expression": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isOpen"
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Lead is already archived"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Archiving open lead '{contactName}' with status '{status}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "contactName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "contactName"
                      }
                    },
                    {
                      "key": "status",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "status"
                      }
                    },
                    {
                      "key": "estimatedValue",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "estimatedValue"
                      }
                    },
                    {
                      "key": "reason",
                      "value": {
                        "kind": "identifier",
                        "name": "reason"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "deletedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "LeadArchived"
      ]
    },
    {
      "name": "update",
      "entity": "Menu",
      "parameters": [
        {
          "name": "newName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newDescription",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newCategory",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newBasePrice",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newPricePerPerson",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newMinGuests",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newMaxGuests",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newIsActive",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnPriceDecrease",
          "code": "warnPriceDecrease",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "identifier",
                "name": "newPricePerPerson"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "<",
              "left": {
                "kind": "identifier",
                "name": "newPricePerPerson"
              },
              "right": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "pricePerPerson"
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        },
        {
          "name": "warnGuestRangeIncrease",
          "code": "warnGuestRangeIncrease",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "identifier",
                "name": "newMaxGuests"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "identifier",
                "name": "newMaxGuests"
              },
              "right": {
                "kind": "binary",
                "operator": "*",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "maxGuests"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "number",
                    "value": 1.5
                  }
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Menu name is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Menu price per person decreased from {oldPrice} to {newPrice}"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "oldPrice",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "pricePerPerson"
                      }
                    },
                    {
                      "key": "newPrice",
                      "value": {
                        "kind": "identifier",
                        "name": "newPricePerPerson"
                      }
                    },
                    {
                      "key": "decreaseAmount",
                      "value": {
                        "kind": "binary",
                        "operator": "-",
                        "left": {
                          "kind": "member",
                          "object": {
                            "kind": "identifier",
                            "name": "self"
                          },
                          "property": "pricePerPerson"
                        },
                        "right": {
                          "kind": "identifier",
                          "name": "newPricePerPerson"
                        }
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Maximum guest count increased by 50% or more"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "oldMaxGuests",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "maxGuests"
                      }
                    },
                    {
                      "key": "newMaxGuests",
                      "value": {
                        "kind": "identifier",
                        "name": "newMaxGuests"
                      }
                    },
                    {
                      "key": "increasePercent",
                      "value": {
                        "kind": "binary",
                        "operator": "*",
                        "left": {
                          "kind": "binary",
                          "operator": "/",
                          "left": {
                            "kind": "binary",
                            "operator": "-",
                            "left": {
                              "kind": "identifier",
                              "name": "newMaxGuests"
                            },
                            "right": {
                              "kind": "member",
                              "object": {
                                "kind": "identifier",
                                "name": "self"
                              },
                              "property": "maxGuests"
                            }
                          },
                          "right": {
                            "kind": "member",
                            "object": {
                              "kind": "identifier",
                              "name": "self"
                            },
                            "property": "maxGuests"
                          }
                        },
                        "right": {
                          "kind": "literal",
                          "value": {
                            "kind": "number",
                            "value": 100
                          }
                        }
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "name",
          "expression": {
            "kind": "identifier",
            "name": "newName"
          }
        },
        {
          "kind": "mutate",
          "target": "description",
          "expression": {
            "kind": "identifier",
            "name": "newDescription"
          }
        },
        {
          "kind": "mutate",
          "target": "category",
          "expression": {
            "kind": "identifier",
            "name": "newCategory"
          }
        },
        {
          "kind": "mutate",
          "target": "basePrice",
          "expression": {
            "kind": "identifier",
            "name": "newBasePrice"
          }
        },
        {
          "kind": "mutate",
          "target": "pricePerPerson",
          "expression": {
            "kind": "identifier",
            "name": "newPricePerPerson"
          }
        },
        {
          "kind": "mutate",
          "target": "minGuests",
          "expression": {
            "kind": "identifier",
            "name": "newMinGuests"
          }
        },
        {
          "kind": "mutate",
          "target": "maxGuests",
          "expression": {
            "kind": "identifier",
            "name": "newMaxGuests"
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "identifier",
            "name": "newIsActive"
          }
        }
      ],
      "emits": [
        "MenuUpdated"
      ]
    },
    {
      "name": "activate",
      "entity": "Menu",
      "parameters": [],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isActive"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Menu is already active"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        }
      ],
      "emits": [
        "MenuActivated"
      ]
    },
    {
      "name": "deactivate",
      "entity": "Menu",
      "parameters": [],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isActive"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Menu is already inactive"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        }
      ],
      "emits": [
        "MenuDeactivated"
      ]
    },
    {
      "name": "create",
      "entity": "Menu",
      "parameters": [
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "basePrice",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "pricePerPerson",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "minGuests",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "maxGuests",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">=",
          "left": {
            "kind": "identifier",
            "name": "basePrice"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">=",
          "left": {
            "kind": "identifier",
            "name": "pricePerPerson"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">=",
          "left": {
            "kind": "identifier",
            "name": "minGuests"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">=",
          "left": {
            "kind": "identifier",
            "name": "maxGuests"
          },
          "right": {
            "kind": "identifier",
            "name": "minGuests"
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Menu name is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Base price must be non-negative"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Price per person must be non-negative"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Minimum guests must be non-negative"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Maximum guests must be >= minimum"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "name",
          "expression": {
            "kind": "identifier",
            "name": "name"
          }
        },
        {
          "kind": "mutate",
          "target": "description",
          "expression": {
            "kind": "identifier",
            "name": "description"
          }
        },
        {
          "kind": "mutate",
          "target": "category",
          "expression": {
            "kind": "identifier",
            "name": "category"
          }
        },
        {
          "kind": "mutate",
          "target": "basePrice",
          "expression": {
            "kind": "identifier",
            "name": "basePrice"
          }
        },
        {
          "kind": "mutate",
          "target": "pricePerPerson",
          "expression": {
            "kind": "identifier",
            "name": "pricePerPerson"
          }
        },
        {
          "kind": "mutate",
          "target": "minGuests",
          "expression": {
            "kind": "identifier",
            "name": "minGuests"
          }
        },
        {
          "kind": "mutate",
          "target": "maxGuests",
          "expression": {
            "kind": "identifier",
            "name": "maxGuests"
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        }
      ],
      "emits": [
        "MenuCreated"
      ]
    },
    {
      "name": "updateCourse",
      "entity": "MenuDish",
      "parameters": [
        {
          "name": "newCourse",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newSortOrder",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newIsOptional",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "course",
          "expression": {
            "kind": "identifier",
            "name": "newCourse"
          }
        },
        {
          "kind": "mutate",
          "target": "sortOrder",
          "expression": {
            "kind": "identifier",
            "name": "newSortOrder"
          }
        },
        {
          "kind": "mutate",
          "target": "isOptional",
          "expression": {
            "kind": "identifier",
            "name": "newIsOptional"
          }
        }
      ],
      "emits": [
        "MenuDishUpdated"
      ]
    },
    {
      "name": "create",
      "entity": "MenuDish",
      "parameters": [
        {
          "name": "menuId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "dishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "course",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "sortOrder",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "isOptional",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "menuId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "menuId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "dishId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "dishId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Menu ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Dish ID is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "menuId",
          "expression": {
            "kind": "identifier",
            "name": "menuId"
          }
        },
        {
          "kind": "mutate",
          "target": "dishId",
          "expression": {
            "kind": "identifier",
            "name": "dishId"
          }
        },
        {
          "kind": "mutate",
          "target": "course",
          "expression": {
            "kind": "identifier",
            "name": "course"
          }
        },
        {
          "kind": "mutate",
          "target": "sortOrder",
          "expression": {
            "kind": "identifier",
            "name": "sortOrder"
          }
        },
        {
          "kind": "mutate",
          "target": "isOptional",
          "expression": {
            "kind": "identifier",
            "name": "isOptional"
          }
        }
      ],
      "emits": [
        "MenuDishAdded"
      ]
    },
    {
      "name": "remove",
      "entity": "MenuDish",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "deletedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "MenuDishRemoved"
      ]
    },
    {
      "name": "create",
      "entity": "Notification",
      "parameters": [
        {
          "name": "recipientEmployeeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notificationType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "body",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "actionUrl",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "correlationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "recipientEmployeeId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "recipientEmployeeId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "title"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "title"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "notificationType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "notificationType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Recipient employee ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Notification title is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Notification type is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "recipientEmployeeId",
          "expression": {
            "kind": "identifier",
            "name": "recipientEmployeeId"
          }
        },
        {
          "kind": "mutate",
          "target": "notificationType",
          "expression": {
            "kind": "identifier",
            "name": "notificationType"
          }
        },
        {
          "kind": "mutate",
          "target": "title",
          "expression": {
            "kind": "identifier",
            "name": "title"
          }
        },
        {
          "kind": "mutate",
          "target": "body",
          "expression": {
            "kind": "identifier",
            "name": "body"
          }
        },
        {
          "kind": "mutate",
          "target": "actionUrl",
          "expression": {
            "kind": "identifier",
            "name": "actionUrl"
          }
        },
        {
          "kind": "mutate",
          "target": "correlationId",
          "expression": {
            "kind": "identifier",
            "name": "correlationId"
          }
        },
        {
          "kind": "mutate",
          "target": "isRead",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        },
        {
          "kind": "mutate",
          "target": "readAt",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "NotificationCreated"
      ]
    },
    {
      "name": "markRead",
      "entity": "Notification",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isRead"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnAlreadyRead",
          "code": "warnAlreadyRead",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "isRead"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "boolean",
                "value": true
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Notification is already read"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Notification '{notificationTitle}' is already marked as read"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "notificationTitle",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "title"
                      }
                    },
                    {
                      "key": "readAt",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "readAt"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "isRead",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        },
        {
          "kind": "mutate",
          "target": "readAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "NotificationMarkedRead"
      ]
    },
    {
      "name": "markDismissed",
      "entity": "Notification",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "User ID is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "isRead",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        },
        {
          "kind": "mutate",
          "target": "readAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "NotificationDismissed"
      ]
    },
    {
      "name": "remove",
      "entity": "Notification",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "User ID is required"
            }
          }
        }
      ],
      "emits": [
        "NotificationDeleted"
      ]
    },
    {
      "name": "create",
      "entity": "OverrideAudit",
      "parameters": [
        {
          "name": "entityType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "entityId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "constraintId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "guardExpression",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "overriddenBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "overrideReason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "entityType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "entityType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "entityId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "entityId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "constraintId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "constraintId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "overriddenBy"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "overriddenBy"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "overrideReason"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "overrideReason"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Entity type is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Entity ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Constraint ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Overridden by user is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Override reason is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "entityType",
          "expression": {
            "kind": "identifier",
            "name": "entityType"
          }
        },
        {
          "kind": "mutate",
          "target": "entityId",
          "expression": {
            "kind": "identifier",
            "name": "entityId"
          }
        },
        {
          "kind": "mutate",
          "target": "constraintId",
          "expression": {
            "kind": "identifier",
            "name": "constraintId"
          }
        },
        {
          "kind": "mutate",
          "target": "guardExpression",
          "expression": {
            "kind": "identifier",
            "name": "guardExpression"
          }
        },
        {
          "kind": "mutate",
          "target": "overriddenBy",
          "expression": {
            "kind": "identifier",
            "name": "overriddenBy"
          }
        },
        {
          "kind": "mutate",
          "target": "overrideReason",
          "expression": {
            "kind": "identifier",
            "name": "overrideReason"
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "OverrideAuditCreated"
      ]
    },
    {
      "name": "authorize",
      "entity": "OverrideAudit",
      "parameters": [
        {
          "name": "authorizedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "authorizedBy"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "authorizedBy"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "authorizedBy"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": ""
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Authorized by user is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Override has already been authorized"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "authorizedBy",
          "expression": {
            "kind": "identifier",
            "name": "authorizedBy"
          }
        },
        {
          "kind": "mutate",
          "target": "authorizedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "OverrideAuditAuthorized"
      ]
    },
    {
      "name": "create",
      "entity": "PrepComment",
      "parameters": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "employeeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "commentText",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "taskId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "taskId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "employeeId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "employeeId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "commentText"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "commentText"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Task ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Employee ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Comment text is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "taskId",
          "expression": {
            "kind": "identifier",
            "name": "taskId"
          }
        },
        {
          "kind": "mutate",
          "target": "employeeId",
          "expression": {
            "kind": "identifier",
            "name": "employeeId"
          }
        },
        {
          "kind": "mutate",
          "target": "commentText",
          "expression": {
            "kind": "identifier",
            "name": "commentText"
          }
        },
        {
          "kind": "mutate",
          "target": "isResolved",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepCommentCreated"
      ]
    },
    {
      "name": "resolve",
      "entity": "PrepComment",
      "parameters": [
        {
          "name": "resolvedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "resolvedBy"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "resolvedBy"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "self"
          },
          "property": "isActive"
        }
      ],
      "constraints": [
        {
          "name": "warnAlreadyResolved",
          "code": "warnAlreadyResolved",
          "expression": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isResolved"
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Resolver ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot resolve a deleted comment"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Comment '{commentId}' is already resolved by '{resolvedBy}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "commentId",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "id"
                      }
                    },
                    {
                      "key": "taskId",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "taskId"
                      }
                    },
                    {
                      "key": "resolvedBy",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "resolvedBy"
                      }
                    },
                    {
                      "key": "resolvedAt",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "resolvedAt"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "isResolved",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        },
        {
          "kind": "mutate",
          "target": "resolvedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "resolvedBy",
          "expression": {
            "kind": "identifier",
            "name": "resolvedBy"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepCommentResolved"
      ]
    },
    {
      "name": "unresolve",
      "entity": "PrepComment",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "self"
          },
          "property": "isResolved"
        },
        {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "self"
          },
          "property": "isActive"
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "User ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Comment is not resolved"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot unresolve a deleted comment"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "isResolved",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        },
        {
          "kind": "mutate",
          "target": "resolvedAt",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "resolvedBy",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": ""
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepCommentUnresolved"
      ]
    },
    {
      "name": "softDelete",
      "entity": "PrepComment",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "self"
          },
          "property": "isActive"
        }
      ],
      "constraints": [
        {
          "name": "blockDeleteIfResolved",
          "code": "blockDeleteIfResolved",
          "expression": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isResolved"
          },
          "severity": "block",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "User ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Comment is already deleted"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Cannot delete resolved comment '{commentId}'  unresolve it first"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "commentId",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "id"
                      }
                    },
                    {
                      "key": "taskId",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "taskId"
                      }
                    },
                    {
                      "key": "resolvedBy",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "resolvedBy"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "deletedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepCommentDeleted"
      ]
    },
    {
      "name": "update",
      "entity": "PrepList",
      "parameters": [
        {
          "name": "newName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newDietaryRestrictions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newNotes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "draft"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnNameChange",
          "code": "warnNameChange",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "name"
            },
            "right": {
              "kind": "identifier",
              "name": "newName"
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only update draft prep lists"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Prep list name is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Renaming prep list from '{oldName}' to '{newName}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "oldName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "newName",
                      "value": {
                        "kind": "identifier",
                        "name": "newName"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "name",
          "expression": {
            "kind": "identifier",
            "name": "newName"
          }
        },
        {
          "kind": "mutate",
          "target": "dietaryRestrictions",
          "expression": {
            "kind": "identifier",
            "name": "newDietaryRestrictions"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "newNotes"
          }
        }
      ],
      "emits": [
        "PrepListUpdated"
      ]
    },
    {
      "name": "updateBatchMultiplier",
      "entity": "PrepList",
      "parameters": [
        {
          "name": "newMultiplier",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "draft"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newMultiplier"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "newMultiplier"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnLargeMultiplierIncrease",
          "code": "warnLargeMultiplierIncrease",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "newMultiplier"
            },
            "right": {
              "kind": "binary",
              "operator": "*",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "batchMultiplier"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 2
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only update draft prep lists"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Batch multiplier must be positive"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Batch multiplier doubled or more (from {oldMultiplier}x to {newMultiplier}x)"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "oldMultiplier",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "batchMultiplier"
                      }
                    },
                    {
                      "key": "newMultiplier",
                      "value": {
                        "kind": "identifier",
                        "name": "newMultiplier"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "batchMultiplier",
          "expression": {
            "kind": "identifier",
            "name": "newMultiplier"
          }
        }
      ],
      "emits": [
        "PrepListBatchMultiplierUpdated"
      ]
    },
    {
      "name": "finalize",
      "entity": "PrepList",
      "parameters": [],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "draft"
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "totalItems"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only finalize draft prep lists"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot finalize prep list with no items"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "finalized"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "finalizedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepListFinalized"
      ]
    },
    {
      "name": "activate",
      "entity": "PrepList",
      "parameters": [],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isActive"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Prep list is already active"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        }
      ],
      "emits": [
        "PrepListActivated"
      ]
    },
    {
      "name": "deactivate",
      "entity": "PrepList",
      "parameters": [],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isActive"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Prep list is already inactive"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        }
      ],
      "emits": [
        "PrepListDeactivated"
      ]
    },
    {
      "name": "markCompleted",
      "entity": "PrepList",
      "parameters": [],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "finalized"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only mark finalized prep lists as completed"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "completed"
            }
          }
        }
      ],
      "emits": [
        "PrepListCompleted"
      ]
    },
    {
      "name": "cancel",
      "entity": "PrepList",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "completed"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot cancel completed prep lists"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "cancelled"
            }
          }
        }
      ],
      "emits": [
        "PrepListCancelled"
      ]
    },
    {
      "name": "create",
      "entity": "PrepList",
      "parameters": [
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "batchMultiplier",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "dietaryRestrictions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalItems",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalEstimatedTime",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">",
          "left": {
            "kind": "identifier",
            "name": "batchMultiplier"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Prep list name is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Event ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Batch multiplier must be positive"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "eventId",
          "expression": {
            "kind": "identifier",
            "name": "eventId"
          }
        },
        {
          "kind": "mutate",
          "target": "name",
          "expression": {
            "kind": "identifier",
            "name": "name"
          }
        },
        {
          "kind": "mutate",
          "target": "batchMultiplier",
          "expression": {
            "kind": "identifier",
            "name": "batchMultiplier"
          }
        },
        {
          "kind": "mutate",
          "target": "dietaryRestrictions",
          "expression": {
            "kind": "identifier",
            "name": "dietaryRestrictions"
          }
        },
        {
          "kind": "mutate",
          "target": "totalItems",
          "expression": {
            "kind": "identifier",
            "name": "totalItems"
          }
        },
        {
          "kind": "mutate",
          "target": "totalEstimatedTime",
          "expression": {
            "kind": "identifier",
            "name": "totalEstimatedTime"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "draft"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "generatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        }
      ],
      "emits": [
        "PrepListCreated"
      ]
    },
    {
      "name": "createFromSeed",
      "entity": "PrepList",
      "parameters": [
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "batchMultiplier",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "dietaryRestrictions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "menuGroupsJson",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "totalInstructionLines",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "validInstructionLines",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "tenantId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "tenantId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "unary",
          "operator": "not",
          "operand": {
            "kind": "binary",
            "operator": "contains",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "  "
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">",
          "left": {
            "kind": "identifier",
            "name": "batchMultiplier"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "menuGroupsJson"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "menuGroupsJson"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">",
          "left": {
            "kind": "identifier",
            "name": "totalInstructionLines"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">",
          "left": {
            "kind": "identifier",
            "name": "validInstructionLines"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "identifier",
            "name": "validInstructionLines"
          },
          "right": {
            "kind": "identifier",
            "name": "totalInstructionLines"
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Tenant ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Event ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Prep list name is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Prep list name must be normalized"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Batch multiplier must be positive"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "menuGroups payload is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "At least one instruction line is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "At least one valid instruction line is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Empty instruction lines are not allowed"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "eventId",
          "expression": {
            "kind": "identifier",
            "name": "eventId"
          }
        },
        {
          "kind": "mutate",
          "target": "name",
          "expression": {
            "kind": "identifier",
            "name": "name"
          }
        },
        {
          "kind": "mutate",
          "target": "batchMultiplier",
          "expression": {
            "kind": "identifier",
            "name": "batchMultiplier"
          }
        },
        {
          "kind": "mutate",
          "target": "dietaryRestrictions",
          "expression": {
            "kind": "identifier",
            "name": "dietaryRestrictions"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "totalItems",
          "expression": {
            "kind": "identifier",
            "name": "validInstructionLines"
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "draft"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "generatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "finalizedAt",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        }
      ],
      "emits": [
        "PrepListSeedImported"
      ]
    },
    {
      "name": "reopen",
      "entity": "PrepList",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "or",
          "left": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "finalized"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "completed"
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only reopen finalized or completed prep lists"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "draft"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "finalizedAt",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "reason"
          }
        }
      ],
      "emits": [
        "PrepListReopened"
      ]
    },
    {
      "name": "updateQuantity",
      "entity": "PrepListItem",
      "parameters": [
        {
          "name": "newBaseQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newScaledQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newBaseUnit",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newScaledUnit",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newBaseQuantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "identifier",
              "name": "newBaseQuantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newScaledQuantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "identifier",
              "name": "newScaledQuantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnQuantityIncrease",
          "code": "warnQuantityIncrease",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "newScaledQuantity"
            },
            "right": {
              "kind": "binary",
              "operator": "*",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "scaledQuantity"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 1.5
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Base quantity must be non-negative"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Scaled quantity must be non-negative"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Quantity increased by 50% or more"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "oldScaledQuantity",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "scaledQuantity"
                      }
                    },
                    {
                      "key": "newScaledQuantity",
                      "value": {
                        "kind": "identifier",
                        "name": "newScaledQuantity"
                      }
                    },
                    {
                      "key": "increasePercent",
                      "value": {
                        "kind": "binary",
                        "operator": "*",
                        "left": {
                          "kind": "binary",
                          "operator": "/",
                          "left": {
                            "kind": "binary",
                            "operator": "-",
                            "left": {
                              "kind": "identifier",
                              "name": "newScaledQuantity"
                            },
                            "right": {
                              "kind": "member",
                              "object": {
                                "kind": "identifier",
                                "name": "self"
                              },
                              "property": "scaledQuantity"
                            }
                          },
                          "right": {
                            "kind": "member",
                            "object": {
                              "kind": "identifier",
                              "name": "self"
                            },
                            "property": "scaledQuantity"
                          }
                        },
                        "right": {
                          "kind": "literal",
                          "value": {
                            "kind": "number",
                            "value": 100
                          }
                        }
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "baseQuantity",
          "expression": {
            "kind": "identifier",
            "name": "newBaseQuantity"
          }
        },
        {
          "kind": "mutate",
          "target": "scaledQuantity",
          "expression": {
            "kind": "identifier",
            "name": "newScaledQuantity"
          }
        },
        {
          "kind": "mutate",
          "target": "baseUnit",
          "expression": {
            "kind": "identifier",
            "name": "newBaseUnit"
          }
        },
        {
          "kind": "mutate",
          "target": "scaledUnit",
          "expression": {
            "kind": "identifier",
            "name": "newScaledUnit"
          }
        }
      ],
      "emits": [
        "PrepListItemUpdated"
      ]
    },
    {
      "name": "updateStation",
      "entity": "PrepListItem",
      "parameters": [
        {
          "name": "newStationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newStationName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newStationId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newStationId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newStationName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newStationName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnStationChange",
          "code": "warnStationChange",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "stationId"
            },
            "right": {
              "kind": "identifier",
              "name": "newStationId"
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Station ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Station name is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Reassigning from '{oldStation}' to '{newStation}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "oldStationName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "stationName"
                      }
                    },
                    {
                      "key": "newStationName",
                      "value": {
                        "kind": "identifier",
                        "name": "newStationName"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "stationId",
          "expression": {
            "kind": "identifier",
            "name": "newStationId"
          }
        },
        {
          "kind": "mutate",
          "target": "stationName",
          "expression": {
            "kind": "identifier",
            "name": "newStationName"
          }
        }
      ],
      "emits": [
        "PrepListItemStationChanged"
      ]
    },
    {
      "name": "updatePrepNotes",
      "entity": "PrepListItem",
      "parameters": [
        {
          "name": "newNotes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newDietarySubstitutions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "preparationNotes",
          "expression": {
            "kind": "identifier",
            "name": "newNotes"
          }
        },
        {
          "kind": "mutate",
          "target": "dietarySubstitutions",
          "expression": {
            "kind": "identifier",
            "name": "newDietarySubstitutions"
          }
        }
      ],
      "emits": [
        "PrepListItemNotesUpdated"
      ]
    },
    {
      "name": "markCompleted",
      "entity": "PrepListItem",
      "parameters": [
        {
          "name": "completedByUserId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isCompleted"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "completedByUserId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "completedByUserId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Item is already completed"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "User ID is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "isCompleted",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        },
        {
          "kind": "mutate",
          "target": "completedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "completedBy",
          "expression": {
            "kind": "identifier",
            "name": "completedByUserId"
          }
        }
      ],
      "emits": [
        "PrepListItemCompleted"
      ]
    },
    {
      "name": "markUncompleted",
      "entity": "PrepListItem",
      "parameters": [],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isCompleted"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Item is not completed"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "isCompleted",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        },
        {
          "kind": "mutate",
          "target": "completedAt",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "completedBy",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": ""
            }
          }
        }
      ],
      "emits": [
        "PrepListItemUncompleted"
      ]
    },
    {
      "name": "create",
      "entity": "PrepListItem",
      "parameters": [
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "stationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "stationName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "ingredientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "ingredientName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "baseQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "baseUnit",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "scaledQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "scaledUnit",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "isOptional",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "preparationNotes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "allergens",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "dietarySubstitutions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "dishId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "dishName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "recipeVersionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "sortOrder",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "prepListId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "prepListId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "ingredientId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "ingredientId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "ingredientName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "ingredientName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Prep list ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Ingredient ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Ingredient name is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "prepListId",
          "expression": {
            "kind": "identifier",
            "name": "prepListId"
          }
        },
        {
          "kind": "mutate",
          "target": "stationId",
          "expression": {
            "kind": "identifier",
            "name": "stationId"
          }
        },
        {
          "kind": "mutate",
          "target": "stationName",
          "expression": {
            "kind": "identifier",
            "name": "stationName"
          }
        },
        {
          "kind": "mutate",
          "target": "ingredientId",
          "expression": {
            "kind": "identifier",
            "name": "ingredientId"
          }
        },
        {
          "kind": "mutate",
          "target": "ingredientName",
          "expression": {
            "kind": "identifier",
            "name": "ingredientName"
          }
        },
        {
          "kind": "mutate",
          "target": "category",
          "expression": {
            "kind": "identifier",
            "name": "category"
          }
        },
        {
          "kind": "mutate",
          "target": "baseQuantity",
          "expression": {
            "kind": "identifier",
            "name": "baseQuantity"
          }
        },
        {
          "kind": "mutate",
          "target": "baseUnit",
          "expression": {
            "kind": "identifier",
            "name": "baseUnit"
          }
        },
        {
          "kind": "mutate",
          "target": "scaledQuantity",
          "expression": {
            "kind": "identifier",
            "name": "scaledQuantity"
          }
        },
        {
          "kind": "mutate",
          "target": "scaledUnit",
          "expression": {
            "kind": "identifier",
            "name": "scaledUnit"
          }
        },
        {
          "kind": "mutate",
          "target": "isOptional",
          "expression": {
            "kind": "identifier",
            "name": "isOptional"
          }
        },
        {
          "kind": "mutate",
          "target": "preparationNotes",
          "expression": {
            "kind": "identifier",
            "name": "preparationNotes"
          }
        },
        {
          "kind": "mutate",
          "target": "allergens",
          "expression": {
            "kind": "identifier",
            "name": "allergens"
          }
        },
        {
          "kind": "mutate",
          "target": "dietarySubstitutions",
          "expression": {
            "kind": "identifier",
            "name": "dietarySubstitutions"
          }
        },
        {
          "kind": "mutate",
          "target": "dishId",
          "expression": {
            "kind": "identifier",
            "name": "dishId"
          }
        },
        {
          "kind": "mutate",
          "target": "dishName",
          "expression": {
            "kind": "identifier",
            "name": "dishName"
          }
        },
        {
          "kind": "mutate",
          "target": "recipeVersionId",
          "expression": {
            "kind": "identifier",
            "name": "recipeVersionId"
          }
        },
        {
          "kind": "mutate",
          "target": "sortOrder",
          "expression": {
            "kind": "identifier",
            "name": "sortOrder"
          }
        },
        {
          "kind": "mutate",
          "target": "isCompleted",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        },
        {
          "kind": "mutate",
          "target": "completedAt",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "completedBy",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": ""
            }
          }
        }
      ],
      "emits": [
        "PrepListItemCreated"
      ]
    },
    {
      "name": "create",
      "entity": "PrepMethod",
      "parameters": [
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "estimatedDurationMinutes",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "requiresCertification",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">=",
          "left": {
            "kind": "identifier",
            "name": "estimatedDurationMinutes"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Prep method name is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Estimated duration cannot be negative"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "name",
          "expression": {
            "kind": "identifier",
            "name": "name"
          }
        },
        {
          "kind": "mutate",
          "target": "category",
          "expression": {
            "kind": "identifier",
            "name": "category"
          }
        },
        {
          "kind": "mutate",
          "target": "description",
          "expression": {
            "kind": "identifier",
            "name": "description"
          }
        },
        {
          "kind": "mutate",
          "target": "estimatedDurationMinutes",
          "expression": {
            "kind": "identifier",
            "name": "estimatedDurationMinutes"
          }
        },
        {
          "kind": "mutate",
          "target": "requiresCertification",
          "expression": {
            "kind": "identifier",
            "name": "requiresCertification"
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepMethodCreated"
      ]
    },
    {
      "name": "update",
      "entity": "PrepMethod",
      "parameters": [
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "estimatedDurationMinutes",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "requiresCertification",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "self"
          },
          "property": "isActive"
        },
        {
          "kind": "binary",
          "operator": ">=",
          "left": {
            "kind": "identifier",
            "name": "estimatedDurationMinutes"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Prep method name is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update a deactivated prep method"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Estimated duration cannot be negative"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "name",
          "expression": {
            "kind": "identifier",
            "name": "name"
          }
        },
        {
          "kind": "mutate",
          "target": "category",
          "expression": {
            "kind": "identifier",
            "name": "category"
          }
        },
        {
          "kind": "mutate",
          "target": "description",
          "expression": {
            "kind": "identifier",
            "name": "description"
          }
        },
        {
          "kind": "mutate",
          "target": "estimatedDurationMinutes",
          "expression": {
            "kind": "identifier",
            "name": "estimatedDurationMinutes"
          }
        },
        {
          "kind": "mutate",
          "target": "requiresCertification",
          "expression": {
            "kind": "identifier",
            "name": "requiresCertification"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepMethodUpdated"
      ]
    },
    {
      "name": "deactivate",
      "entity": "PrepMethod",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "self"
          },
          "property": "isActive"
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Prep method is already deactivated"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepMethodDeactivated"
      ]
    },
    {
      "name": "create",
      "entity": "PrepTaskPlanWorkflow",
      "parameters": [
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "idempotencyKey",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "generationOptions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "or",
          "left": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "identifier",
            "name": "eventId"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": ""
            }
          }
        },
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "identifier",
            "name": "idempotencyKey"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": ""
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Workflow already initialized"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Event ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Idempotency key is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "created"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "eventId",
          "expression": {
            "kind": "identifier",
            "name": "eventId"
          }
        },
        {
          "kind": "mutate",
          "target": "idempotencyKey",
          "expression": {
            "kind": "identifier",
            "name": "idempotencyKey"
          }
        },
        {
          "kind": "mutate",
          "target": "generationOptions",
          "expression": {
            "kind": "identifier",
            "name": "generationOptions"
          }
        },
        {
          "kind": "mutate",
          "target": "currentStep",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepTaskPlanWorkflowCreated"
      ]
    },
    {
      "name": "startGenerating",
      "entity": "PrepTaskPlanWorkflow",
      "parameters": [],
      "guards": [
        {
          "kind": "binary",
          "operator": "or",
          "left": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "created"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "failed"
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "generating"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "currentStep",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 1
            }
          }
        },
        {
          "kind": "mutate",
          "target": "startedAt",
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "call",
                "callee": {
                  "kind": "identifier",
                  "name": "now"
                },
                "args": []
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "consequent": {
              "kind": "call",
              "callee": {
                "kind": "identifier",
                "name": "now"
              },
              "args": []
            },
            "alternate": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "startedAt"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepTaskPlanWorkflowGeneratingStarted"
      ]
    },
    {
      "name": "completeGeneration",
      "entity": "PrepTaskPlanWorkflow",
      "parameters": [
        {
          "name": "generatedTasks",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "generatedCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "constraintOutcomes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "generating"
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnNoTasksGenerated",
          "code": "warnNoTasksGenerated",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "identifier",
              "name": "generatedCount"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "mutate",
          "target": "generatedTasks",
          "expression": {
            "kind": "identifier",
            "name": "generatedTasks"
          }
        },
        {
          "kind": "mutate",
          "target": "generatedCount",
          "expression": {
            "kind": "identifier",
            "name": "generatedCount"
          }
        },
        {
          "kind": "mutate",
          "target": "constraintOutcomes",
          "expression": {
            "kind": "identifier",
            "name": "constraintOutcomes"
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "awaiting_review"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "currentStep",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 2
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "No tasks were generated for this event"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "eventId",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "eventId"
                      }
                    }
                  ]
                }
              }
            ]
          }
        }
      ],
      "emits": [
        "PrepTaskPlanWorkflowGenerationCompleted"
      ]
    },
    {
      "name": "startReviewing",
      "entity": "PrepTaskPlanWorkflow",
      "parameters": [
        {
          "name": "reviewerId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "awaiting_review"
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "generatedCount"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "No tasks to review"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "reviewing"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "reviewedBy",
          "expression": {
            "kind": "identifier",
            "name": "reviewerId"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepTaskPlanWorkflowReviewingStarted"
      ]
    },
    {
      "name": "completeReview",
      "entity": "PrepTaskPlanWorkflow",
      "parameters": [
        {
          "name": "reviewedTasks",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "approvedIds",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "rejectedIds",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "approvedCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reviewWarnings",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "reviewing"
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnAllRejected",
          "code": "warnAllRejected",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "identifier",
                "name": "approvedCount"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "generatedCount"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "mutate",
          "target": "reviewedTasks",
          "expression": {
            "kind": "identifier",
            "name": "reviewedTasks"
          }
        },
        {
          "kind": "mutate",
          "target": "approvedTaskIds",
          "expression": {
            "kind": "identifier",
            "name": "approvedIds"
          }
        },
        {
          "kind": "mutate",
          "target": "rejectedTaskIds",
          "expression": {
            "kind": "identifier",
            "name": "rejectedIds"
          }
        },
        {
          "kind": "mutate",
          "target": "approvedCount",
          "expression": {
            "kind": "identifier",
            "name": "approvedCount"
          }
        },
        {
          "kind": "mutate",
          "target": "warnings",
          "expression": {
            "kind": "identifier",
            "name": "reviewWarnings"
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "awaiting_approval"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "reviewedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "currentStep",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 3
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "All {total} tasks were rejected during review"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "total",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "generatedCount"
                      }
                    }
                  ]
                }
              }
            ]
          }
        }
      ],
      "emits": [
        "PrepTaskPlanWorkflowReviewingCompleted"
      ]
    },
    {
      "name": "startApproving",
      "entity": "PrepTaskPlanWorkflow",
      "parameters": [
        {
          "name": "approverId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "awaiting_approval"
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "approvedCount"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "No tasks approved for instantiation"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "approving"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "approvedBy",
          "expression": {
            "kind": "identifier",
            "name": "approverId"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepTaskPlanWorkflowApprovingStarted"
      ]
    },
    {
      "name": "approvePlan",
      "entity": "PrepTaskPlanWorkflow",
      "parameters": [],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "approving"
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "approvedCount"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "No tasks to approve"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "instantiating"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "approvedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "currentStep",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 4
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepTaskPlanWorkflowApproved"
      ]
    },
    {
      "name": "rejectPlan",
      "entity": "PrepTaskPlanWorkflow",
      "parameters": [
        {
          "name": "reasonList",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "or",
          "left": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "awaiting_approval"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "approving"
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "cancelled"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "errors",
          "expression": {
            "kind": "identifier",
            "name": "reasonList"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepTaskPlanWorkflowRejected"
      ]
    },
    {
      "name": "startInstantiating",
      "entity": "PrepTaskPlanWorkflow",
      "parameters": [],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "instantiating"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepTaskPlanWorkflowInstantiatingStarted"
      ]
    },
    {
      "name": "completeInstantiation",
      "entity": "PrepTaskPlanWorkflow",
      "parameters": [
        {
          "name": "instantiatedIds",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "instantiatedCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "instantiationErrors",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "instantiating"
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnPartialInstantiation",
          "code": "warnPartialInstantiation",
          "expression": {
            "kind": "binary",
            "operator": "<",
            "left": {
              "kind": "identifier",
              "name": "instantiatedCount"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "approvedCount"
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "mutate",
          "target": "instantiatedTaskIds",
          "expression": {
            "kind": "identifier",
            "name": "instantiatedIds"
          }
        },
        {
          "kind": "mutate",
          "target": "instantiatedCount",
          "expression": {
            "kind": "identifier",
            "name": "instantiatedCount"
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "scheduling"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "currentStep",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 5
            }
          }
        },
        {
          "kind": "mutate",
          "target": "errors",
          "expression": {
            "kind": "identifier",
            "name": "instantiationErrors"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Only {instantiated} of {approved} tasks were successfully instantiated"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "instantiated",
                      "value": {
                        "kind": "identifier",
                        "name": "instantiatedCount"
                      }
                    },
                    {
                      "key": "approved",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "approvedCount"
                      }
                    }
                  ]
                }
              }
            ]
          }
        }
      ],
      "emits": [
        "PrepTaskPlanWorkflowInstantiatingCompleted"
      ]
    },
    {
      "name": "startScheduling",
      "entity": "PrepTaskPlanWorkflow",
      "parameters": [],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "scheduling"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepTaskPlanWorkflowSchedulingStarted"
      ]
    },
    {
      "name": "completeScheduling",
      "entity": "PrepTaskPlanWorkflow",
      "parameters": [
        {
          "name": "scheduledWindows",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "scheduling"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "scheduledWindows",
          "expression": {
            "kind": "identifier",
            "name": "scheduledWindows"
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "completed"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "completedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepTaskPlanWorkflowCompleted"
      ]
    },
    {
      "name": "fail",
      "entity": "PrepTaskPlanWorkflow",
      "parameters": [
        {
          "name": "errorList",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "step",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "in",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "array",
            "elements": [
              {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "generating"
                }
              },
              {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "reviewing"
                }
              },
              {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "approving"
                }
              },
              {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "instantiating"
                }
              },
              {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "scheduling"
                }
              }
            ]
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "failed"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "errors",
          "expression": {
            "kind": "identifier",
            "name": "errorList"
          }
        },
        {
          "kind": "mutate",
          "target": "currentStep",
          "expression": {
            "kind": "identifier",
            "name": "step"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepTaskPlanWorkflowFailed"
      ]
    },
    {
      "name": "cancel",
      "entity": "PrepTaskPlanWorkflow",
      "parameters": [
        {
          "name": "reasonList",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "in",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "array",
            "elements": [
              {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "created"
                }
              },
              {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "awaiting_review"
                }
              },
              {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "awaiting_approval"
                }
              },
              {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "failed"
                }
              }
            ]
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "cancelled"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "errors",
          "expression": {
            "kind": "identifier",
            "name": "reasonList"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepTaskPlanWorkflowCancelled"
      ]
    },
    {
      "name": "retry",
      "entity": "PrepTaskPlanWorkflow",
      "parameters": [],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "failed"
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "currentStep"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "currentStep",
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "currentStep"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 1
                }
              }
            },
            "consequent": {
              "kind": "binary",
              "operator": "-",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "currentStep"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 1
                }
              }
            },
            "alternate": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 1
              }
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "currentStep"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 1
                }
              }
            },
            "consequent": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "generating"
              }
            },
            "alternate": {
              "kind": "conditional",
              "condition": {
                "kind": "binary",
                "operator": "==",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "currentStep"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "number",
                    "value": 2
                  }
                }
              },
              "consequent": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "awaiting_review"
                }
              },
              "alternate": {
                "kind": "conditional",
                "condition": {
                  "kind": "binary",
                  "operator": "==",
                  "left": {
                    "kind": "member",
                    "object": {
                      "kind": "identifier",
                      "name": "self"
                    },
                    "property": "currentStep"
                  },
                  "right": {
                    "kind": "literal",
                    "value": {
                      "kind": "number",
                      "value": 3
                    }
                  }
                },
                "consequent": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "awaiting_approval"
                  }
                },
                "alternate": {
                  "kind": "conditional",
                  "condition": {
                    "kind": "binary",
                    "operator": "==",
                    "left": {
                      "kind": "member",
                      "object": {
                        "kind": "identifier",
                        "name": "self"
                      },
                      "property": "currentStep"
                    },
                    "right": {
                      "kind": "literal",
                      "value": {
                        "kind": "number",
                        "value": 4
                      }
                    }
                  },
                  "consequent": {
                    "kind": "literal",
                    "value": {
                      "kind": "string",
                      "value": "instantiating"
                    }
                  },
                  "alternate": {
                    "kind": "literal",
                    "value": {
                      "kind": "string",
                      "value": "scheduling"
                    }
                  }
                }
              }
            }
          }
        },
        {
          "kind": "mutate",
          "target": "errors",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "[]"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepTaskPlanWorkflowRetried"
      ]
    },
    {
      "name": "quickApprove",
      "entity": "PrepTaskPlanWorkflow",
      "parameters": [
        {
          "name": "approverId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "awaiting_review"
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "generatedCount"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnQuickApprove",
          "code": "warnQuickApprove",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "No tasks to approve"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "approvedCount",
          "expression": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "generatedCount"
          }
        },
        {
          "kind": "mutate",
          "target": "reviewedBy",
          "expression": {
            "kind": "identifier",
            "name": "approverId"
          }
        },
        {
          "kind": "mutate",
          "target": "reviewedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "approvedBy",
          "expression": {
            "kind": "identifier",
            "name": "approverId"
          }
        },
        {
          "kind": "mutate",
          "target": "approvedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "instantiating"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "currentStep",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 4
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Quick approve used - {count} tasks approved without individual review"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "count",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "generatedCount"
                      }
                    }
                  ]
                }
              }
            ]
          }
        }
      ],
      "emits": [
        "PrepTaskPlanWorkflowQuickApproved"
      ]
    },
    {
      "name": "claim",
      "entity": "PrepTask",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "stationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "or",
          "left": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "open"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "pending"
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "claimedBy"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": ""
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnOverdueClaim",
          "code": "warnOverdueClaim",
          "expression": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isOverdue"
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "User ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Task is not claimable"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Task is already claimed"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Claiming overdue task '{taskName}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "taskName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "dueDate",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "dueByDate"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "in_progress"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "claimedBy",
          "expression": {
            "kind": "identifier",
            "name": "userId"
          }
        },
        {
          "kind": "mutate",
          "target": "claimedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "stationId",
          "expression": {
            "kind": "identifier",
            "name": "stationId"
          }
        }
      ],
      "emits": [
        "PrepTaskClaimed"
      ]
    },
    {
      "name": "unclaim",
      "entity": "PrepTask",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "in_progress"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "claimedBy"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": ""
            }
          }
        },
        {
          "kind": "binary",
          "operator": "or",
          "left": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "claimedBy"
            },
            "right": {
              "kind": "identifier",
              "name": "userId"
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "User ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only unclaim in-progress tasks"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Task is not currently claimed"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Only claimer or manager can unclaim"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "open"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "claimedBy",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": ""
            }
          }
        },
        {
          "kind": "mutate",
          "target": "claimedAt",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "stationId",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": ""
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepTaskUnclaimed"
      ]
    },
    {
      "name": "start",
      "entity": "PrepTask",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "or",
          "left": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "open"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "pending"
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "or",
          "left": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "claimedBy"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "claimedBy"
            },
            "right": {
              "kind": "identifier",
              "name": "userId"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "in_progress"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "claimedBy",
          "expression": {
            "kind": "identifier",
            "name": "userId"
          }
        },
        {
          "kind": "mutate",
          "target": "claimedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepTaskStarted"
      ]
    },
    {
      "name": "complete",
      "entity": "PrepTask",
      "parameters": [
        {
          "name": "quantityCompleted",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "completedAt",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "quantityCompleted"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "identifier",
              "name": "quantityCompleted"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "in_progress"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "or",
          "left": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "claimedBy"
            },
            "right": {
              "kind": "identifier",
              "name": "userId"
            }
          },
          "right": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "or",
          "left": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityTotal"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "<=",
            "left": {
              "kind": "identifier",
              "name": "quantityCompleted"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityTotal"
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnIncomplete",
          "code": "warnIncomplete",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "<",
              "left": {
                "kind": "identifier",
                "name": "quantityCompleted"
              },
              "right": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityTotal"
              }
            },
            "right": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantityTotal"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Completed quantity must be non-negative"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only complete in-progress tasks"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Only claimer can complete task"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Completed quantity cannot exceed total quantity"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Completing with {remaining} {unit} remaining"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "quantityTotal",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "quantityTotal"
                      }
                    },
                    {
                      "key": "quantityCompleted",
                      "value": {
                        "kind": "identifier",
                        "name": "quantityCompleted"
                      }
                    },
                    {
                      "key": "remaining",
                      "value": {
                        "kind": "binary",
                        "operator": "-",
                        "left": {
                          "kind": "member",
                          "object": {
                            "kind": "identifier",
                            "name": "self"
                          },
                          "property": "quantityTotal"
                        },
                        "right": {
                          "kind": "identifier",
                          "name": "quantityCompleted"
                        }
                      }
                    },
                    {
                      "key": "unit",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "quantityUnitId"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "done"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "quantityCompleted",
          "expression": {
            "kind": "identifier",
            "name": "quantityCompleted"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": "and",
              "left": {
                "kind": "binary",
                "operator": "!=",
                "left": {
                  "kind": "identifier",
                  "name": "completedAt"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "null"
                  }
                }
              },
              "right": {
                "kind": "binary",
                "operator": ">",
                "left": {
                  "kind": "identifier",
                  "name": "completedAt"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "number",
                    "value": 0
                  }
                }
              }
            },
            "consequent": {
              "kind": "identifier",
              "name": "completedAt"
            },
            "alternate": {
              "kind": "call",
              "callee": {
                "kind": "identifier",
                "name": "now"
              },
              "args": []
            }
          }
        }
      ],
      "emits": [
        "PrepTaskCompleted"
      ]
    },
    {
      "name": "release",
      "entity": "PrepTask",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "userId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "in_progress"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "open"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "claimedBy",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": ""
            }
          }
        },
        {
          "kind": "mutate",
          "target": "claimedAt",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "stationId",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": ""
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepTaskReleased"
      ]
    },
    {
      "name": "reassign",
      "entity": "PrepTask",
      "parameters": [
        {
          "name": "newUserId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "requestedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newUserId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newUserId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "requestedBy"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "requestedBy"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "in",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "array",
            "elements": [
              {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "open"
                }
              },
              {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "in_progress"
                }
              }
            ]
          }
        }
      ],
      "constraints": [
        {
          "name": "warnReassignInProgress",
          "code": "warnReassignInProgress",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "status"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "in_progress"
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "!=",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "claimedBy"
              },
              "right": {
                "kind": "identifier",
                "name": "newUserId"
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Reassigning in-progress task from '{currentAssignee}' to '{newAssignee}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "currentAssignee",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "claimedBy"
                      }
                    },
                    {
                      "key": "newAssignee",
                      "value": {
                        "kind": "identifier",
                        "name": "newUserId"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "claimedBy",
          "expression": {
            "kind": "identifier",
            "name": "newUserId"
          }
        },
        {
          "kind": "mutate",
          "target": "claimedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepTaskReassigned"
      ]
    },
    {
      "name": "updateQuantity",
      "entity": "PrepTask",
      "parameters": [
        {
          "name": "quantityTotal",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantityCompleted",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "quantityTotal"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "identifier",
              "name": "quantityTotal"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "quantityCompleted"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "identifier",
              "name": "quantityCompleted"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "<=",
          "left": {
            "kind": "identifier",
            "name": "quantityCompleted"
          },
          "right": {
            "kind": "identifier",
            "name": "quantityTotal"
          }
        }
      ],
      "constraints": [
        {
          "name": "warnQuantityDecrease",
          "code": "warnQuantityDecrease",
          "expression": {
            "kind": "binary",
            "operator": "<",
            "left": {
              "kind": "identifier",
              "name": "quantityTotal"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityTotal"
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Decreasing total quantity from {oldTotal} to {newTotal}"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "oldTotal",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "quantityTotal"
                      }
                    },
                    {
                      "key": "newTotal",
                      "value": {
                        "kind": "identifier",
                        "name": "quantityTotal"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "quantityTotal",
          "expression": {
            "kind": "identifier",
            "name": "quantityTotal"
          }
        },
        {
          "kind": "mutate",
          "target": "quantityCompleted",
          "expression": {
            "kind": "identifier",
            "name": "quantityCompleted"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepTaskQuantityUpdated"
      ]
    },
    {
      "name": "cancel",
      "entity": "PrepTask",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "canceledBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "done"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "canceled"
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnCancelInProgress",
          "code": "warnCancelInProgress",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "in_progress"
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Canceling in-progress task claimed by '{claimedBy}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "claimedBy",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "claimedBy"
                      }
                    },
                    {
                      "key": "reason",
                      "value": {
                        "kind": "identifier",
                        "name": "reason"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "canceled"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepTaskCanceled"
      ]
    },
    {
      "name": "create",
      "entity": "PrepTask",
      "parameters": [
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "prepListId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "taskType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "priority",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantityTotal",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantityUnitId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "servingsTotal",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "startByDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "dueByDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "ingredients",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "eventId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "identifier",
              "name": "priority"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 1
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "<=",
            "left": {
              "kind": "identifier",
              "name": "priority"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 5
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Task name is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Event ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Priority must be between 1 and 5"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "name",
          "expression": {
            "kind": "identifier",
            "name": "name"
          }
        },
        {
          "kind": "mutate",
          "target": "eventId",
          "expression": {
            "kind": "identifier",
            "name": "eventId"
          }
        },
        {
          "kind": "mutate",
          "target": "prepListId",
          "expression": {
            "kind": "identifier",
            "name": "prepListId"
          }
        },
        {
          "kind": "mutate",
          "target": "taskType",
          "expression": {
            "kind": "identifier",
            "name": "taskType"
          }
        },
        {
          "kind": "mutate",
          "target": "priority",
          "expression": {
            "kind": "identifier",
            "name": "priority"
          }
        },
        {
          "kind": "mutate",
          "target": "quantityTotal",
          "expression": {
            "kind": "identifier",
            "name": "quantityTotal"
          }
        },
        {
          "kind": "mutate",
          "target": "quantityUnitId",
          "expression": {
            "kind": "identifier",
            "name": "quantityUnitId"
          }
        },
        {
          "kind": "mutate",
          "target": "servingsTotal",
          "expression": {
            "kind": "identifier",
            "name": "servingsTotal"
          }
        },
        {
          "kind": "mutate",
          "target": "startByDate",
          "expression": {
            "kind": "identifier",
            "name": "startByDate"
          }
        },
        {
          "kind": "mutate",
          "target": "dueByDate",
          "expression": {
            "kind": "identifier",
            "name": "dueByDate"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "ingredients",
          "expression": {
            "kind": "identifier",
            "name": "ingredients"
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepTaskCreated"
      ]
    },
    {
      "name": "updateStatus",
      "entity": "PrepTask",
      "parameters": [
        {
          "name": "status",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "in",
          "left": {
            "kind": "identifier",
            "name": "status"
          },
          "right": {
            "kind": "array",
            "elements": [
              {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "open"
                }
              },
              {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "pending"
                }
              },
              {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "in_progress"
                }
              },
              {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "done"
                }
              },
              {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "canceled"
                }
              }
            ]
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Invalid status"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "identifier",
            "name": "status"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepTaskStatusUpdated"
      ]
    },
    {
      "name": "updatePriority",
      "entity": "PrepTask",
      "parameters": [
        {
          "name": "priority",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "identifier",
              "name": "priority"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 1
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "<=",
            "left": {
              "kind": "identifier",
              "name": "priority"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 5
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Priority must be between 1 and 5"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "priority",
          "expression": {
            "kind": "identifier",
            "name": "priority"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepTaskPriorityUpdated"
      ]
    },
    {
      "name": "updateAssignment",
      "entity": "PrepTask",
      "parameters": [
        {
          "name": "claimedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "claimedBy",
          "expression": {
            "kind": "identifier",
            "name": "claimedBy"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepTaskAssignmentUpdated"
      ]
    },
    {
      "name": "updateDueDate",
      "entity": "PrepTask",
      "parameters": [
        {
          "name": "dueByDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "dueByDate",
          "expression": {
            "kind": "identifier",
            "name": "dueByDate"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PrepTaskDueDateUpdated"
      ]
    },
    {
      "name": "create",
      "entity": "Proposal",
      "parameters": [
        {
          "name": "proposalNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "clientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "leadId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "guestCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "venueName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "venueAddress",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "taxRate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "validUntil",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "termsAndConditions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "title"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "title"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "proposalNumber"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "proposalNumber"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnNoClient",
          "code": "warnNoClient",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "or",
              "left": {
                "kind": "binary",
                "operator": "==",
                "left": {
                  "kind": "identifier",
                  "name": "clientId"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "null"
                  }
                }
              },
              "right": {
                "kind": "binary",
                "operator": "==",
                "left": {
                  "kind": "identifier",
                  "name": "clientId"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": ""
                  }
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "or",
              "left": {
                "kind": "binary",
                "operator": "==",
                "left": {
                  "kind": "identifier",
                  "name": "leadId"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "null"
                  }
                }
              },
              "right": {
                "kind": "binary",
                "operator": "==",
                "left": {
                  "kind": "identifier",
                  "name": "leadId"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": ""
                  }
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Proposal title is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Proposal number is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Creating proposal '{proposalNumber}' with no client or lead attached"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "proposalNumber",
                      "value": {
                        "kind": "identifier",
                        "name": "proposalNumber"
                      }
                    },
                    {
                      "key": "title",
                      "value": {
                        "kind": "identifier",
                        "name": "title"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "proposalNumber",
          "expression": {
            "kind": "identifier",
            "name": "proposalNumber"
          }
        },
        {
          "kind": "mutate",
          "target": "clientId",
          "expression": {
            "kind": "identifier",
            "name": "clientId"
          }
        },
        {
          "kind": "mutate",
          "target": "leadId",
          "expression": {
            "kind": "identifier",
            "name": "leadId"
          }
        },
        {
          "kind": "mutate",
          "target": "eventId",
          "expression": {
            "kind": "identifier",
            "name": "eventId"
          }
        },
        {
          "kind": "mutate",
          "target": "title",
          "expression": {
            "kind": "identifier",
            "name": "title"
          }
        },
        {
          "kind": "mutate",
          "target": "eventDate",
          "expression": {
            "kind": "identifier",
            "name": "eventDate"
          }
        },
        {
          "kind": "mutate",
          "target": "eventType",
          "expression": {
            "kind": "identifier",
            "name": "eventType"
          }
        },
        {
          "kind": "mutate",
          "target": "guestCount",
          "expression": {
            "kind": "identifier",
            "name": "guestCount"
          }
        },
        {
          "kind": "mutate",
          "target": "venueName",
          "expression": {
            "kind": "identifier",
            "name": "venueName"
          }
        },
        {
          "kind": "mutate",
          "target": "venueAddress",
          "expression": {
            "kind": "identifier",
            "name": "venueAddress"
          }
        },
        {
          "kind": "mutate",
          "target": "taxRate",
          "expression": {
            "kind": "identifier",
            "name": "taxRate"
          }
        },
        {
          "kind": "mutate",
          "target": "validUntil",
          "expression": {
            "kind": "identifier",
            "name": "validUntil"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "termsAndConditions",
          "expression": {
            "kind": "identifier",
            "name": "termsAndConditions"
          }
        },
        {
          "kind": "mutate",
          "target": "subtotal",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "taxAmount",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "discountAmount",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "total",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "draft"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "lineItemCount",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ProposalCreated"
      ]
    },
    {
      "name": "update",
      "entity": "Proposal",
      "parameters": [
        {
          "name": "title",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "guestCount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "venueName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "venueAddress",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "subtotal",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "taxRate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "taxAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "discountAmount",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "total",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "validUntil",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "termsAndConditions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "self"
          },
          "property": "isDraft"
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "title"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "title"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update a deleted proposal"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only update proposals in draft status"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Proposal title is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "title",
          "expression": {
            "kind": "identifier",
            "name": "title"
          }
        },
        {
          "kind": "mutate",
          "target": "eventDate",
          "expression": {
            "kind": "identifier",
            "name": "eventDate"
          }
        },
        {
          "kind": "mutate",
          "target": "eventType",
          "expression": {
            "kind": "identifier",
            "name": "eventType"
          }
        },
        {
          "kind": "mutate",
          "target": "guestCount",
          "expression": {
            "kind": "identifier",
            "name": "guestCount"
          }
        },
        {
          "kind": "mutate",
          "target": "venueName",
          "expression": {
            "kind": "identifier",
            "name": "venueName"
          }
        },
        {
          "kind": "mutate",
          "target": "venueAddress",
          "expression": {
            "kind": "identifier",
            "name": "venueAddress"
          }
        },
        {
          "kind": "mutate",
          "target": "subtotal",
          "expression": {
            "kind": "identifier",
            "name": "subtotal"
          }
        },
        {
          "kind": "mutate",
          "target": "taxRate",
          "expression": {
            "kind": "identifier",
            "name": "taxRate"
          }
        },
        {
          "kind": "mutate",
          "target": "taxAmount",
          "expression": {
            "kind": "identifier",
            "name": "taxAmount"
          }
        },
        {
          "kind": "mutate",
          "target": "discountAmount",
          "expression": {
            "kind": "identifier",
            "name": "discountAmount"
          }
        },
        {
          "kind": "mutate",
          "target": "total",
          "expression": {
            "kind": "identifier",
            "name": "total"
          }
        },
        {
          "kind": "mutate",
          "target": "validUntil",
          "expression": {
            "kind": "identifier",
            "name": "validUntil"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "termsAndConditions",
          "expression": {
            "kind": "identifier",
            "name": "termsAndConditions"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ProposalUpdated"
      ]
    },
    {
      "name": "send",
      "entity": "Proposal",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "self"
          },
          "property": "isDraft"
        }
      ],
      "constraints": [
        {
          "name": "blockNoLineItems",
          "code": "blockNoLineItems",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "hasLineItems"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "boolean",
                "value": false
              }
            }
          },
          "severity": "block",
          "overrideable": false
        },
        {
          "name": "warnNoValidUntil",
          "code": "warnNoValidUntil",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "validUntil"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        },
        {
          "name": "warnZeroTotal",
          "code": "warnZeroTotal",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "total"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot send a deleted proposal"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only send proposals in draft status"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Cannot send proposal '{proposalNumber}' with no line items"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "proposalNumber",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "proposalNumber"
                      }
                    },
                    {
                      "key": "title",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "title"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Sending proposal '{proposalNumber}' with no expiration date"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "proposalNumber",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "proposalNumber"
                      }
                    },
                    {
                      "key": "title",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "title"
                      }
                    },
                    {
                      "key": "total",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "total"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Sending proposal '{proposalNumber}' with zero total amount"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "proposalNumber",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "proposalNumber"
                      }
                    },
                    {
                      "key": "title",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "title"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "sent"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "sentAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ProposalSent"
      ]
    },
    {
      "name": "markViewed",
      "entity": "Proposal",
      "parameters": [
        {
          "name": "viewedByInfo",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "sent"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only mark sent proposals as viewed"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "viewed"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "viewedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ProposalViewed"
      ]
    },
    {
      "name": "accept",
      "entity": "Proposal",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": "in",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "array",
            "elements": [
              {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "sent"
                }
              },
              {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "viewed"
                }
              }
            ]
          }
        }
      ],
      "constraints": [
        {
          "name": "blockExpired",
          "code": "blockExpired",
          "expression": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isExpired"
          },
          "severity": "block",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot accept a deleted proposal"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only accept sent or viewed proposals"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Cannot accept expired proposal '{proposalNumber}' (expired on {validUntil})"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "proposalNumber",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "proposalNumber"
                      }
                    },
                    {
                      "key": "title",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "title"
                      }
                    },
                    {
                      "key": "validUntil",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "validUntil"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "accepted"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "acceptedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ProposalAccepted"
      ]
    },
    {
      "name": "reject",
      "entity": "Proposal",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": "in",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "array",
            "elements": [
              {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "sent"
                }
              },
              {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "viewed"
                }
              }
            ]
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot reject a deleted proposal"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only reject sent or viewed proposals"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "rejected"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "rejectedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ProposalRejected"
      ]
    },
    {
      "name": "withdraw",
      "entity": "Proposal",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "blockAlreadyAccepted",
          "code": "blockAlreadyAccepted",
          "expression": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isAccepted"
          },
          "severity": "block",
          "overrideable": false
        },
        {
          "name": "blockAlreadyWithdrawn",
          "code": "blockAlreadyWithdrawn",
          "expression": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isWithdrawn"
          },
          "severity": "block",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot withdraw a deleted proposal"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Cannot withdraw accepted proposal '{proposalNumber}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "proposalNumber",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "proposalNumber"
                      }
                    },
                    {
                      "key": "title",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "title"
                      }
                    },
                    {
                      "key": "acceptedAt",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "acceptedAt"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Proposal '{proposalNumber}' is already withdrawn"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "proposalNumber",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "proposalNumber"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "withdrawn"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ProposalWithdrawn"
      ]
    },
    {
      "name": "create",
      "entity": "ProposalLineItem",
      "parameters": [
        {
          "name": "proposalId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "unitOfMeasure",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "unitPrice",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "sortOrder",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "proposalId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "proposalId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "description"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "description"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">",
          "left": {
            "kind": "identifier",
            "name": "quantity"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">=",
          "left": {
            "kind": "identifier",
            "name": "unitPrice"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Proposal ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Description is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Quantity must be positive"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Unit price must be non-negative"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "proposalId",
          "expression": {
            "kind": "identifier",
            "name": "proposalId"
          }
        },
        {
          "kind": "mutate",
          "target": "itemType",
          "expression": {
            "kind": "identifier",
            "name": "itemType"
          }
        },
        {
          "kind": "mutate",
          "target": "category",
          "expression": {
            "kind": "identifier",
            "name": "category"
          }
        },
        {
          "kind": "mutate",
          "target": "description",
          "expression": {
            "kind": "identifier",
            "name": "description"
          }
        },
        {
          "kind": "mutate",
          "target": "quantity",
          "expression": {
            "kind": "identifier",
            "name": "quantity"
          }
        },
        {
          "kind": "mutate",
          "target": "unitOfMeasure",
          "expression": {
            "kind": "identifier",
            "name": "unitOfMeasure"
          }
        },
        {
          "kind": "mutate",
          "target": "unitPrice",
          "expression": {
            "kind": "identifier",
            "name": "unitPrice"
          }
        },
        {
          "kind": "mutate",
          "target": "total",
          "expression": {
            "kind": "binary",
            "operator": "*",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "identifier",
              "name": "unitPrice"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "totalPrice",
          "expression": {
            "kind": "binary",
            "operator": "*",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "identifier",
              "name": "unitPrice"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "sortOrder",
          "expression": {
            "kind": "identifier",
            "name": "sortOrder"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ProposalLineItemCreated"
      ]
    },
    {
      "name": "update",
      "entity": "ProposalLineItem",
      "parameters": [
        {
          "name": "itemType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "unitOfMeasure",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "unitPrice",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "sortOrder",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "description"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "description"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">",
          "left": {
            "kind": "identifier",
            "name": "quantity"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">=",
          "left": {
            "kind": "identifier",
            "name": "unitPrice"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update a removed line item"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Description is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Quantity must be positive"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Unit price must be non-negative"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "itemType",
          "expression": {
            "kind": "identifier",
            "name": "itemType"
          }
        },
        {
          "kind": "mutate",
          "target": "category",
          "expression": {
            "kind": "identifier",
            "name": "category"
          }
        },
        {
          "kind": "mutate",
          "target": "description",
          "expression": {
            "kind": "identifier",
            "name": "description"
          }
        },
        {
          "kind": "mutate",
          "target": "quantity",
          "expression": {
            "kind": "identifier",
            "name": "quantity"
          }
        },
        {
          "kind": "mutate",
          "target": "unitOfMeasure",
          "expression": {
            "kind": "identifier",
            "name": "unitOfMeasure"
          }
        },
        {
          "kind": "mutate",
          "target": "unitPrice",
          "expression": {
            "kind": "identifier",
            "name": "unitPrice"
          }
        },
        {
          "kind": "mutate",
          "target": "total",
          "expression": {
            "kind": "binary",
            "operator": "*",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "identifier",
              "name": "unitPrice"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "totalPrice",
          "expression": {
            "kind": "binary",
            "operator": "*",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "identifier",
              "name": "unitPrice"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "sortOrder",
          "expression": {
            "kind": "identifier",
            "name": "sortOrder"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ProposalLineItemUpdated"
      ]
    },
    {
      "name": "remove",
      "entity": "ProposalLineItem",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Line item is already removed"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "deletedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ProposalLineItemRemoved"
      ]
    },
    {
      "name": "create",
      "entity": "PurchaseOrder",
      "parameters": [
        {
          "name": "poNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "vendorId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "items",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "poNumber"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "poNumber"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "vendorId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "vendorId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "locationId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "locationId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "PO number is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Vendor is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Location is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "poNumber",
          "expression": {
            "kind": "identifier",
            "name": "poNumber"
          }
        },
        {
          "kind": "mutate",
          "target": "vendorId",
          "expression": {
            "kind": "identifier",
            "name": "vendorId"
          }
        },
        {
          "kind": "mutate",
          "target": "locationId",
          "expression": {
            "kind": "identifier",
            "name": "locationId"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "items",
          "expression": {
            "kind": "identifier",
            "name": "items"
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "draft"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "subtotal",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "taxAmount",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "shippingAmount",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "total",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "itemCount",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "orderDate",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PurchaseOrderCreated"
      ]
    },
    {
      "name": "submit",
      "entity": "PurchaseOrder",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "draft"
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "blockNoItems",
          "code": "blockNoItems",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "itemCount"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only submit draft orders"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Cannot submit purchase order '{poNumber}' with no items"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "poNumber",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "poNumber"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "submitted"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "submittedBy",
          "expression": {
            "kind": "identifier",
            "name": "userId"
          }
        },
        {
          "kind": "mutate",
          "target": "submittedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PurchaseOrderSubmitted"
      ]
    },
    {
      "name": "approve",
      "entity": "PurchaseOrder",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "submitted"
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "blockNoItems",
          "code": "blockNoItems",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "itemCount"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only approve submitted orders"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Cannot approve purchase order '{poNumber}' with no items"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "poNumber",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "poNumber"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "approved"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PurchaseOrderApproved"
      ]
    },
    {
      "name": "reject",
      "entity": "PurchaseOrder",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "submitted"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "reason"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "reason"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only reject submitted orders"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Rejection reason is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "rejected"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "reason"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PurchaseOrderRejected"
      ]
    },
    {
      "name": "cancel",
      "entity": "PurchaseOrder",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "received"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "cancelled"
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "blockCancelReceived",
          "code": "blockCancelReceived",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "received"
              }
            }
          },
          "severity": "block",
          "overrideable": false
        },
        {
          "name": "warnCancelOrdered",
          "code": "warnCancelOrdered",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "ordered"
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot cancel a received order"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Order is already cancelled"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Cannot cancel purchase order '{poNumber}' - already received"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "poNumber",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "poNumber"
                      }
                    },
                    {
                      "key": "status",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "status"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Cancelling ordered purchase order '{poNumber}' - vendor may need notification"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "poNumber",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "poNumber"
                      }
                    },
                    {
                      "key": "vendorId",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "vendorId"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "cancelled"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "reason"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PurchaseOrderCancelled"
      ]
    },
    {
      "name": "markOrdered",
      "entity": "PurchaseOrder",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "approved"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only mark approved orders as ordered"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "ordered"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PurchaseOrderOrdered"
      ]
    },
    {
      "name": "markReceived",
      "entity": "PurchaseOrder",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "or",
          "left": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "ordered"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "partially_received"
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only receive ordered or partially received orders"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "received"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "receivedBy",
          "expression": {
            "kind": "identifier",
            "name": "userId"
          }
        },
        {
          "kind": "mutate",
          "target": "receivedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "actualDeliveryDate",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PurchaseOrderReceived"
      ]
    },
    {
      "name": "create",
      "entity": "PurchaseOrderItem",
      "parameters": [
        {
          "name": "purchaseOrderId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantityOrdered",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "unitId",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "unitCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "purchaseOrderId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "purchaseOrderId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "itemId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "itemId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "quantityOrdered"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "quantityOrdered"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "unitCost"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "identifier",
              "name": "unitCost"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Purchase order ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Item ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Quantity must be positive"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Unit cost cannot be negative"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "purchaseOrderId",
          "expression": {
            "kind": "identifier",
            "name": "purchaseOrderId"
          }
        },
        {
          "kind": "mutate",
          "target": "itemId",
          "expression": {
            "kind": "identifier",
            "name": "itemId"
          }
        },
        {
          "kind": "mutate",
          "target": "quantityOrdered",
          "expression": {
            "kind": "identifier",
            "name": "quantityOrdered"
          }
        },
        {
          "kind": "mutate",
          "target": "unitId",
          "expression": {
            "kind": "identifier",
            "name": "unitId"
          }
        },
        {
          "kind": "mutate",
          "target": "unitCost",
          "expression": {
            "kind": "identifier",
            "name": "unitCost"
          }
        },
        {
          "kind": "mutate",
          "target": "totalCost",
          "expression": {
            "kind": "binary",
            "operator": "*",
            "left": {
              "kind": "identifier",
              "name": "quantityOrdered"
            },
            "right": {
              "kind": "identifier",
              "name": "unitCost"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "qualityStatus",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "pending"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "quantityReceived",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PurchaseOrderItemCreated"
      ]
    },
    {
      "name": "update",
      "entity": "PurchaseOrderItem",
      "parameters": [
        {
          "name": "quantityOrdered",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "unitCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "quantityOrdered"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "quantityOrdered"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "unitCost"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "identifier",
              "name": "unitCost"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Quantity must be positive"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Unit cost cannot be negative"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "quantityOrdered",
          "expression": {
            "kind": "identifier",
            "name": "quantityOrdered"
          }
        },
        {
          "kind": "mutate",
          "target": "unitCost",
          "expression": {
            "kind": "identifier",
            "name": "unitCost"
          }
        },
        {
          "kind": "mutate",
          "target": "totalCost",
          "expression": {
            "kind": "binary",
            "operator": "*",
            "left": {
              "kind": "identifier",
              "name": "quantityOrdered"
            },
            "right": {
              "kind": "identifier",
              "name": "unitCost"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PurchaseOrderItemUpdated"
      ]
    },
    {
      "name": "remove",
      "entity": "PurchaseOrderItem",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "quantityReceived"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot remove item that has been partially received"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "deletedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "PurchaseOrderItemRemoved"
      ]
    },
    {
      "name": "create",
      "entity": "RecipeVersion",
      "parameters": [
        {
          "name": "yieldQty",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "yieldUnit",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "prepTime",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "cookTime",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "restTime",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "difficulty",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "instructionsText",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notesText",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "yieldQty"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "yieldQty"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "yieldUnit"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "yieldUnit"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Yield quantity must be positive"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Yield unit is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "yieldQuantity",
          "expression": {
            "kind": "identifier",
            "name": "yieldQty"
          }
        },
        {
          "kind": "mutate",
          "target": "yieldUnitId",
          "expression": {
            "kind": "identifier",
            "name": "yieldUnit"
          }
        },
        {
          "kind": "mutate",
          "target": "prepTimeMinutes",
          "expression": {
            "kind": "identifier",
            "name": "prepTime"
          }
        },
        {
          "kind": "mutate",
          "target": "cookTimeMinutes",
          "expression": {
            "kind": "identifier",
            "name": "cookTime"
          }
        },
        {
          "kind": "mutate",
          "target": "restTimeMinutes",
          "expression": {
            "kind": "identifier",
            "name": "restTime"
          }
        },
        {
          "kind": "mutate",
          "target": "difficultyLevel",
          "expression": {
            "kind": "identifier",
            "name": "difficulty"
          }
        },
        {
          "kind": "mutate",
          "target": "instructions",
          "expression": {
            "kind": "identifier",
            "name": "instructionsText"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notesText"
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "RecipeVersionCreated"
      ]
    },
    {
      "name": "restore",
      "entity": "RecipeVersion",
      "parameters": [
        {
          "name": "sourceId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newVersionNum",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "sourceId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "sourceId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newVersionNum"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "newVersionNum"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Source version ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Version number must be positive"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "versionNumber",
          "expression": {
            "kind": "identifier",
            "name": "newVersionNum"
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "RecipeVersionRestored"
      ]
    },
    {
      "name": "updateCosts",
      "entity": "RecipeVersion",
      "parameters": [
        {
          "name": "newTotalCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newCostPerYield",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newTotalCost"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "identifier",
              "name": "newTotalCost"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnHighCost",
          "code": "warnHighCost",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "newTotalCost"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 1000
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Total cost cannot be negative"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Recipe total cost is high (${cost})  verify ingredient pricing"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "totalCost",
                      "value": {
                        "kind": "identifier",
                        "name": "newTotalCost"
                      }
                    },
                    {
                      "key": "costPerYield",
                      "value": {
                        "kind": "identifier",
                        "name": "newCostPerYield"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "totalCost",
          "expression": {
            "kind": "identifier",
            "name": "newTotalCost"
          }
        },
        {
          "kind": "mutate",
          "target": "costPerYield",
          "expression": {
            "kind": "identifier",
            "name": "newCostPerYield"
          }
        }
      ],
      "emits": [
        "RecipeVersionCostUpdated"
      ]
    },
    {
      "name": "update",
      "entity": "Recipe",
      "parameters": [
        {
          "name": "newName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newCategory",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newCuisineType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newDescription",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newTags",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnNameChange",
          "code": "warnNameChange",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "name"
            },
            "right": {
              "kind": "identifier",
              "name": "newName"
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Recipe name is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Renaming recipe from '{oldName}' to '{newName}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "oldName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "newName",
                      "value": {
                        "kind": "identifier",
                        "name": "newName"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "name",
          "expression": {
            "kind": "identifier",
            "name": "newName"
          }
        },
        {
          "kind": "mutate",
          "target": "category",
          "expression": {
            "kind": "identifier",
            "name": "newCategory"
          }
        },
        {
          "kind": "mutate",
          "target": "cuisineType",
          "expression": {
            "kind": "identifier",
            "name": "newCuisineType"
          }
        },
        {
          "kind": "mutate",
          "target": "description",
          "expression": {
            "kind": "identifier",
            "name": "newDescription"
          }
        },
        {
          "kind": "mutate",
          "target": "tags",
          "expression": {
            "kind": "identifier",
            "name": "newTags"
          }
        }
      ],
      "emits": [
        "RecipeUpdated"
      ]
    },
    {
      "name": "deactivate",
      "entity": "Recipe",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isActive"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Recipe is already inactive"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        }
      ],
      "emits": [
        "RecipeDeactivated"
      ]
    },
    {
      "name": "activate",
      "entity": "Recipe",
      "parameters": [],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isActive"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Recipe is already active"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        }
      ],
      "emits": [
        "RecipeActivated"
      ]
    },
    {
      "name": "create",
      "entity": "Recipe",
      "parameters": [
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "category",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "cuisineType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tags",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Recipe name is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "name",
          "expression": {
            "kind": "identifier",
            "name": "name"
          }
        },
        {
          "kind": "mutate",
          "target": "category",
          "expression": {
            "kind": "identifier",
            "name": "category"
          }
        },
        {
          "kind": "mutate",
          "target": "cuisineType",
          "expression": {
            "kind": "identifier",
            "name": "cuisineType"
          }
        },
        {
          "kind": "mutate",
          "target": "description",
          "expression": {
            "kind": "identifier",
            "name": "description"
          }
        },
        {
          "kind": "mutate",
          "target": "tags",
          "expression": {
            "kind": "identifier",
            "name": "tags"
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        }
      ],
      "emits": [
        "RecipeCreated"
      ]
    },
    {
      "name": "updateQuantity",
      "entity": "RecipeIngredient",
      "parameters": [
        {
          "name": "newQuantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newUnit",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newQuantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "newQuantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnQuantityIncrease",
          "code": "warnQuantityIncrease",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "newQuantity"
            },
            "right": {
              "kind": "binary",
              "operator": "*",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "quantity"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 1.5
                }
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Quantity must be positive"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Ingredient quantity increased by 50% or more"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "oldQuantity",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "quantity"
                      }
                    },
                    {
                      "key": "newQuantity",
                      "value": {
                        "kind": "identifier",
                        "name": "newQuantity"
                      }
                    },
                    {
                      "key": "increasePercent",
                      "value": {
                        "kind": "binary",
                        "operator": "*",
                        "left": {
                          "kind": "binary",
                          "operator": "/",
                          "left": {
                            "kind": "binary",
                            "operator": "-",
                            "left": {
                              "kind": "identifier",
                              "name": "newQuantity"
                            },
                            "right": {
                              "kind": "member",
                              "object": {
                                "kind": "identifier",
                                "name": "self"
                              },
                              "property": "quantity"
                            }
                          },
                          "right": {
                            "kind": "member",
                            "object": {
                              "kind": "identifier",
                              "name": "self"
                            },
                            "property": "quantity"
                          }
                        },
                        "right": {
                          "kind": "literal",
                          "value": {
                            "kind": "number",
                            "value": 100
                          }
                        }
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "quantity",
          "expression": {
            "kind": "identifier",
            "name": "newQuantity"
          }
        },
        {
          "kind": "mutate",
          "target": "unitId",
          "expression": {
            "kind": "identifier",
            "name": "newUnit"
          }
        }
      ],
      "emits": [
        "RecipeIngredientUpdated"
      ]
    },
    {
      "name": "updateWasteFactor",
      "entity": "RecipeIngredient",
      "parameters": [
        {
          "name": "newWasteFactor",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newWasteFactor"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "newWasteFactor"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnHighWasteFactor",
          "code": "warnHighWasteFactor",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "newWasteFactor"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 1.5
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Waste factor must be greater than 0"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Waste factor is high ({factor})  verify this is intended"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "oldWasteFactor",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "wasteFactor"
                      }
                    },
                    {
                      "key": "newWasteFactor",
                      "value": {
                        "kind": "identifier",
                        "name": "newWasteFactor"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "wasteFactor",
          "expression": {
            "kind": "identifier",
            "name": "newWasteFactor"
          }
        }
      ],
      "emits": [
        "RecipeIngredientWasteFactorUpdated"
      ]
    },
    {
      "name": "create",
      "entity": "RecipeIngredient",
      "parameters": [
        {
          "name": "recipeVersionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "ingredientId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "unitId",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "sortOrder",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "preparationNotes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "isOptional",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "recipeVersionId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "recipeVersionId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "ingredientId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "ingredientId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">",
          "left": {
            "kind": "identifier",
            "name": "quantity"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">",
          "left": {
            "kind": "identifier",
            "name": "unitId"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Recipe version ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Ingredient ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Quantity must be positive"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Unit is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "recipeVersionId",
          "expression": {
            "kind": "identifier",
            "name": "recipeVersionId"
          }
        },
        {
          "kind": "mutate",
          "target": "ingredientId",
          "expression": {
            "kind": "identifier",
            "name": "ingredientId"
          }
        },
        {
          "kind": "mutate",
          "target": "quantity",
          "expression": {
            "kind": "identifier",
            "name": "quantity"
          }
        },
        {
          "kind": "mutate",
          "target": "unitId",
          "expression": {
            "kind": "identifier",
            "name": "unitId"
          }
        },
        {
          "kind": "mutate",
          "target": "sortOrder",
          "expression": {
            "kind": "identifier",
            "name": "sortOrder"
          }
        },
        {
          "kind": "mutate",
          "target": "preparationNotes",
          "expression": {
            "kind": "identifier",
            "name": "preparationNotes"
          }
        },
        {
          "kind": "mutate",
          "target": "isOptional",
          "expression": {
            "kind": "identifier",
            "name": "isOptional"
          }
        }
      ],
      "emits": [
        "RecipeIngredientCreated"
      ]
    },
    {
      "name": "remove",
      "entity": "RecipeIngredient",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "deletedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "RecipeIngredientRemoved"
      ]
    },
    {
      "name": "create",
      "entity": "RecipeStep",
      "parameters": [
        {
          "name": "recipeVersionId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "stepNumber",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "instruction",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "durationMinutes",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "temperatureValue",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "temperatureUnit",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "equipmentNeeded",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "tips",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "videoUrl",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "imageUrl",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "recipeVersionId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "recipeVersionId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">",
          "left": {
            "kind": "identifier",
            "name": "stepNumber"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "instruction"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "instruction"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Recipe version ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Step number must be positive"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Instruction is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "recipeVersionId",
          "expression": {
            "kind": "identifier",
            "name": "recipeVersionId"
          }
        },
        {
          "kind": "mutate",
          "target": "stepNumber",
          "expression": {
            "kind": "identifier",
            "name": "stepNumber"
          }
        },
        {
          "kind": "mutate",
          "target": "instruction",
          "expression": {
            "kind": "identifier",
            "name": "instruction"
          }
        },
        {
          "kind": "mutate",
          "target": "durationMinutes",
          "expression": {
            "kind": "identifier",
            "name": "durationMinutes"
          }
        },
        {
          "kind": "mutate",
          "target": "temperatureValue",
          "expression": {
            "kind": "identifier",
            "name": "temperatureValue"
          }
        },
        {
          "kind": "mutate",
          "target": "temperatureUnit",
          "expression": {
            "kind": "identifier",
            "name": "temperatureUnit"
          }
        },
        {
          "kind": "mutate",
          "target": "equipmentNeeded",
          "expression": {
            "kind": "identifier",
            "name": "equipmentNeeded"
          }
        },
        {
          "kind": "mutate",
          "target": "tips",
          "expression": {
            "kind": "identifier",
            "name": "tips"
          }
        },
        {
          "kind": "mutate",
          "target": "videoUrl",
          "expression": {
            "kind": "identifier",
            "name": "videoUrl"
          }
        },
        {
          "kind": "mutate",
          "target": "imageUrl",
          "expression": {
            "kind": "identifier",
            "name": "imageUrl"
          }
        }
      ],
      "emits": [
        "RecipeStepCreated"
      ]
    },
    {
      "name": "updateInstruction",
      "entity": "RecipeStep",
      "parameters": [
        {
          "name": "newInstruction",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newDurationMinutes",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newTips",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newInstruction"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newInstruction"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Instruction is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "instruction",
          "expression": {
            "kind": "identifier",
            "name": "newInstruction"
          }
        },
        {
          "kind": "mutate",
          "target": "durationMinutes",
          "expression": {
            "kind": "identifier",
            "name": "newDurationMinutes"
          }
        },
        {
          "kind": "mutate",
          "target": "tips",
          "expression": {
            "kind": "identifier",
            "name": "newTips"
          }
        }
      ],
      "emits": [
        "RecipeStepUpdated"
      ]
    },
    {
      "name": "remove",
      "entity": "RecipeStep",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "deletedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "RecipeStepRemoved"
      ]
    },
    {
      "name": "update",
      "entity": "RolePolicy",
      "parameters": [
        {
          "name": "roleName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "permissions",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "isActive",
          "type": {
            "name": "boolean",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update a deleted role policy"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "roleName",
          "expression": {
            "kind": "identifier",
            "name": "roleName"
          }
        },
        {
          "kind": "mutate",
          "target": "permissions",
          "expression": {
            "kind": "identifier",
            "name": "permissions"
          }
        },
        {
          "kind": "mutate",
          "target": "description",
          "expression": {
            "kind": "identifier",
            "name": "description"
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "identifier",
            "name": "isActive"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "RolePolicyUpdated"
      ]
    },
    {
      "name": "grant",
      "entity": "RolePolicy",
      "parameters": [
        {
          "name": "permission",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "grantedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "permission"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "permission"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot grant permissions on a deleted role policy"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Permission is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "RolePolicyPermissionGranted"
      ]
    },
    {
      "name": "revoke",
      "entity": "RolePolicy",
      "parameters": [
        {
          "name": "permission",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "revokedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "permission"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "permission"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot revoke permissions on a deleted role policy"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Permission is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "RolePolicyPermissionRevoked"
      ]
    },
    {
      "name": "create",
      "entity": "ScheduleShift",
      "parameters": [
        {
          "name": "scheduleId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "employeeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "shiftStart",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "shiftEnd",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "roleDuringShift",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "scheduleId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "scheduleId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "employeeId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "employeeId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "locationId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "locationId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "shiftStart"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "shiftStart"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "shiftEnd"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "shiftEnd"
            },
            "right": {
              "kind": "identifier",
              "name": "shiftStart"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Schedule ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Employee ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Location ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Shift start time is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Shift end must be after shift start"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "scheduleId",
          "expression": {
            "kind": "identifier",
            "name": "scheduleId"
          }
        },
        {
          "kind": "mutate",
          "target": "employeeId",
          "expression": {
            "kind": "identifier",
            "name": "employeeId"
          }
        },
        {
          "kind": "mutate",
          "target": "locationId",
          "expression": {
            "kind": "identifier",
            "name": "locationId"
          }
        },
        {
          "kind": "mutate",
          "target": "shiftStart",
          "expression": {
            "kind": "identifier",
            "name": "shiftStart"
          }
        },
        {
          "kind": "mutate",
          "target": "shiftEnd",
          "expression": {
            "kind": "identifier",
            "name": "shiftEnd"
          }
        },
        {
          "kind": "mutate",
          "target": "roleDuringShift",
          "expression": {
            "kind": "identifier",
            "name": "roleDuringShift"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ScheduleShiftCreated"
      ]
    },
    {
      "name": "update",
      "entity": "ScheduleShift",
      "parameters": [
        {
          "name": "employeeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "shiftStart",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "shiftEnd",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "roleDuringShift",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": ">",
          "left": {
            "kind": "identifier",
            "name": "shiftEnd"
          },
          "right": {
            "kind": "identifier",
            "name": "shiftStart"
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Shift end must be after shift start"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "employeeId",
          "expression": {
            "kind": "identifier",
            "name": "employeeId"
          }
        },
        {
          "kind": "mutate",
          "target": "locationId",
          "expression": {
            "kind": "identifier",
            "name": "locationId"
          }
        },
        {
          "kind": "mutate",
          "target": "shiftStart",
          "expression": {
            "kind": "identifier",
            "name": "shiftStart"
          }
        },
        {
          "kind": "mutate",
          "target": "shiftEnd",
          "expression": {
            "kind": "identifier",
            "name": "shiftEnd"
          }
        },
        {
          "kind": "mutate",
          "target": "roleDuringShift",
          "expression": {
            "kind": "identifier",
            "name": "roleDuringShift"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ScheduleShiftUpdated"
      ]
    },
    {
      "name": "remove",
      "entity": "ScheduleShift",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "deletedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ScheduleShiftRemoved"
      ]
    },
    {
      "name": "create",
      "entity": "Schedule",
      "parameters": [
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "scheduleDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "scheduleDate"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "scheduleDate"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Schedule date is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "locationId",
          "expression": {
            "kind": "identifier",
            "name": "locationId"
          }
        },
        {
          "kind": "mutate",
          "target": "scheduleDate",
          "expression": {
            "kind": "identifier",
            "name": "scheduleDate"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "draft"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "shiftCount",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ScheduleCreated"
      ]
    },
    {
      "name": "update",
      "entity": "Schedule",
      "parameters": [
        {
          "name": "scheduleDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "draft"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only update draft schedules"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "scheduleDate",
          "expression": {
            "kind": "identifier",
            "name": "scheduleDate"
          }
        },
        {
          "kind": "mutate",
          "target": "locationId",
          "expression": {
            "kind": "identifier",
            "name": "locationId"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ScheduleUpdated"
      ]
    },
    {
      "name": "release",
      "entity": "Schedule",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "draft"
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "blockNoShifts",
          "code": "blockNoShifts",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "shiftCount"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only publish draft schedules"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Cannot publish schedule with no shifts assigned"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "scheduleId",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "id"
                      }
                    },
                    {
                      "key": "scheduleDate",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "scheduleDate"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "published"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "publishedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "publishedBy",
          "expression": {
            "kind": "identifier",
            "name": "userId"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "SchedulePublished"
      ]
    },
    {
      "name": "close",
      "entity": "Schedule",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "published"
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "blockNotPublished",
          "code": "blockNotPublished",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "published"
              }
            }
          },
          "severity": "block",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only close published schedules"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Cannot close schedule that is not published (current status: '{status}')"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "scheduleId",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "id"
                      }
                    },
                    {
                      "key": "status",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "status"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "closed"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ScheduleClosed"
      ]
    },
    {
      "name": "create",
      "entity": "Shipment",
      "parameters": [
        {
          "name": "shipmentNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "supplierId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "scheduledDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "carrier",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "shippingMethod",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "shipmentNumber"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "shipmentNumber"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Shipment number is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "shipmentNumber",
          "expression": {
            "kind": "identifier",
            "name": "shipmentNumber"
          }
        },
        {
          "kind": "mutate",
          "target": "supplierId",
          "expression": {
            "kind": "identifier",
            "name": "supplierId"
          }
        },
        {
          "kind": "mutate",
          "target": "locationId",
          "expression": {
            "kind": "identifier",
            "name": "locationId"
          }
        },
        {
          "kind": "mutate",
          "target": "eventId",
          "expression": {
            "kind": "identifier",
            "name": "eventId"
          }
        },
        {
          "kind": "mutate",
          "target": "scheduledDate",
          "expression": {
            "kind": "identifier",
            "name": "scheduledDate"
          }
        },
        {
          "kind": "mutate",
          "target": "carrier",
          "expression": {
            "kind": "identifier",
            "name": "carrier"
          }
        },
        {
          "kind": "mutate",
          "target": "shippingMethod",
          "expression": {
            "kind": "identifier",
            "name": "shippingMethod"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "draft"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "totalItems",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "shippingCost",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "totalValue",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ShipmentCreated"
      ]
    },
    {
      "name": "update",
      "entity": "Shipment",
      "parameters": [
        {
          "name": "trackingNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "carrier",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "shippingMethod",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "estimatedDeliveryDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "shippingCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "delivered"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "cancelled"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update a delivered shipment"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update a cancelled shipment"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "trackingNumber",
          "expression": {
            "kind": "identifier",
            "name": "trackingNumber"
          }
        },
        {
          "kind": "mutate",
          "target": "carrier",
          "expression": {
            "kind": "identifier",
            "name": "carrier"
          }
        },
        {
          "kind": "mutate",
          "target": "shippingMethod",
          "expression": {
            "kind": "identifier",
            "name": "shippingMethod"
          }
        },
        {
          "kind": "mutate",
          "target": "estimatedDeliveryDate",
          "expression": {
            "kind": "identifier",
            "name": "estimatedDeliveryDate"
          }
        },
        {
          "kind": "mutate",
          "target": "shippingCost",
          "expression": {
            "kind": "identifier",
            "name": "shippingCost"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ShipmentUpdated"
      ]
    },
    {
      "name": "schedule",
      "entity": "Shipment",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "scheduledDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "draft"
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "blockNoItems",
          "code": "blockNoItems",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "totalItems"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only schedule draft shipments"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Cannot schedule shipment with no items"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "shipmentId",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "id"
                      }
                    },
                    {
                      "key": "purchaseOrderId",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "purchaseOrderId"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "scheduled"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ShipmentScheduled"
      ]
    },
    {
      "name": "startPreparing",
      "entity": "Shipment",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "scheduled"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only start preparing scheduled shipments"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "preparing"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ShipmentPreparationStarted"
      ]
    },
    {
      "name": "ship",
      "entity": "Shipment",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "trackingNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "preparing"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only ship shipments that are being prepared"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "in_transit"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "trackingNumber",
          "expression": {
            "kind": "identifier",
            "name": "trackingNumber"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ShipmentShipped"
      ]
    },
    {
      "name": "markDelivered",
      "entity": "Shipment",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "receivedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "signature",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "or",
          "left": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "in_transit"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "scheduled"
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "blockNoItems",
          "code": "blockNoItems",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "totalItems"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only deliver in-transit or scheduled shipments"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Cannot mark shipment '{shipmentNumber}' as delivered with no items received"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "shipmentNumber",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "shipmentNumber"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "delivered"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "deliveredBy",
          "expression": {
            "kind": "identifier",
            "name": "userId"
          }
        },
        {
          "kind": "mutate",
          "target": "receivedBy",
          "expression": {
            "kind": "identifier",
            "name": "receivedBy"
          }
        },
        {
          "kind": "mutate",
          "target": "signature",
          "expression": {
            "kind": "identifier",
            "name": "signature"
          }
        },
        {
          "kind": "mutate",
          "target": "actualDeliveryDate",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ShipmentDelivered"
      ]
    },
    {
      "name": "cancel",
      "entity": "Shipment",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "delivered"
            }
          }
        },
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "cancelled"
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnCancelInTransit",
          "code": "warnCancelInTransit",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "status"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "in_transit"
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot cancel a delivered shipment"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Shipment is already cancelled"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Cancelling in-transit shipment '{shipmentNumber}' - carrier may need notification"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "shipmentNumber",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "shipmentNumber"
                      }
                    },
                    {
                      "key": "carrier",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "carrier"
                      }
                    },
                    {
                      "key": "trackingNumber",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "trackingNumber"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "cancelled"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "reason"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ShipmentCancelled"
      ]
    },
    {
      "name": "create",
      "entity": "ShipmentItem",
      "parameters": [
        {
          "name": "shipmentId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "itemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantityShipped",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "unitId",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "unitCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "lotNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "expirationDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "shipmentId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "shipmentId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "itemId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "itemId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "quantityShipped"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "quantityShipped"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Shipment ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Item ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Quantity shipped must be positive"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "shipmentId",
          "expression": {
            "kind": "identifier",
            "name": "shipmentId"
          }
        },
        {
          "kind": "mutate",
          "target": "itemId",
          "expression": {
            "kind": "identifier",
            "name": "itemId"
          }
        },
        {
          "kind": "mutate",
          "target": "quantityShipped",
          "expression": {
            "kind": "identifier",
            "name": "quantityShipped"
          }
        },
        {
          "kind": "mutate",
          "target": "unitId",
          "expression": {
            "kind": "identifier",
            "name": "unitId"
          }
        },
        {
          "kind": "mutate",
          "target": "unitCost",
          "expression": {
            "kind": "identifier",
            "name": "unitCost"
          }
        },
        {
          "kind": "mutate",
          "target": "totalCost",
          "expression": {
            "kind": "binary",
            "operator": "*",
            "left": {
              "kind": "identifier",
              "name": "quantityShipped"
            },
            "right": {
              "kind": "identifier",
              "name": "unitCost"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "quantityReceived",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "quantityDamaged",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "condition",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "good"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "lotNumber",
          "expression": {
            "kind": "identifier",
            "name": "lotNumber"
          }
        },
        {
          "kind": "mutate",
          "target": "expirationDate",
          "expression": {
            "kind": "identifier",
            "name": "expirationDate"
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ShipmentItemCreated"
      ]
    },
    {
      "name": "updateReceived",
      "entity": "ShipmentItem",
      "parameters": [
        {
          "name": "quantityReceived",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantityDamaged",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "condition",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "conditionNotes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "quantityReceived"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">=",
            "left": {
              "kind": "identifier",
              "name": "quantityReceived"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnOverReceived",
          "code": "warnOverReceived",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "quantityReceived"
            },
            "right": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "quantityShipped"
            }
          },
          "severity": "warn",
          "overrideable": false
        },
        {
          "name": "warnDamaged",
          "code": "warnDamaged",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "quantityDamaged"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Quantity received cannot be negative"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Received quantity ({received}) exceeds shipped quantity ({shipped})"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "itemId",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "itemId"
                      }
                    },
                    {
                      "key": "received",
                      "value": {
                        "kind": "identifier",
                        "name": "quantityReceived"
                      }
                    },
                    {
                      "key": "shipped",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "quantityShipped"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Damaged items reported: {damaged} of {shipped} shipped"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "itemId",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "itemId"
                      }
                    },
                    {
                      "key": "damaged",
                      "value": {
                        "kind": "identifier",
                        "name": "quantityDamaged"
                      }
                    },
                    {
                      "key": "shipped",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "quantityShipped"
                      }
                    },
                    {
                      "key": "condition",
                      "value": {
                        "kind": "identifier",
                        "name": "condition"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "quantityReceived",
          "expression": {
            "kind": "identifier",
            "name": "quantityReceived"
          }
        },
        {
          "kind": "mutate",
          "target": "quantityDamaged",
          "expression": {
            "kind": "identifier",
            "name": "quantityDamaged"
          }
        },
        {
          "kind": "mutate",
          "target": "condition",
          "expression": {
            "kind": "identifier",
            "name": "condition"
          }
        },
        {
          "kind": "mutate",
          "target": "conditionNotes",
          "expression": {
            "kind": "identifier",
            "name": "conditionNotes"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "ShipmentItemReceived"
      ]
    },
    {
      "name": "assignTask",
      "entity": "Station",
      "parameters": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "taskName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "taskId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "taskId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "taskName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "taskName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnNearCapacity",
          "code": "warnNearCapacity",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "capacityRemaining"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 1
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        },
        {
          "name": "blockFull",
          "code": "blockFull",
          "expression": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isAtCapacity"
          },
          "severity": "block",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Assigning task '{taskName}' to near-capacity station '{stationName}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "stationName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "taskName",
                      "value": {
                        "kind": "identifier",
                        "name": "taskName"
                      }
                    },
                    {
                      "key": "current",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "currentTaskCount"
                      }
                    },
                    {
                      "key": "max",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "capacitySimultaneousTasks"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Cannot assign task - station '{stationName}' is at full capacity"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "stationName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "current",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "currentTaskCount"
                      }
                    },
                    {
                      "key": "max",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "capacitySimultaneousTasks"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "currentTaskCount",
          "expression": {
            "kind": "binary",
            "operator": "+",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "currentTaskCount"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 1
              }
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "StationTaskAssigned"
      ]
    },
    {
      "name": "removeTask",
      "entity": "Station",
      "parameters": [
        {
          "name": "taskId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "taskName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "taskId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "taskId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnNoTasks",
          "code": "warnNoTasks",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "currentTaskCount"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Removing task from empty station '{stationName}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "stationName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "currentTaskCount",
          "expression": {
            "kind": "conditional",
            "condition": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "currentTaskCount"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 0
                }
              }
            },
            "consequent": {
              "kind": "binary",
              "operator": "-",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "currentTaskCount"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "number",
                  "value": 1
                }
              }
            },
            "alternate": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "StationTaskRemoved"
      ]
    },
    {
      "name": "updateCapacity",
      "entity": "Station",
      "parameters": [
        {
          "name": "newCapacity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newCapacity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "newCapacity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnCapacityReduction",
          "code": "warnCapacityReduction",
          "expression": {
            "kind": "binary",
            "operator": "and",
            "left": {
              "kind": "binary",
              "operator": "<",
              "left": {
                "kind": "identifier",
                "name": "newCapacity"
              },
              "right": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "capacitySimultaneousTasks"
              }
            },
            "right": {
              "kind": "binary",
              "operator": ">",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "currentTaskCount"
              },
              "right": {
                "kind": "identifier",
                "name": "newCapacity"
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Reducing capacity from {oldMax} to {newMax} with {current} active tasks"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "stationName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "oldMax",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "capacitySimultaneousTasks"
                      }
                    },
                    {
                      "key": "newMax",
                      "value": {
                        "kind": "identifier",
                        "name": "newCapacity"
                      }
                    },
                    {
                      "key": "current",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "currentTaskCount"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "capacitySimultaneousTasks",
          "expression": {
            "kind": "identifier",
            "name": "newCapacity"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "StationCapacityUpdated"
      ]
    },
    {
      "name": "deactivate",
      "entity": "Station",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "self"
          },
          "property": "isActive"
        }
      ],
      "constraints": [
        {
          "name": "warnDeactivateWithTasks",
          "code": "warnDeactivateWithTasks",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "currentTaskCount"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Deactivating station '{stationName}' with {current} active tasks"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "stationName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "currentTaskCount",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "currentTaskCount"
                      }
                    },
                    {
                      "key": "reason",
                      "value": {
                        "kind": "identifier",
                        "name": "reason"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "StationDeactivated"
      ]
    },
    {
      "name": "activate",
      "entity": "Station",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "unary",
          "operator": "not",
          "operand": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isActive"
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "StationActivated"
      ]
    },
    {
      "name": "updateEquipment",
      "entity": "Station",
      "parameters": [
        {
          "name": "equipmentList",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "identifier",
            "name": "equipmentList"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "null"
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "mutate",
          "target": "equipmentList",
          "expression": {
            "kind": "identifier",
            "name": "equipmentList"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "StationEquipmentUpdated"
      ]
    },
    {
      "name": "create",
      "entity": "Station",
      "parameters": [
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "stationType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "capacitySimultaneousTasks",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "equipmentList",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "locationId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "locationId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">",
          "left": {
            "kind": "identifier",
            "name": "capacitySimultaneousTasks"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Station name is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Location ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Capacity must be positive"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "locationId",
          "expression": {
            "kind": "identifier",
            "name": "locationId"
          }
        },
        {
          "kind": "mutate",
          "target": "name",
          "expression": {
            "kind": "identifier",
            "name": "name"
          }
        },
        {
          "kind": "mutate",
          "target": "stationType",
          "expression": {
            "kind": "identifier",
            "name": "stationType"
          }
        },
        {
          "kind": "mutate",
          "target": "capacitySimultaneousTasks",
          "expression": {
            "kind": "identifier",
            "name": "capacitySimultaneousTasks"
          }
        },
        {
          "kind": "mutate",
          "target": "equipmentList",
          "expression": {
            "kind": "identifier",
            "name": "equipmentList"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        },
        {
          "kind": "mutate",
          "target": "currentTaskCount",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "StationCreated"
      ]
    },
    {
      "name": "clockIn",
      "entity": "TimeEntry",
      "parameters": [
        {
          "name": "employeeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "shiftId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "employeeId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "employeeId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "blockAlreadyClockedIn",
          "code": "blockAlreadyClockedIn",
          "expression": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isClockedIn"
          },
          "severity": "block",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Employee ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Employee '{employeeId}' is already clocked in"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "employeeId",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "employeeId"
                      }
                    },
                    {
                      "key": "clockIn",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "clockIn"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "employeeId",
          "expression": {
            "kind": "identifier",
            "name": "employeeId"
          }
        },
        {
          "kind": "mutate",
          "target": "locationId",
          "expression": {
            "kind": "identifier",
            "name": "locationId"
          }
        },
        {
          "kind": "mutate",
          "target": "shiftId",
          "expression": {
            "kind": "identifier",
            "name": "shiftId"
          }
        },
        {
          "kind": "mutate",
          "target": "clockIn",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "clockOut",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "breakMinutes",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "TimeEntryClockedIn"
      ]
    },
    {
      "name": "clockOut",
      "entity": "TimeEntry",
      "parameters": [
        {
          "name": "breakMinutes",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "self"
          },
          "property": "isClockedIn"
        }
      ],
      "constraints": [
        {
          "name": "blockNotClockedIn",
          "code": "blockNotClockedIn",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "clockIn"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          },
          "severity": "block",
          "overrideable": false
        },
        {
          "name": "warnLongShift",
          "code": "warnLongShift",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "binary",
              "operator": "-",
              "left": {
                "kind": "call",
                "callee": {
                  "kind": "identifier",
                  "name": "now"
                },
                "args": []
              },
              "right": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "clockIn"
              }
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 43200000
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Must be clocked in to clock out"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Cannot clock out - no active clock-in found"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "employeeId",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "employeeId"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Clock-out after 12+ hours for employee '{employeeId}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "employeeId",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "employeeId"
                      }
                    },
                    {
                      "key": "clockIn",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "clockIn"
                      }
                    },
                    {
                      "key": "durationMs",
                      "value": {
                        "kind": "binary",
                        "operator": "-",
                        "left": {
                          "kind": "call",
                          "callee": {
                            "kind": "identifier",
                            "name": "now"
                          },
                          "args": []
                        },
                        "right": {
                          "kind": "member",
                          "object": {
                            "kind": "identifier",
                            "name": "self"
                          },
                          "property": "clockIn"
                        }
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "clockOut",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "breakMinutes",
          "expression": {
            "kind": "identifier",
            "name": "breakMinutes"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "TimeEntryClockedOut"
      ]
    },
    {
      "name": "addEntry",
      "entity": "TimeEntry",
      "parameters": [
        {
          "name": "employeeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "shiftId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "clockIn",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "clockOut",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "breakMinutes",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "employeeId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "employeeId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "clockIn"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "clockIn"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "clockOut"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "clockOut"
            },
            "right": {
              "kind": "identifier",
              "name": "clockIn"
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnLongEntry",
          "code": "warnLongEntry",
          "expression": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "binary",
              "operator": "-",
              "left": {
                "kind": "identifier",
                "name": "clockOut"
              },
              "right": {
                "kind": "identifier",
                "name": "clockIn"
              }
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 43200000
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Employee ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Clock-in time is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Clock-out must be after clock-in"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Manual time entry exceeds 12 hours for employee '{employeeId}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "employeeId",
                      "value": {
                        "kind": "identifier",
                        "name": "employeeId"
                      }
                    },
                    {
                      "key": "clockIn",
                      "value": {
                        "kind": "identifier",
                        "name": "clockIn"
                      }
                    },
                    {
                      "key": "clockOut",
                      "value": {
                        "kind": "identifier",
                        "name": "clockOut"
                      }
                    },
                    {
                      "key": "durationMs",
                      "value": {
                        "kind": "binary",
                        "operator": "-",
                        "left": {
                          "kind": "identifier",
                          "name": "clockOut"
                        },
                        "right": {
                          "kind": "identifier",
                          "name": "clockIn"
                        }
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "employeeId",
          "expression": {
            "kind": "identifier",
            "name": "employeeId"
          }
        },
        {
          "kind": "mutate",
          "target": "locationId",
          "expression": {
            "kind": "identifier",
            "name": "locationId"
          }
        },
        {
          "kind": "mutate",
          "target": "shiftId",
          "expression": {
            "kind": "identifier",
            "name": "shiftId"
          }
        },
        {
          "kind": "mutate",
          "target": "clockIn",
          "expression": {
            "kind": "identifier",
            "name": "clockIn"
          }
        },
        {
          "kind": "mutate",
          "target": "clockOut",
          "expression": {
            "kind": "identifier",
            "name": "clockOut"
          }
        },
        {
          "kind": "mutate",
          "target": "breakMinutes",
          "expression": {
            "kind": "identifier",
            "name": "breakMinutes"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "TimeEntryAdded"
      ]
    },
    {
      "name": "create",
      "entity": "TimecardEditRequest",
      "parameters": [
        {
          "name": "timeEntryId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "employeeId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "requestedClockIn",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "requestedClockOut",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "requestedBreakMinutes",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "timeEntryId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "timeEntryId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "employeeId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "employeeId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "reason"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "reason"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Time entry ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Employee ID is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Reason is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "timeEntryId",
          "expression": {
            "kind": "identifier",
            "name": "timeEntryId"
          }
        },
        {
          "kind": "mutate",
          "target": "employeeId",
          "expression": {
            "kind": "identifier",
            "name": "employeeId"
          }
        },
        {
          "kind": "mutate",
          "target": "requestedClockIn",
          "expression": {
            "kind": "identifier",
            "name": "requestedClockIn"
          }
        },
        {
          "kind": "mutate",
          "target": "requestedClockOut",
          "expression": {
            "kind": "identifier",
            "name": "requestedClockOut"
          }
        },
        {
          "kind": "mutate",
          "target": "requestedBreakMinutes",
          "expression": {
            "kind": "identifier",
            "name": "requestedBreakMinutes"
          }
        },
        {
          "kind": "mutate",
          "target": "reason",
          "expression": {
            "kind": "identifier",
            "name": "reason"
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "pending"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "TimecardEditRequested"
      ]
    },
    {
      "name": "approve",
      "entity": "TimecardEditRequest",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "pending"
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "blockAlreadyProcessed",
          "code": "blockAlreadyProcessed",
          "expression": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isProcessed"
          },
          "severity": "block",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only approve pending requests"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Edit request has already been processed (status: '{status}')"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "timeEntryId",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "timeEntryId"
                      }
                    },
                    {
                      "key": "employeeId",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "employeeId"
                      }
                    },
                    {
                      "key": "status",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "status"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "approved"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "TimecardEditApproved"
      ]
    },
    {
      "name": "reject",
      "entity": "TimecardEditRequest",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "status"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "pending"
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "blockAlreadyProcessed",
          "code": "blockAlreadyProcessed",
          "expression": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isProcessed"
          },
          "severity": "block",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Can only reject pending requests"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Edit request has already been processed (status: '{status}')"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "timeEntryId",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "timeEntryId"
                      }
                    },
                    {
                      "key": "employeeId",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "employeeId"
                      }
                    },
                    {
                      "key": "status",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "status"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "status",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "rejected"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "TimecardEditRejected"
      ]
    },
    {
      "name": "create",
      "entity": "User",
      "parameters": [
        {
          "name": "email",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "firstName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "lastName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "role",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "phone",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "employmentType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "hourlyRate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "salaryAnnual",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "hireDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "employeeNumber",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "email"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "email"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "firstName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "firstName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "lastName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "lastName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Email is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "First name is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Last name is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "email",
          "expression": {
            "kind": "identifier",
            "name": "email"
          }
        },
        {
          "kind": "mutate",
          "target": "firstName",
          "expression": {
            "kind": "identifier",
            "name": "firstName"
          }
        },
        {
          "kind": "mutate",
          "target": "lastName",
          "expression": {
            "kind": "identifier",
            "name": "lastName"
          }
        },
        {
          "kind": "mutate",
          "target": "role",
          "expression": {
            "kind": "identifier",
            "name": "role"
          }
        },
        {
          "kind": "mutate",
          "target": "phone",
          "expression": {
            "kind": "identifier",
            "name": "phone"
          }
        },
        {
          "kind": "mutate",
          "target": "employmentType",
          "expression": {
            "kind": "identifier",
            "name": "employmentType"
          }
        },
        {
          "kind": "mutate",
          "target": "hourlyRate",
          "expression": {
            "kind": "identifier",
            "name": "hourlyRate"
          }
        },
        {
          "kind": "mutate",
          "target": "salaryAnnual",
          "expression": {
            "kind": "identifier",
            "name": "salaryAnnual"
          }
        },
        {
          "kind": "mutate",
          "target": "hireDate",
          "expression": {
            "kind": "identifier",
            "name": "hireDate"
          }
        },
        {
          "kind": "mutate",
          "target": "employeeNumber",
          "expression": {
            "kind": "identifier",
            "name": "employeeNumber"
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        },
        {
          "kind": "mutate",
          "target": "terminationDate",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "UserCreated"
      ]
    },
    {
      "name": "update",
      "entity": "User",
      "parameters": [
        {
          "name": "firstName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "lastName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "phone",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "employmentType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "hourlyRate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "salaryAnnual",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "avatarUrl",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "self"
          },
          "property": "isActive"
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update an inactive user"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "firstName",
          "expression": {
            "kind": "identifier",
            "name": "firstName"
          }
        },
        {
          "kind": "mutate",
          "target": "lastName",
          "expression": {
            "kind": "identifier",
            "name": "lastName"
          }
        },
        {
          "kind": "mutate",
          "target": "phone",
          "expression": {
            "kind": "identifier",
            "name": "phone"
          }
        },
        {
          "kind": "mutate",
          "target": "employmentType",
          "expression": {
            "kind": "identifier",
            "name": "employmentType"
          }
        },
        {
          "kind": "mutate",
          "target": "hourlyRate",
          "expression": {
            "kind": "identifier",
            "name": "hourlyRate"
          }
        },
        {
          "kind": "mutate",
          "target": "salaryAnnual",
          "expression": {
            "kind": "identifier",
            "name": "salaryAnnual"
          }
        },
        {
          "kind": "mutate",
          "target": "avatarUrl",
          "expression": {
            "kind": "identifier",
            "name": "avatarUrl"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "UserUpdated"
      ]
    },
    {
      "name": "deactivate",
      "entity": "User",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "self"
          },
          "property": "isActive"
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "User is already inactive"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "UserDeactivated"
      ]
    },
    {
      "name": "terminate",
      "entity": "User",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "terminationDate",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "self"
          },
          "property": "isActive"
        }
      ],
      "constraints": [
        {
          "name": "blockAlreadyTerminated",
          "code": "blockAlreadyTerminated",
          "expression": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isTerminated"
          },
          "severity": "block",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "User is already inactive"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "User '{name}' is already terminated"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "name",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "fullName"
                      }
                    },
                    {
                      "key": "email",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "email"
                      }
                    },
                    {
                      "key": "terminationDate",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "terminationDate"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        },
        {
          "kind": "mutate",
          "target": "terminationDate",
          "expression": {
            "kind": "identifier",
            "name": "terminationDate"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "UserTerminated"
      ]
    },
    {
      "name": "updateRole",
      "entity": "User",
      "parameters": [
        {
          "name": "newRole",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "self"
          },
          "property": "isActive"
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newRole"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newRole"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnAdminPromotion",
          "code": "warnAdminPromotion",
          "expression": {
            "kind": "binary",
            "operator": "==",
            "left": {
              "kind": "identifier",
              "name": "newRole"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update role for an inactive user"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Role is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Promoting user '{name}' to admin role"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "name",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "fullName"
                      }
                    },
                    {
                      "key": "email",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "email"
                      }
                    },
                    {
                      "key": "previousRole",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "role"
                      }
                    },
                    {
                      "key": "newRole",
                      "value": {
                        "kind": "identifier",
                        "name": "newRole"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "role",
          "expression": {
            "kind": "identifier",
            "name": "newRole"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "UserRoleUpdated"
      ]
    },
    {
      "name": "create",
      "entity": "WasteEntry",
      "parameters": [
        {
          "name": "inventoryItemId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "reasonId",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "unitId",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "eventId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "loggedBy",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "unitCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "inventoryItemId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "inventoryItemId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "reasonId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "reasonId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">=",
          "left": {
            "kind": "identifier",
            "name": "unitCost"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Inventory item is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Waste reason is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Quantity must be positive"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Unit cost cannot be negative"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "inventoryItemId",
          "expression": {
            "kind": "identifier",
            "name": "inventoryItemId"
          }
        },
        {
          "kind": "mutate",
          "target": "reasonId",
          "expression": {
            "kind": "identifier",
            "name": "reasonId"
          }
        },
        {
          "kind": "mutate",
          "target": "quantity",
          "expression": {
            "kind": "identifier",
            "name": "quantity"
          }
        },
        {
          "kind": "mutate",
          "target": "unitId",
          "expression": {
            "kind": "identifier",
            "name": "unitId"
          }
        },
        {
          "kind": "mutate",
          "target": "locationId",
          "expression": {
            "kind": "identifier",
            "name": "locationId"
          }
        },
        {
          "kind": "mutate",
          "target": "eventId",
          "expression": {
            "kind": "identifier",
            "name": "eventId"
          }
        },
        {
          "kind": "mutate",
          "target": "loggedBy",
          "expression": {
            "kind": "identifier",
            "name": "loggedBy"
          }
        },
        {
          "kind": "mutate",
          "target": "unitCost",
          "expression": {
            "kind": "identifier",
            "name": "unitCost"
          }
        },
        {
          "kind": "mutate",
          "target": "totalCost",
          "expression": {
            "kind": "binary",
            "operator": "*",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "identifier",
              "name": "unitCost"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "loggedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "WasteEntryCreated"
      ]
    },
    {
      "name": "update",
      "entity": "WasteEntry",
      "parameters": [
        {
          "name": "quantity",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "unitId",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "locationId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "notes",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "unitCost",
          "type": {
            "name": "number",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": ">",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "number",
                "value": 0
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": ">=",
          "left": {
            "kind": "identifier",
            "name": "unitCost"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update a deleted waste entry"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Quantity must be positive"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Unit cost cannot be negative"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "quantity",
          "expression": {
            "kind": "identifier",
            "name": "quantity"
          }
        },
        {
          "kind": "mutate",
          "target": "unitId",
          "expression": {
            "kind": "identifier",
            "name": "unitId"
          }
        },
        {
          "kind": "mutate",
          "target": "locationId",
          "expression": {
            "kind": "identifier",
            "name": "locationId"
          }
        },
        {
          "kind": "mutate",
          "target": "notes",
          "expression": {
            "kind": "identifier",
            "name": "notes"
          }
        },
        {
          "kind": "mutate",
          "target": "unitCost",
          "expression": {
            "kind": "identifier",
            "name": "unitCost"
          }
        },
        {
          "kind": "mutate",
          "target": "totalCost",
          "expression": {
            "kind": "binary",
            "operator": "*",
            "left": {
              "kind": "identifier",
              "name": "quantity"
            },
            "right": {
              "kind": "identifier",
              "name": "unitCost"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "WasteEntryUpdated"
      ]
    },
    {
      "name": "softDelete",
      "entity": "WasteEntry",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "deletedAt"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "number",
              "value": 0
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Waste entry is already deleted"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "deletedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "WasteEntryDeleted"
      ]
    },
    {
      "name": "create",
      "entity": "Workflow",
      "parameters": [
        {
          "name": "name",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "description",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "triggerType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "triggerConfig",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "name"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "triggerType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "triggerType"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        }
      ],
      "constraints": [],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Workflow name is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Trigger type is required"
            }
          }
        },
        {
          "kind": "mutate",
          "target": "name",
          "expression": {
            "kind": "identifier",
            "name": "name"
          }
        },
        {
          "kind": "mutate",
          "target": "description",
          "expression": {
            "kind": "identifier",
            "name": "description"
          }
        },
        {
          "kind": "mutate",
          "target": "triggerType",
          "expression": {
            "kind": "identifier",
            "name": "triggerType"
          }
        },
        {
          "kind": "mutate",
          "target": "triggerConfig",
          "expression": {
            "kind": "identifier",
            "name": "triggerConfig"
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        },
        {
          "kind": "mutate",
          "target": "createdAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "WorkflowCreated"
      ]
    },
    {
      "name": "update",
      "entity": "Workflow",
      "parameters": [
        {
          "name": "newName",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newDescription",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newTriggerType",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "newTriggerConfig",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "identifier",
              "name": "newName"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": ""
              }
            }
          }
        },
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isActive"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnNameChange",
          "code": "warnNameChange",
          "expression": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "self"
              },
              "property": "name"
            },
            "right": {
              "kind": "identifier",
              "name": "newName"
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Workflow name is required"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Cannot update an active workflow - deactivate first"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Renaming workflow from '{oldName}' to '{newName}'"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "oldName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "newName",
                      "value": {
                        "kind": "identifier",
                        "name": "newName"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "name",
          "expression": {
            "kind": "identifier",
            "name": "newName"
          }
        },
        {
          "kind": "mutate",
          "target": "description",
          "expression": {
            "kind": "identifier",
            "name": "newDescription"
          }
        },
        {
          "kind": "mutate",
          "target": "triggerType",
          "expression": {
            "kind": "identifier",
            "name": "newTriggerType"
          }
        },
        {
          "kind": "mutate",
          "target": "triggerConfig",
          "expression": {
            "kind": "identifier",
            "name": "newTriggerConfig"
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "WorkflowUpdated"
      ]
    },
    {
      "name": "activate",
      "entity": "Workflow",
      "parameters": [
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isActive"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "blockNoTriggerConfig",
          "code": "blockNoTriggerConfig",
          "expression": {
            "kind": "binary",
            "operator": "or",
            "left": {
              "kind": "binary",
              "operator": "or",
              "left": {
                "kind": "binary",
                "operator": "==",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "triggerConfig"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "null"
                  }
                }
              },
              "right": {
                "kind": "binary",
                "operator": "==",
                "left": {
                  "kind": "member",
                  "object": {
                    "kind": "identifier",
                    "name": "self"
                  },
                  "property": "triggerConfig"
                },
                "right": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": ""
                  }
                }
              }
            },
            "right": {
              "kind": "binary",
              "operator": "==",
              "left": {
                "kind": "member",
                "object": {
                  "kind": "identifier",
                  "name": "self"
                },
                "property": "triggerConfig"
              },
              "right": {
                "kind": "literal",
                "value": {
                  "kind": "string",
                  "value": "{}"
                }
              }
            }
          },
          "severity": "block",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Workflow is already active"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Cannot activate workflow '{workflowName}' without trigger configuration"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "workflowName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "triggerType",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "triggerType"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "WorkflowActivated"
      ]
    },
    {
      "name": "deactivate",
      "entity": "Workflow",
      "parameters": [
        {
          "name": "reason",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        },
        {
          "name": "userId",
          "type": {
            "name": "string",
            "nullable": false
          },
          "required": true
        }
      ],
      "guards": [
        {
          "kind": "binary",
          "operator": "==",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "self"
            },
            "property": "isActive"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          }
        }
      ],
      "constraints": [
        {
          "name": "warnDeactivate",
          "code": "warnDeactivate",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": true
            }
          },
          "severity": "warn",
          "overrideable": false
        }
      ],
      "actions": [
        {
          "kind": "compute",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": "Workflow is already inactive"
            }
          }
        },
        {
          "kind": "compute",
          "expression": {
            "kind": "object",
            "properties": [
              {
                "key": "messageTemplate",
                "value": {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "Deactivating workflow '{workflowName}' - active automations will stop"
                  }
                }
              },
              {
                "key": "details",
                "value": {
                  "kind": "object",
                  "properties": [
                    {
                      "key": "workflowName",
                      "value": {
                        "kind": "member",
                        "object": {
                          "kind": "identifier",
                          "name": "self"
                        },
                        "property": "name"
                      }
                    },
                    {
                      "key": "reason",
                      "value": {
                        "kind": "identifier",
                        "name": "reason"
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "kind": "mutate",
          "target": "isActive",
          "expression": {
            "kind": "literal",
            "value": {
              "kind": "boolean",
              "value": false
            }
          }
        },
        {
          "kind": "mutate",
          "target": "updatedAt",
          "expression": {
            "kind": "call",
            "callee": {
              "kind": "identifier",
              "name": "now"
            },
            "args": []
          }
        }
      ],
      "emits": [
        "WorkflowDeactivated"
      ]
    }
  ],
  "policies": [
    {
      "name": "AlertsManagersCanManage",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Managers and admins can manage alert configurations"
    },
    {
      "name": "AllergenStaffCanView",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Kitchen staff can view allergen warnings"
    },
    {
      "name": "AllergenLeadsCanAcknowledge",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only leads and managers can acknowledge allergen warnings"
    },
    {
      "name": "AllergenManagersCanOverride",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only managers can override allergen warnings"
    },
    {
      "name": "BattleBoardManagement",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "event_coordinator"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Kitchen staff and above can manage battle boards"
    },
    {
      "name": "BattleBoardFinalize",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only leads and above can finalize battle boards"
    },
    {
      "name": "BattleBoardVote",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "event_coordinator"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "All kitchen staff can vote on battle boards"
    },
    {
      "name": "CateringOrderManagement",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "event_coordinator"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "catering_manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Event coordinators and catering managers can manage orders"
    },
    {
      "name": "CateringOrderConfirm",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "catering_manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only catering managers and above can confirm orders"
    },
    {
      "name": "CateringOrderCancel",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "catering_manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only catering managers and above can cancel orders"
    },
    {
      "name": "SalesCanManageInteractions",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "sales"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Sales staff can manage interactions"
    },
    {
      "name": "SalesCanCompleteInteractions",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "sales"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Sales staff can complete interaction follow-ups"
    },
    {
      "name": "SalesCanManageClients",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "sales"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Sales staff can manage clients"
    },
    {
      "name": "ManagerCanArchiveClients",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only managers can archive clients"
    },
    {
      "name": "SalesCanManageContacts",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "sales"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Sales staff can manage contacts"
    },
    {
      "name": "SalesCanManagePreferences",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "sales"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Sales staff can manage preferences"
    },
    {
      "name": "BoardManagement",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only leads and above can manage boards"
    },
    {
      "name": "BoardCardManagement",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Kitchen staff can manage board cards"
    },
    {
      "name": "BoardLayoutManagement",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Staff can manage their own layouts"
    },
    {
      "name": "KitchenStaffCanManage",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Kitchen staff can manage containers"
    },
    {
      "name": "ManagersCanDeactivate",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only leads and managers can deactivate containers"
    },
    {
      "name": "StaffCanCount",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Staff can perform cycle counts"
    },
    {
      "name": "LeadsCanVerify",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Leads and managers can verify counts"
    },
    {
      "name": "ManagersCanCreateSession",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Leads and managers can create count sessions"
    },
    {
      "name": "ManagersCanApproveVariance",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only managers can approve variance reports"
    },
    {
      "name": "ManagersCanUpdatePricing",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only leads and managers can update dish pricing"
    },
    {
      "name": "BudgetManagement",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "event_coordinator"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "finance"
              }
            }
          ]
        }
      },
      "message": "Event coordinators and finance can manage budgets"
    },
    {
      "name": "BudgetFinalize",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "finance"
              }
            }
          ]
        }
      },
      "message": "Only managers and finance can finalize budgets"
    },
    {
      "name": "LineItemManagement",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "event_coordinator"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "finance"
              }
            }
          ]
        }
      },
      "message": "Event coordinators and finance can manage line items"
    },
    {
      "name": "ContractStaffCanView",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "event_coordinator"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Event staff can view contracts"
    },
    {
      "name": "ContractManagersCanManage",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only managers and admins can manage contracts"
    },
    {
      "name": "EventDishManagement",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "event_coordinator"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Event coordinators and above can manage event dishes"
    },
    {
      "name": "EventStaffCanManage",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "event_coordinator"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Event staff can manage guests"
    },
    {
      "name": "EventImportWorkflowCreate",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Staff can create import workflows"
    },
    {
      "name": "EventImportWorkflowManage",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Managers can manage import workflows"
    },
    {
      "name": "EventImportWorkflowRetry",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Managers can retry failed workflows"
    },
    {
      "name": "ReportManagement",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "event_coordinator"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Kitchen staff and above can manage reports"
    },
    {
      "name": "ReportApproval",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only leads and above can approve reports"
    },
    {
      "name": "EventManagement",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "and",
        "left": {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "user"
              },
              "property": "role"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "event_coordinator"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "manager"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "admin"
                  }
                }
              ]
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "user"
              },
              "property": "tenantId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          }
        },
        "right": {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "user"
            },
            "property": "tenantId"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": ""
            }
          }
        }
      },
      "message": "Event coordinators and above can manage events for their tenant"
    },
    {
      "name": "EventCreate",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "and",
        "left": {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "user"
              },
              "property": "role"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "event_coordinator"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "manager"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "admin"
                  }
                }
              ]
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "user"
              },
              "property": "tenantId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          }
        },
        "right": {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "user"
            },
            "property": "tenantId"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": ""
            }
          }
        }
      },
      "message": "Event coordinators and above can create events for their tenant"
    },
    {
      "name": "EventUpdate",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "and",
        "left": {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "user"
              },
              "property": "role"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "event_coordinator"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "manager"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "admin"
                  }
                }
              ]
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "user"
              },
              "property": "tenantId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          }
        },
        "right": {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "user"
            },
            "property": "tenantId"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": ""
            }
          }
        }
      },
      "message": "Event coordinators and above can update events for their tenant"
    },
    {
      "name": "EventFinalize",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only managers can finalize events"
    },
    {
      "name": "EventArchive",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only managers can archive events"
    },
    {
      "name": "ProfitabilityManagement",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "finance"
              }
            }
          ]
        }
      },
      "message": "Managers and finance can manage profitability"
    },
    {
      "name": "SummaryManagement",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "event_coordinator"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Event coordinators and above can manage summaries"
    },
    {
      "name": "EventStaffManagement",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "event_coordinator"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Event coordinators and above can manage event staff"
    },
    {
      "name": "InventoryStaffCanReserve",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Kitchen staff can reserve inventory"
    },
    {
      "name": "InventoryStaffCanConsume",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Kitchen staff can consume inventory"
    },
    {
      "name": "ManagersCanAdjust",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only managers can adjust inventory"
    },
    {
      "name": "ManagersCanRestock",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only managers can restock inventory"
    },
    {
      "name": "ManagersCanCreate",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only managers can create inventory items"
    },
    {
      "name": "ManagersCanCreateSupplier",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only managers can create suppliers"
    },
    {
      "name": "ManagersCanUpdateSupplier",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Leads and managers can update suppliers"
    },
    {
      "name": "ManagersCanDeactivateSupplier",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only managers can deactivate suppliers"
    },
    {
      "name": "StaffCanCreateTransaction",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Staff can create inventory transactions"
    },
    {
      "name": "KitchenStaffCanClaim",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Kitchen staff can claim kitchen tasks"
    },
    {
      "name": "KitchenStaffCanComplete",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Kitchen staff can complete kitchen tasks"
    },
    {
      "name": "ManagersCanCancel",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only managers can cancel kitchen tasks"
    },
    {
      "name": "AnyoneCanView",
      "action": "execute",
      "expression": {
        "kind": "literal",
        "value": {
          "kind": "boolean",
          "value": true
        }
      },
      "message": "Anyone can view kitchen tasks"
    },
    {
      "name": "SalesCanManageLeads",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "sales"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Sales staff can manage leads"
    },
    {
      "name": "SalesCanConvertLeads",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "sales"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Sales staff can convert leads to clients"
    },
    {
      "name": "ManagerCanDisqualifyLeads",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only managers can disqualify leads"
    },
    {
      "name": "ManagerCanArchiveLeads",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only managers can archive leads"
    },
    {
      "name": "MenuManagement",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Kitchen staff can manage menus"
    },
    {
      "name": "MenuDelete",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only leads and above can delete menus"
    },
    {
      "name": "MenuPricing",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only leads and above can update pricing"
    },
    {
      "name": "NotificationManagement",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Staff can manage their own notifications"
    },
    {
      "name": "NotificationCreate",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "system"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only system and managers can create notifications"
    },
    {
      "name": "NotificationDelete",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only managers and admins can delete notifications"
    },
    {
      "name": "AuditManagersCanOverride",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Managers and admins can create override audit entries"
    },
    {
      "name": "AuditAdminsCanAuthorize",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only admins can authorize overrides"
    },
    {
      "name": "KitchenStaffCanComment",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Kitchen staff can create and manage comments"
    },
    {
      "name": "ManagersCanDelete",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only leads and managers can delete comments"
    },
    {
      "name": "KitchenStaffCanResolve",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Kitchen staff can resolve comments"
    },
    {
      "name": "PrepListManagement",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Kitchen staff can manage prep lists"
    },
    {
      "name": "PrepListSeedImport",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "and",
        "left": {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "user"
              },
              "property": "role"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "kitchen_staff"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "kitchen_lead"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "manager"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "admin"
                  }
                }
              ]
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "user"
              },
              "property": "tenantId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          }
        },
        "right": {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "user"
            },
            "property": "tenantId"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": ""
            }
          }
        }
      },
      "message": "Kitchen staff can import prep seeds for their tenant"
    },
    {
      "name": "PrepListFinalize",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only leads and above can finalize prep lists"
    },
    {
      "name": "PrepListDelete",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only leads and above can delete prep lists"
    },
    {
      "name": "PrepTaskPlanWorkflowCreate",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Staff can create task plan workflows"
    },
    {
      "name": "PrepTaskPlanWorkflowReview",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Managers can review task plans"
    },
    {
      "name": "PrepTaskPlanWorkflowApprove",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Managers can approve task plans"
    },
    {
      "name": "PrepTaskPlanWorkflowQuickApprove",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only admins can quick approve without review"
    },
    {
      "name": "KitchenStaffClaim",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "and",
        "left": {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "user"
              },
              "property": "role"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "kitchen_staff"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "kitchen_lead"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "manager"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "admin"
                  }
                }
              ]
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "user"
              },
              "property": "tenantId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          }
        },
        "right": {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "user"
            },
            "property": "tenantId"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": ""
            }
          }
        }
      },
      "message": "Kitchen staff can claim prep tasks for their tenant"
    },
    {
      "name": "KitchenStaffComplete",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "and",
        "left": {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "user"
              },
              "property": "role"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "kitchen_staff"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "kitchen_lead"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "manager"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "admin"
                  }
                }
              ]
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "user"
              },
              "property": "tenantId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          }
        },
        "right": {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "user"
            },
            "property": "tenantId"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": ""
            }
          }
        }
      },
      "message": "Kitchen staff can complete prep tasks for their tenant"
    },
    {
      "name": "KitchenStaffUnclaim",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "and",
        "left": {
          "kind": "binary",
          "operator": "and",
          "left": {
            "kind": "binary",
            "operator": "in",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "user"
              },
              "property": "role"
            },
            "right": {
              "kind": "array",
              "elements": [
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "kitchen_staff"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "kitchen_lead"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "manager"
                  }
                },
                {
                  "kind": "literal",
                  "value": {
                    "kind": "string",
                    "value": "admin"
                  }
                }
              ]
            }
          },
          "right": {
            "kind": "binary",
            "operator": "!=",
            "left": {
              "kind": "member",
              "object": {
                "kind": "identifier",
                "name": "user"
              },
              "property": "tenantId"
            },
            "right": {
              "kind": "literal",
              "value": {
                "kind": "null"
              }
            }
          }
        },
        "right": {
          "kind": "binary",
          "operator": "!=",
          "left": {
            "kind": "member",
            "object": {
              "kind": "identifier",
              "name": "user"
            },
            "property": "tenantId"
          },
          "right": {
            "kind": "literal",
            "value": {
              "kind": "string",
              "value": ""
            }
          }
        }
      },
      "message": "Kitchen staff can unclaim prep tasks for their tenant"
    },
    {
      "name": "SalesCanManageProposals",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "sales"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Sales staff can manage proposals"
    },
    {
      "name": "SalesCanSendProposals",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "sales"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Sales staff can send proposals"
    },
    {
      "name": "ManagerCanWithdrawProposals",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only managers can withdraw proposals"
    },
    {
      "name": "SalesCanManageLineItems",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "sales"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Sales staff can manage line items"
    },
    {
      "name": "ManagersCanCreatePO",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only managers can create purchase orders"
    },
    {
      "name": "ManagersCanSubmitPO",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Leads and managers can submit purchase orders"
    },
    {
      "name": "ManagersCanApprovePO",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only managers can approve purchase orders"
    },
    {
      "name": "ManagersCanCancelPO",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only managers can cancel purchase orders"
    },
    {
      "name": "StaffCanReceivePO",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Staff can receive purchase orders"
    },
    {
      "name": "RecipeManagement",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Kitchen staff can manage recipes"
    },
    {
      "name": "RecipeDelete",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only leads and above can delete recipes"
    },
    {
      "name": "PricingUpdate",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only leads and above can update pricing"
    },
    {
      "name": "adminOnly",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "owner"
              }
            }
          ]
        }
      },
      "message": "Only admins and owners can manage role policies"
    },
    {
      "name": "ManagersCanCreateSchedule",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only managers can create schedules"
    },
    {
      "name": "ManagersCanPublishSchedule",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only managers can publish schedules"
    },
    {
      "name": "LeadsCanManageShifts",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Leads and managers can manage shifts"
    },
    {
      "name": "ManagersCanCloseSchedule",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only managers can close schedules"
    },
    {
      "name": "ManagersCanCreateShipment",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Leads and managers can create shipments"
    },
    {
      "name": "StaffCanReceiveShipment",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Staff can receive shipments"
    },
    {
      "name": "ManagersCanCancelShipment",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only managers can cancel shipments"
    },
    {
      "name": "ManagersCanModifyStation",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only managers can modify station settings"
    },
    {
      "name": "KitchenStaffCanAssign",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Kitchen staff can assign tasks to stations"
    },
    {
      "name": "StaffCanClockInOut",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "All staff can clock in and out"
    },
    {
      "name": "ManagersCanAddEntries",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Leads and managers can add manual time entries"
    },
    {
      "name": "StaffCanRequestEdit",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "All staff can request timecard edits"
    },
    {
      "name": "ManagersCanApproveEdits",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only managers can approve timecard edits"
    },
    {
      "name": "AdminsCanCreateUser",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only managers and admins can create users"
    },
    {
      "name": "AdminsCanUpdateUser",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only managers and admins can update users"
    },
    {
      "name": "AdminsCanDeactivateUser",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only managers and admins can deactivate users"
    },
    {
      "name": "AdminsCanTerminateUser",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only admins can terminate users"
    },
    {
      "name": "AdminsCanUpdateRole",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only admins can update user roles"
    },
    {
      "name": "WasteStaffCanLog",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_staff"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Kitchen staff can log waste entries"
    },
    {
      "name": "WasteManagersCanDelete",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "kitchen_lead"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only leads and managers can delete waste entries"
    },
    {
      "name": "WorkflowManagement",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "manager"
              }
            },
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only managers and admins can manage workflows"
    },
    {
      "name": "WorkflowActivation",
      "action": "execute",
      "expression": {
        "kind": "binary",
        "operator": "in",
        "left": {
          "kind": "member",
          "object": {
            "kind": "identifier",
            "name": "user"
          },
          "property": "role"
        },
        "right": {
          "kind": "array",
          "elements": [
            {
              "kind": "literal",
              "value": {
                "kind": "string",
                "value": "admin"
              }
            }
          ]
        }
      },
      "message": "Only admins can activate workflows"
    }
  ]
}